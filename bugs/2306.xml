<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>2306</bug_id>
          
          <creation_ts>2003-11-25 12:18 EDT</creation_ts>
          <short_desc>autocreate on fileinto feature</short_desc>
          <delta_ts>2010-10-21 07:17:31 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus IMAP</product>
          <component>IMAP</component>
          <version>2.3.x</version>
          <rep_platform>Other</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>355</dup_id>
          
          
          
          <priority>P2</priority>
          <bug_severity>bug</bug_severity>
          <target_milestone>Future</target_milestone>
          <dependson>355</dependson>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rob Siemborski">rjs3@andrew.cmu.edu</reporter>
          <assigned_to name="Ken Murchison">murch@andrew.cmu.edu</assigned_to>
          <cc>arisg@noc.uoa.gr</cc>
    
    <cc>vanmeeuwen@kolabsys.com</cc>
          <qa_contact name="The Cyrus Bugzilla List">cyrus-bugzilla@lists.andrew.cmu.edu</qa_contact>

      

      

      
          <long_desc isprivate="0">
            <who name="Rob Siemborski">rjs3@andrew.cmu.edu</who>
            <bug_when>2003-11-25 12:18:44 EDT</bug_when>
            <thetext>(patch to follow for automatic subfolder creation submitted by Aristotelis
&lt;arisg@noc.uoa.gr&gt;)</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Rob Siemborski">rjs3@andrew.cmu.edu</who>
            <bug_when>2003-11-25 12:19:04 EDT</bug_when>
            <thetext>Created an attachment (id=238)
the patch
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Aristotelis">arisg@noc.uoa.gr</who>
            <bug_when>2003-11-28 05:15:41 EDT</bug_when>
            <thetext>Created an attachment (id=239)
The latest Patch

If the size of the mailbox name is larger than MAX_MAILBOX_NAME
then the IMAP_MAILBOX_BADNAME error is returned.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Aristotelis">arisg@noc.uoa.gr</who>
            <bug_when>2003-12-03 09:14:31 EDT</bug_when>
            <thetext>Created an attachment (id=242)
Bug fix for the previous patch

The patch version 0.2 had a problem because a line was missing. So this
new patch fixes the problem, and also has some minor changes.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Rob Siemborski">rjs3@andrew.cmu.edu</who>
            <bug_when>2003-12-03 14:44:18 EDT</bug_when>
            <thetext>*** Bug 2315 has been marked as a duplicate of this bug. ***</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Jeroen van Meeuwen (Kolab Systems)">vanmeeuwen@kolabsys.com</who>
            <bug_when>2010-10-20 16:47:28 EDT</bug_when>
            <thetext>This patch still applies (with --fuzz=99), but may be obsoleted in favor of autocreate/autosieve?

See #355 which we do now depend on.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Jeroen van Meeuwen (Kolab Systems)">vanmeeuwen@kolabsys.com</who>
            <bug_when>2010-10-20 16:47:51 EDT</bug_when>
            <thetext>Update version accordingly</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Jeroen van Meeuwen (Kolab Systems)">vanmeeuwen@kolabsys.com</who>
            <bug_when>2010-10-21 07:17:31 EDT</bug_when>
            <thetext>We&apos;re moving all the autocreate/autosieve bugs into one tracker bug #355 (the first), aiming to integrate the UoA.gr patches.

*** This bug has been marked as a duplicate of bug 355 ***</thetext>
          </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>238</attachid>
            <date>2003-11-25 12:19 EDT</date>
            <desc>the patch</desc>
            <filename>cyrus-imapd-2.1.16-autosievefolder-0.1.patch.txt</filename>
            <type>text/plain</type>
            <size>4059</size>
            <attacher>rjs3@andrew.cmu.edu</attacher>
            
              <data encoding="base64">LS0tIGN5cnVzLWltYXBkLTIuMS4xNi9pbWFwL2xtdHBkLmMJMjAwMy0xMC0wMSAyMToyMDozNy4w
MDAwMDAwMDAgKzAzMDAKKysrIGN5cnVzLWltYXBkLTIuMS4xNi0wLjIvaW1hcC9sbXRwZC5jCTIw
MDMtMTEtMjUgMTE6Mjk6MjUuMzk0NTY2MDAwICswMjAwCkBAIC0xNDgsNiArMTQ4LDkgQEAKIHN0
cnVjdCBsbXRwX2Z1bmMgbXlsbXRwID0geyAmZGVsaXZlciwgJnZlcmlmeV91c2VyLCAmc2h1dF9k
b3duLAogCQkJICAgICZzcG9vbGZpbGUsICZyZW1vdmVzcG9vbCwgMCwgMSwgMCB9OwogCitzdGF0
aWMgaW50IGF1dG9zaWV2ZV9zdWJmb2xkZXIoY2hhciAqdXNlcmlkLCBzdHJ1Y3QgYXV0aF9zdGF0
ZSAqYXV0aF9zdGF0ZSwKKwkJCSAgICAgICBjaGFyICpzdWJmb2xkZXIpOworCiBzdGF0aWMgdm9p
ZCBsb2dkdXBlbGVtKCk7CiBzdGF0aWMgdm9pZCB1c2FnZSgpOwogc3RhdGljIHZvaWQgc2V0dXBf
c2lldmUoKTsKQEAgLTY5Miw2ICs2OTUsMTkgQEAKICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2QtPnVzZXJuYW1lLCBtZGF0YS0+bm90aWZ5aGVhZGVyLAogICAgICAgICAgICAgICAgICAgICAg
ICAgICBmYy0+bWFpbGJveCwgcXVvdGFvdmVycmlkZSwgMCk7CiAKKyAgICBpZiAocmV0ID09IElN
QVBfTUFJTEJPWF9OT05FWElTVEVOVCkgeworICAgIC8qIGlmICJwbHVzIiBmb2xkZXIgdW5kZXIg
SU5CT1gsIHRoZW4gdHJ5IHRvIGNyZWF0ZSBpdCAqLworICAgICAgICByZXQgPSBhdXRvc2lldmVf
c3ViZm9sZGVyKHNkLT51c2VybmFtZSwgc2QtPmF1dGhzdGF0ZSwgZmMtPm1haWxib3gpOworCisg
ICAgICAgIGlmICghcmV0KQorICAgICAgICAgICByZXQgPSBkZWxpdmVyX21haWxib3gobWQtPmRh
dGEsIG1kYXRhLT5zdGFnZSwgbWQtPnNpemUsCisgICAgICAgICAgICAgICAgICAgICAgICAgIGZj
LT5pbWFwZmxhZ3MtPmZsYWcsIGZjLT5pbWFwZmxhZ3MtPm5mbGFncywKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2QtPnVzZXJuYW1lLCBzZC0+YXV0aHN0YXRlLCBtZC0+aWQsCisgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNkLT51c2VybmFtZSwgbWRhdGEtPm5vdGlmeWhlYWRlciwKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgZmMtPm1haWxib3gsIHF1b3Rhb3ZlcnJpZGUsIDApOwor
CisgICAgfQorCiAgICAgaWYgKHJldCA9PSAwKSB7CiAKIAlzbm1wX2luY3JlbWVudChTSUVWRV9G
SUxFSU5UTywgMSk7CkBAIC0xNDk4LDMgKzE1NTksNzggQEAKIAogICAgIGFwcGVuZF9yZW1vdmVz
dGFnZShzdGFnZSk7CiB9CisKKworI2RlZmluZSBTRVAgJ3wnCisKK3N0YXRpYyBpbnQgYXV0b3Np
ZXZlX3N1YmZvbGRlcihjaGFyICp1c2VyaWQsIHN0cnVjdCBhdXRoX3N0YXRlICphdXRoX3N0YXRl
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqc3ViZm9sZGVyKSB7CisgICAg
Y2hhciBmb2xkZXJuYW1lIFtNQVhfTUFJTEJPWF9OQU1FKzFdOworICAgIGNoYXIgZiBbTUFYX01B
SUxCT1hfTkFNRSsxXTsKKyAgICBjb25zdCBjaGFyICpzdWJmIDsKKyAgICBjaGFyICpwLCAqcSwg
Km5leHRfc3ViZiwgKm1ib3g7CisgICAgaW50IGxlbiwgcjsKKyAgICBpbnQgY3JlYXRlc2lldmVm
b2xkZXIgPSAwOworCisgIAorICAgLyogQ2hlY2sgaWYgc3ViZm9sZGVyIGlzIE5VTEwgKi8gCisg
ICBpZihzdWJmb2xkZXIgPT0gTlVMTCkgCisgICAgICByZXR1cm4gSU1BUF9NQUlMQk9YX05PTkVY
SVNURU5UOyAKKworICAgaWYgKChzdWJmb2xkZXJbMF0gIT0gJ2knICYmIHN1YmZvbGRlclswXSAh
PSAnSScpIHx8CisgICAgICAgICAgICAgICAgIHN0cm5jYXNlY21wKHN1YmZvbGRlciwgImluYm94
IiwgNSkgfHwKKyAgICAgICAgICAgICAgc3ViZm9sZGVyWzVdICE9IGxtdHBkX25hbWVzcGFjZS5o
aWVyX3NlcCkKKyAgICAgICByZXR1cm4gSU1BUF9NQUlMQk9YX05PTkVYSVNURU5UOworCisKKyAg
IGlmIChjb25maWdfZ2V0c3dpdGNoKCJhbnlzaWV2ZWZvbGRlciIsIE5VTEwpKQorICAgICAgIGNy
ZWF0ZXNpZXZlZm9sZGVyID0gMTsKKyAgIGVsc2UgaWYgKChzdWJmID0gY29uZmlnX2dldHN0cmlu
ZygiYXV0b3NpZXZlZm9sZGVycyIsIE5VTEwpKSAhPSBOVUxMKSB7CisgICAgICAgICAgICAvKgor
ICAgICAgICAgICAgICogbWJveCBjb250YWlucyBvbmx5IHRoZSBzdWJmb2xkZXIgdG8gYmUgY3Jl
YXRlZCBuYW1lCisgICAgICAgICAgICAgKi8KKyAgICAgICAgICAgICBtYm94ID0gc3RyY2hyKHN1
YmZvbGRlciwgKGludCkgbG10cGRfbmFtZXNwYWNlLmhpZXJfc2VwKTsgCisgICAgICAgICAgICAg
bWJveCsrOworCisgICAgICAgICAgICAgLyogUm9sbCB0aHJvdWdoIHN1YmYgKi8KKyAgICAgICAg
ICAgICBuZXh0X3N1YmYgPSAoY2hhciAqKSBzdWJmOworICAgICAgICAgICAgIHdoaWxlICgqbmV4
dF9zdWJmKSB7CisgICAgICAgICAgICAgICAgICAgZm9yIChwID0gbmV4dF9zdWJmIDsgaXNzcGFj
ZSgoaW50KSAqcCkgfHwgKnAgPT0gU0VQIDsgcCsrKTsKKyAgICAgICAgICAgICAgICAgICBmb3Ig
KG5leHRfc3ViZiA9IHAgOyAqbmV4dF9zdWJmICYmICpuZXh0X3N1YmYgIT0gU0VQIDsgbmV4dF9z
dWJmKyspOworICAgICAgICAgICAgICAgICAgIGZvciAocSA9IG5leHRfc3ViZiA7IHEgPiBwICYm
IChpc3NwYWNlKChpbnQpICpxKSB8fCAqcSA9PSBTRVAgfHwgISpxKTsgcS0tKTsKKyAgICAgIAor
ICAgICAgICAgICAgICAgICAgIGlmICghKnApIGNvbnRpbnVlOworICAgICAgCisgICAgICAgICAg
ICAgICAgICAgbGVuID0gcSAtIHAgKyAxOworICAgICAgICAgICAgICAgICAgIHN0cm5jcHkoZiwg
cCwgbGVuKTsKKyAgICAgICAgICAgICAgICAgICBmW2xlbl0gPSAnXDAnOworICAgICAgCisgICAg
ICAgICAgICAgICAgICAgaWYgKCFzdHJjbXAoZiwgbWJveCkpIHsKKyAgICAgICAgICAgICAgICAg
ICAgICAgY3JlYXRlc2lldmVmb2xkZXIgPSAxOworCQkgICAgICAgYnJlYWs7CisgICAgICAgICAg
ICAgICAgICAgfQorICAgICAgICAgICAgIH0gICAgICAgICAgICAgIAorICAgICAgICB9CisKKyAg
IGlmIChjcmVhdGVzaWV2ZWZvbGRlcikgeworICAgICAgIC8qIFRyYW5zbGF0ZSBhbnkgc2VwYXJh
dG9ycyBpbiB1c2VyICovCisgICAgICAgaWYgKHVzZXJpZCkgbWJveG5hbWVfaGllcnNlcF90b2lu
dGVybmFsKCZsbXRwZF9uYW1lc3BhY2UsIHVzZXJpZCk7CisgICAKKyAgICAgICByID0gKCpsbXRw
ZF9uYW1lc3BhY2UubWJveG5hbWVfdG9pbnRlcm5hbCkgKCZsbXRwZF9uYW1lc3BhY2UsCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViZm9sZGVyLCB1c2Vy
aWQsIGZvbGRlcm5hbWUpOworICAgICAgIGlmICghcikKKyAgICAgICAgICAgciA9IG1ib3hsaXN0
X2NyZWF0ZW1haWxib3goZm9sZGVybmFtZSwgTUFJTEJPWF9GT1JNQVRfTk9STUFMLCBOVUxMLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSwgdXNlcmlkLCBhdXRo
X3N0YXRlLCAwLCAwLCAwKTsKKyAgICAgICBpZiAoIXIpIHsKKyAgICAgICAgICAgbWJveGxpc3Rf
Y2hhbmdlc3ViKGZvbGRlcm5hbWUsIHVzZXJpZCwgYXV0aF9zdGF0ZSwgMSwgMSk7CisgICAgICAg
ICAgIHN5c2xvZyhMT0dfREVCVUcsICJPbmRlbWFuZCBzdWJmb2xkZXI6IFVzZXIgJXMsIHN1YmZv
bGRlciAlcyBjcmVhdGlvbiBzdWNjZWVkZWQuIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdXNlcmlkLCBmb2xkZXJuYW1lKTsKKyAgICAgICAgICAg
cmV0dXJuIDA7CisgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICAgc3lzbG9nKExPR19FUlIsICJS
ZXF1ZXN0ZWQgc3ViZm9sZGVyOiBVc2VyICVzLCBzdWJmb2xkZXIgJXMgY3JlYXRpb24gZmFpbGVk
LiAlcyIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dXNlcmlkLCBmb2xkZXJuYW1lLGVycm9yX21lc3NhZ2UocikpOworICAgICAgICAgICByZXR1cm4g
cjsKKyAgICAgICB9CisgICB9IGVsc2UgCisgICAgICAgcmV0dXJuIElNQVBfTUFJTEJPWF9OT05F
WElTVEVOVDsKK30K
</data>        

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>239</attachid>
            <date>2003-11-28 05:15 EDT</date>
            <desc>The latest wrong Patch :)</desc>
            <filename>cyrus-imapd-2.1.16-autosievefolder-0.2.patch.txt</filename>
            <type>text/plain</type>
            <size>4543</size>
            <attacher>arisg@noc.uoa.gr</attacher>
            
              <data encoding="base64">ZGlmZiAtTmF1ciBjeXJ1cy1pbWFwZC0yLjEuMTYvaW1hcC9sbXRwZC5jIGN5cnVzLWltYXBkLTIu
MS4xNi5hdXRvc2lldmVmb2xkZXIvaW1hcC9sbXRwZC5jCi0tLSBjeXJ1cy1pbWFwZC0yLjEuMTYv
aW1hcC9sbXRwZC5jCTIwMDMtMTAtMDEgMjE6MjA6MzcuMDAwMDAwMDAwICswMzAwCisrKyBjeXJ1
cy1pbWFwZC0yLjEuMTYuYXV0b3NpZXZlZm9sZGVyL2ltYXAvbG10cGQuYwkyMDAzLTExLTI3IDE2
OjQwOjE5LjY2OTIxMjAwMCArMDIwMApAQCAtMTQ4LDYgKzE0OCw5IEBACiBzdHJ1Y3QgbG10cF9m
dW5jIG15bG10cCA9IHsgJmRlbGl2ZXIsICZ2ZXJpZnlfdXNlciwgJnNodXRfZG93biwKIAkJCSAg
ICAmc3Bvb2xmaWxlLCAmcmVtb3Zlc3Bvb2wsIDAsIDEsIDAgfTsKIAorc3RhdGljIGludCBhdXRv
c2lldmVfc3ViZm9sZGVyKGNoYXIgKnVzZXJpZCwgc3RydWN0IGF1dGhfc3RhdGUgKmF1dGhfc3Rh
dGUsCisJCQkgICAgICAgY2hhciAqc3ViZm9sZGVyKTsKKwogc3RhdGljIHZvaWQgbG9nZHVwZWxl
bSgpOwogc3RhdGljIHZvaWQgdXNhZ2UoKTsKIHN0YXRpYyB2b2lkIHNldHVwX3NpZXZlKCk7CkBA
IC02OTIsNiArNjk1LDE5IEBACiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkLT51c2VybmFt
ZSwgbWRhdGEtPm5vdGlmeWhlYWRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgZmMtPm1h
aWxib3gsIHF1b3Rhb3ZlcnJpZGUsIDApOwogCisgICAgaWYgKHJldCA9PSBJTUFQX01BSUxCT1hf
Tk9ORVhJU1RFTlQpIHsKKyAgICAvKiBpZiAicGx1cyIgZm9sZGVyIHVuZGVyIElOQk9YLCB0aGVu
IHRyeSB0byBjcmVhdGUgaXQgKi8KKyAgICAgICAgcmV0ID0gYXV0b3NpZXZlX3N1YmZvbGRlcihz
ZC0+dXNlcm5hbWUsIHNkLT5hdXRoc3RhdGUsIGZjLT5tYWlsYm94KTsKKworICAgICAgICBpZiAo
IXJldCkKKyAgICAgICAgICAgcmV0ID0gZGVsaXZlcl9tYWlsYm94KG1kLT5kYXRhLCBtZGF0YS0+
c3RhZ2UsIG1kLT5zaXplLAorICAgICAgICAgICAgICAgICAgICAgICAgICBmYy0+aW1hcGZsYWdz
LT5mbGFnLCBmYy0+aW1hcGZsYWdzLT5uZmxhZ3MsCisgICAgICAgICAgICAgICAgICAgICAgICAg
IHNkLT51c2VybmFtZSwgc2QtPmF1dGhzdGF0ZSwgbWQtPmlkLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZC0+dXNlcm5hbWUsIG1kYXRhLT5ub3RpZnloZWFkZXIsCisgICAgICAgICAgICAg
ICAgICAgICAgICAgIGZjLT5tYWlsYm94LCBxdW90YW92ZXJyaWRlLCAwKTsKKworICAgIH0KKwog
ICAgIGlmIChyZXQgPT0gMCkgewogCiAJc25tcF9pbmNyZW1lbnQoU0lFVkVfRklMRUlOVE8sIDEp
OwpAQCAtMTQ5OCwzICsxNTE0LDg2IEBACiAKICAgICBhcHBlbmRfcmVtb3Zlc3RhZ2Uoc3RhZ2Up
OwogfQorCisKKyNkZWZpbmUgU0VQICd8JworCitzdGF0aWMgaW50IGF1dG9zaWV2ZV9zdWJmb2xk
ZXIoY2hhciAqdXNlcmlkLCBzdHJ1Y3QgYXV0aF9zdGF0ZSAqYXV0aF9zdGF0ZSwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNoYXIgKnN1YmZvbGRlcikgeworICAgIGNoYXIgZm9sZGVy
bmFtZSBbTUFYX01BSUxCT1hfTkFNRSsxXTsKKyAgICBjaGFyIGYgW01BWF9NQUlMQk9YX05BTUUr
MV07CisgICAgY29uc3QgY2hhciAqc3ViZiA7CisgICAgY2hhciAqcCwgKnEsICpuZXh0X3N1YmYs
ICptYm94OworICAgIGludCBsZW4sIHI7CisgICAgaW50IGNyZWF0ZXNpZXZlZm9sZGVyID0gMDsK
KworICAKKyAgIC8qIENoZWNrIGlmIHN1YmZvbGRlciBpcyBOVUxMICovIAorICAgaWYoc3ViZm9s
ZGVyID09IE5VTEwpIAorICAgICAgcmV0dXJuIElNQVBfTUFJTEJPWF9OT05FWElTVEVOVDsgCisK
KyAgIGlmICgoc3ViZm9sZGVyWzBdICE9ICdpJyAmJiBzdWJmb2xkZXJbMF0gIT0gJ0knKSB8fAor
ICAgICAgICAgICAgICAgICBzdHJuY2FzZWNtcChzdWJmb2xkZXIsICJpbmJveCIsIDUpIHx8Cisg
ICAgICAgICAgICAgIHN1YmZvbGRlcls1XSAhPSBsbXRwZF9uYW1lc3BhY2UuaGllcl9zZXApCisg
ICAgICAgcmV0dXJuIElNQVBfTUFJTEJPWF9OT05FWElTVEVOVDsKKworCisgICBpZiAoY29uZmln
X2dldHN3aXRjaCgiYW55c2lldmVmb2xkZXIiLCBOVUxMKSkKKyAgICAgICBjcmVhdGVzaWV2ZWZv
bGRlciA9IDE7CisgICBlbHNlIGlmICgoc3ViZiA9IGNvbmZpZ19nZXRzdHJpbmcoImF1dG9zaWV2
ZWZvbGRlcnMiLCBOVUxMKSkgIT0gTlVMTCkgeworICAgICAgICAgICAgLyoKKyAgICAgICAgICAg
ICAqIG1ib3ggY29udGFpbnMgb25seSB0aGUgc3ViZm9sZGVyIHRvIGJlIGNyZWF0ZWQgbmFtZQor
ICAgICAgICAgICAgICovCisgICAgICAgICAgICAgbWJveCA9IHN0cmNocihzdWJmb2xkZXIsIChp
bnQpIGxtdHBkX25hbWVzcGFjZS5oaWVyX3NlcCk7IAorICAgICAgICAgICAgIG1ib3grKzsKKwor
ICAgICAgICAgICAgIC8qIFJvbGwgdGhyb3VnaCBzdWJmICovCisgICAgICAgICAgICAgbmV4dF9z
dWJmID0gKGNoYXIgKikgc3ViZjsKKyAgICAgICAgICAgICB3aGlsZSAoKm5leHRfc3ViZikgewor
ICAgICAgICAgICAgICAgICAgIGZvciAocCA9IG5leHRfc3ViZiA7IGlzc3BhY2UoKGludCkgKnAp
IHx8ICpwID09IFNFUCA7IHArKyk7CisgICAgICAgICAgICAgICAgICAgZm9yIChuZXh0X3N1YmYg
PSBwIDsgKm5leHRfc3ViZiAmJiAqbmV4dF9zdWJmICE9IFNFUCA7IG5leHRfc3ViZisrKTsKKyAg
ICAgICAgICAgICAgICAgICBmb3IgKHEgPSBuZXh0X3N1YmYgOyBxID4gcCAmJiAoaXNzcGFjZSgo
aW50KSAqcSkgfHwgKnEgPT0gU0VQIHx8ICEqcSk7IHEtLSk7CisgICAgICAKKyAgICAgICAgICAg
ICAgICAgICBpZiAoISpwKSBjb250aW51ZTsKKyAgICAgICAgICAgICAgICAgICAvKgorICAgICAg
ICAgICAgICAgICAgICAqIFRoaXMgaXMgYSBwcmVsaW1pbmFyeSBsZW5ndGggY2hlY2sgYmFzZWQg
b24gdGhlIGFzc3VtcHRpb24KKyAgICAgICAgICAgICAgICAgICAgKiB0aGF0IHRoZSAqZmluYWwq
IGludGVybmFsIGZvcm1hdCB3aWxsIGJlIHNvbWV0aGluZworICAgICAgICAgICAgICAgICAgICAq
IGxpa2UgdXNlci51c2VyaWQuc3ViZm9sZGVyKHMpLgorICAgICAgICAgICAgICAgICAgICAqLwor
ICAgICAgICAgICAgICAgICAgIGlmIChsZW4gID4gc2l6ZW9mKGYpIC0gc3RybGVuKHVzZXJpZCkg
LSA1KQorICAgICAgICAgICAgICAgICAgICAgICByID0gSU1BUF9NQUlMQk9YX0JBRE5BTUU7CisK
KyAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgc3Ry
bmNweShmLCBwLCBsZW4pOworICAgICAgICAgICAgICAgICAgICAgICBmW2xlbl0gPSAnXDAnOwor
ICAgICAgICAgICAgICAgICAgIH0KKworICAgICAgICAgICAgICAgICAgIGlmICghc3RyY21wKGYs
IG1ib3gpKSB7CisgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZXNpZXZlZm9sZGVyID0gMTsK
KwkJICAgICAgIGJyZWFrOworICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICB9ICAg
ICAgICAgICAgICAKKyAgICAgICAgfQorCisgICBpZiAoY3JlYXRlc2lldmVmb2xkZXIpIHsKKyAg
ICAgICAvKiBUcmFuc2xhdGUgYW55IHNlcGFyYXRvcnMgaW4gdXNlciAqLworICAgICAgIGlmICh1
c2VyaWQpIG1ib3huYW1lX2hpZXJzZXBfdG9pbnRlcm5hbCgmbG10cGRfbmFtZXNwYWNlLCB1c2Vy
aWQpOworICAgCisgICAgICAgciA9ICgqbG10cGRfbmFtZXNwYWNlLm1ib3huYW1lX3RvaW50ZXJu
YWwpICgmbG10cGRfbmFtZXNwYWNlLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN1YmZvbGRlciwgdXNlcmlkLCBmb2xkZXJuYW1lKTsKKyAgICAgICBpZiAo
IXIpCisgICAgICAgICAgIHIgPSBtYm94bGlzdF9jcmVhdGVtYWlsYm94KGZvbGRlcm5hbWUsIE1B
SUxCT1hfRk9STUFUX05PUk1BTCwgTlVMTCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIDEsIHVzZXJpZCwgYXV0aF9zdGF0ZSwgMCwgMCwgMCk7CisgICAgICAgaWYg
KCFyKSB7CisgICAgICAgICAgIG1ib3hsaXN0X2NoYW5nZXN1Yihmb2xkZXJuYW1lLCB1c2VyaWQs
IGF1dGhfc3RhdGUsIDEsIDEpOworICAgICAgICAgICBzeXNsb2coTE9HX0RFQlVHLCAiT25kZW1h
bmQgc3ViZm9sZGVyOiBVc2VyICVzLCBzdWJmb2xkZXIgJXMgY3JlYXRpb24gc3VjY2VlZGVkLiIs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJp
ZCwgZm9sZGVybmFtZSk7CisgICAgICAgICAgIHJldHVybiAwOworICAgICAgIH0gZWxzZSB7Cisg
ICAgICAgICAgIHN5c2xvZyhMT0dfRVJSLCAiUmVxdWVzdGVkIHN1YmZvbGRlcjogVXNlciAlcywg
c3ViZm9sZGVyICVzIGNyZWF0aW9uIGZhaWxlZC4gJXMiLAorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJpZCwgZm9sZGVybmFtZSxlcnJvcl9tZXNz
YWdlKHIpKTsKKyAgICAgICAgICAgcmV0dXJuIHI7CisgICAgICAgfQorICAgfSBlbHNlIAorICAg
ICAgIHJldHVybiBJTUFQX01BSUxCT1hfTk9ORVhJU1RFTlQ7Cit9Cg==
</data>        

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>242</attachid>
            <date>2003-12-03 09:14 EDT</date>
            <desc>The latest patch</desc>
            <filename>cyrus-imapd-2.1.16-autosievefolder-0.3.patch.txt</filename>
            <type>text/plain</type>
            <size>4609</size>
            <attacher>arisg@noc.uoa.gr</attacher>
            
              <data encoding="base64">ZGlmZiAtTmF1ciBjeXJ1cy1pbWFwZC0yLjEuMTYvaW1hcC9sbXRwZC5jIGN5cnVzLWltYXBkLTIu
MS4xNi5hdXRvc2lldmVmb2xkZXIvaW1hcC9sbXRwZC5jCi0tLSBjeXJ1cy1pbWFwZC0yLjEuMTYv
aW1hcC9sbXRwZC5jCTIwMDMtMTAtMDEgMjE6MjA6MzcuMDAwMDAwMDAwICswMzAwCisrKyBjeXJ1
cy1pbWFwZC0yLjEuMTYuYXV0b3NpZXZlZm9sZGVyL2ltYXAvbG10cGQuYwkyMDAzLTExLTI3IDE2
OjQwOjE5LjY2OTIxMjAwMCArMDIwMApAQCAtMTQ4LDYgKzE0OCw5IEBACiBzdHJ1Y3QgbG10cF9m
dW5jIG15bG10cCA9IHsgJmRlbGl2ZXIsICZ2ZXJpZnlfdXNlciwgJnNodXRfZG93biwKIAkJCSAg
ICAmc3Bvb2xmaWxlLCAmcmVtb3Zlc3Bvb2wsIDAsIDEsIDAgfTsKIAorc3RhdGljIGludCBhdXRv
c2lldmVfc3ViZm9sZGVyKGNoYXIgKnVzZXJpZCwgc3RydWN0IGF1dGhfc3RhdGUgKmF1dGhfc3Rh
dGUsCisJCQkgICAgICAgY2hhciAqc3ViZm9sZGVyKTsKKwogc3RhdGljIHZvaWQgbG9nZHVwZWxl
bSgpOwogc3RhdGljIHZvaWQgdXNhZ2UoKTsKIHN0YXRpYyB2b2lkIHNldHVwX3NpZXZlKCk7CkBA
IC02OTIsNiArNjk1LDE5IEBACiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkLT51c2VybmFt
ZSwgbWRhdGEtPm5vdGlmeWhlYWRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgZmMtPm1h
aWxib3gsIHF1b3Rhb3ZlcnJpZGUsIDApOwogCisgICAgaWYgKHJldCA9PSBJTUFQX01BSUxCT1hf
Tk9ORVhJU1RFTlQpIHsKKyAgICAvKiBpZiAicGx1cyIgZm9sZGVyIHVuZGVyIElOQk9YLCB0aGVu
IHRyeSB0byBjcmVhdGUgaXQgKi8KKyAgICAgICAgcmV0ID0gYXV0b3NpZXZlX3N1YmZvbGRlcihz
ZC0+dXNlcm5hbWUsIHNkLT5hdXRoc3RhdGUsIGZjLT5tYWlsYm94KTsKKworICAgICAgICBpZiAo
IXJldCkKKyAgICAgICAgICAgcmV0ID0gZGVsaXZlcl9tYWlsYm94KG1kLT5kYXRhLCBtZGF0YS0+
c3RhZ2UsIG1kLT5zaXplLAorICAgICAgICAgICAgICAgICAgICAgICAgICBmYy0+aW1hcGZsYWdz
LT5mbGFnLCBmYy0+aW1hcGZsYWdzLT5uZmxhZ3MsCisgICAgICAgICAgICAgICAgICAgICAgICAg
IHNkLT51c2VybmFtZSwgc2QtPmF1dGhzdGF0ZSwgbWQtPmlkLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZC0+dXNlcm5hbWUsIG1kYXRhLT5ub3RpZnloZWFkZXIsCisgICAgICAgICAgICAg
ICAgICAgICAgICAgIGZjLT5tYWlsYm94LCBxdW90YW92ZXJyaWRlLCAwKTsKKworICAgIH0KKwog
ICAgIGlmIChyZXQgPT0gMCkgewogCiAJc25tcF9pbmNyZW1lbnQoU0lFVkVfRklMRUlOVE8sIDEp
OwpAQCAtMTQ5OCwzICsxNTE0LDg2IEBACiAKICAgICBhcHBlbmRfcmVtb3Zlc3RhZ2Uoc3RhZ2Up
OwogfQorCisKKyNkZWZpbmUgU0VQICd8JworCitzdGF0aWMgaW50IGF1dG9zaWV2ZV9zdWJmb2xk
ZXIoY2hhciAqdXNlcmlkLCBzdHJ1Y3QgYXV0aF9zdGF0ZSAqYXV0aF9zdGF0ZSwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNoYXIgKnN1YmZvbGRlcikgeworICAgIGNoYXIgZm9sZGVy
bmFtZSBbTUFYX01BSUxCT1hfTkFNRSsxXTsKKyAgICBjaGFyIGYgW01BWF9NQUlMQk9YX05BTUUr
MV07CisgICAgY29uc3QgY2hhciAqc3ViZiA7CisgICAgY2hhciAqcCwgKnEsICpuZXh0X3N1YmYs
ICptYm94OworICAgIGludCBsZW4sIHIgPSAwOworICAgIGludCBjcmVhdGVzaWV2ZWZvbGRlciA9
IDA7CisKKyAgCisgICAvKiBDaGVjayBpZiBzdWJmb2xkZXIgaXMgTlVMTCAqLyAKKyAgIGlmKHN1
YmZvbGRlciA9PSBOVUxMKSAKKyAgICAgIHJldHVybiBJTUFQX01BSUxCT1hfTk9ORVhJU1RFTlQ7
IAorCisgICBpZiAoKHN1YmZvbGRlclswXSAhPSAnaScgJiYgc3ViZm9sZGVyWzBdICE9ICdJJykg
fHwKKyAgICAgICAgICAgICAgICAgc3RybmNhc2VjbXAoc3ViZm9sZGVyLCAiaW5ib3giLCA1KSB8
fAorICAgICAgICAgICAgICBzdWJmb2xkZXJbNV0gIT0gbG10cGRfbmFtZXNwYWNlLmhpZXJfc2Vw
KQorICAgICAgIHJldHVybiBJTUFQX01BSUxCT1hfTk9ORVhJU1RFTlQ7CisKKworICAgaWYgKGNv
bmZpZ19nZXRzd2l0Y2goImFueXNpZXZlZm9sZGVyIiwgTlVMTCkpCisgICAgICAgY3JlYXRlc2ll
dmVmb2xkZXIgPSAxOworICAgZWxzZSBpZiAoKHN1YmYgPSBjb25maWdfZ2V0c3RyaW5nKCJhdXRv
c2lldmVmb2xkZXJzIiwgTlVMTCkpICE9IE5VTEwpIHsKKyAgICAgICAgICAgIC8qCisgICAgICAg
ICAgICAgKiBtYm94IGNvbnRhaW5zIG9ubHkgdGhlIHN1YmZvbGRlciB0byBiZSBjcmVhdGVkIG5h
bWUKKyAgICAgICAgICAgICAqLworICAgICAgICAgICAgIG1ib3ggPSBzdHJjaHIoc3ViZm9sZGVy
LCAoaW50KSBsbXRwZF9uYW1lc3BhY2UuaGllcl9zZXApOyAKKyAgICAgICAgICAgICBtYm94Kys7
CisKKyAgICAgICAgICAgICAvKiBSb2xsIHRocm91Z2ggc3ViZiAqLworICAgICAgICAgICAgIG5l
eHRfc3ViZiA9IChjaGFyICopIHN1YmY7CisgICAgICAgICAgICAgd2hpbGUgKCpuZXh0X3N1YmYp
IHsKKyAgICAgICAgICAgICAgICAgICBmb3IgKHAgPSBuZXh0X3N1YmYgOyBpc3NwYWNlKChpbnQp
ICpwKSB8fCAqcCA9PSBTRVAgOyBwKyspOworICAgICAgICAgICAgICAgICAgIGZvciAobmV4dF9z
dWJmID0gcCA7ICpuZXh0X3N1YmYgJiYgKm5leHRfc3ViZiAhPSBTRVAgOyBuZXh0X3N1YmYrKyk7
CisgICAgICAgICAgICAgICAgICAgZm9yIChxID0gbmV4dF9zdWJmIDsgcSA+IHAgJiYgKGlzc3Bh
Y2UoKGludCkgKnEpIHx8ICpxID09IFNFUCB8fCAhKnEpOyBxLS0pOworICAgICAgCisgICAgICAg
ICAgICAgICAgICAgaWYgKCEqcCkgY29udGludWU7CisgICAgICAgICAgICAgICAgICAgLyoKKyAg
ICAgICAgICAgICAgICAgICAgKiBUaGlzIGlzIGEgcHJlbGltaW5hcnkgbGVuZ3RoIGNoZWNrIGJh
c2VkIG9uIHRoZSBhc3N1bXB0aW9uCisgICAgICAgICAgICAgICAgICAgICogdGhhdCB0aGUgKmZp
bmFsKiBpbnRlcm5hbCBmb3JtYXQgd2lsbCBiZSBzb21ldGhpbmcKKyAgICAgICAgICAgICAgICAg
ICAgKiBsaWtlIHVzZXIudXNlcmlkLnN1YmZvbGRlcihzKS4KKyAgICAgICAgICAgICAgICAgICAg
Ki8KKyAgICAgICAgICAgICAgICAgICBsZW4gPSBxIC0gcCArIDE7IAorICAgICAgICAgICAgICAg
ICAgIGlmIChsZW4gID4gc2l6ZW9mKGYpIC0gc3RybGVuKHVzZXJpZCkgLSA1KQorICAgICAgICAg
ICAgICAgICAgICAgICByID0gSU1BUF9NQUlMQk9YX0JBRE5BTUU7CisKKyAgICAgICAgICAgICAg
ICAgICBpZiAoIXIpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgc3RybmNweShmLCBwLCBsZW4p
OworICAgICAgICAgICAgICAgICAgICAgICBmW2xlbl0gPSAnXDAnOworCisgICAgICAgICAgICAg
ICAgICAgICAgIGlmICghc3RyY21wKGYsIG1ib3gpKSB7CisgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjcmVhdGVzaWV2ZWZvbGRlciA9IDE7CisJICAgICAgICAgICAgICAgICAgICBicmVhazsK
KyAgICAgICAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAg
ICAgICB9ICAgICAgICAgICAgICAKKyAgICAgICAgfQorCisgICBpZiAoY3JlYXRlc2lldmVmb2xk
ZXIpIHsKKyAgICAgICAvKiBUcmFuc2xhdGUgYW55IHNlcGFyYXRvcnMgaW4gdXNlciAqLworICAg
ICAgIGlmICh1c2VyaWQpIG1ib3huYW1lX2hpZXJzZXBfdG9pbnRlcm5hbCgmbG10cGRfbmFtZXNw
YWNlLCB1c2VyaWQpOworICAgCisgICAgICAgciA9ICgqbG10cGRfbmFtZXNwYWNlLm1ib3huYW1l
X3RvaW50ZXJuYWwpICgmbG10cGRfbmFtZXNwYWNlLAorICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN1YmZvbGRlciwgdXNlcmlkLCBmb2xkZXJuYW1lKTsKKyAg
ICAgICBpZiAoIXIpCisgICAgICAgICAgIHIgPSBtYm94bGlzdF9jcmVhdGVtYWlsYm94KGZvbGRl
cm5hbWUsIE1BSUxCT1hfRk9STUFUX05PUk1BTCwgTlVMTCwKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIDEsIHVzZXJpZCwgYXV0aF9zdGF0ZSwgMCwgMCwgMCk7Cisg
ICAgICAgaWYgKCFyKSB7CisgICAgICAgICAgIG1ib3hsaXN0X2NoYW5nZXN1Yihmb2xkZXJuYW1l
LCB1c2VyaWQsIGF1dGhfc3RhdGUsIDEsIDEpOworICAgICAgICAgICBzeXNsb2coTE9HX0RFQlVH
LCAiT25kZW1hbmQgc3ViZm9sZGVyOiBVc2VyICVzLCBzdWJmb2xkZXIgJXMgY3JlYXRpb24gc3Vj
Y2VlZGVkLiIsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHVzZXJpZCwgZm9sZGVybmFtZSk7CisgICAgICAgICAgIHJldHVybiAwOworICAgICAgIH0g
ZWxzZSB7CisgICAgICAgICAgIHN5c2xvZyhMT0dfRVJSLCAiUmVxdWVzdGVkIHN1YmZvbGRlcjog
VXNlciAlcywgc3ViZm9sZGVyICVzIGNyZWF0aW9uIGZhaWxlZC4gJXMiLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJpZCwgZm9sZGVybmFtZSxl
cnJvcl9tZXNzYWdlKHIpKTsKKyAgICAgICAgICAgcmV0dXJuIHI7CisgICAgICAgfQorICAgfSBl
bHNlIAorICAgICAgIHJldHVybiBJTUFQX01BSUxCT1hfTk9ORVhJU1RFTlQ7Cit9Cg==
</data>        

          </attachment>
      

    </bug>

</bugzilla>