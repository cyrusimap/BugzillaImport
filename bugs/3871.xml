<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>3871</bug_id>
          
          <creation_ts>2014-11-17 16:24 EDT</creation_ts>
          <short_desc>dbm_open() failures not reported well</short_desc>
          <delta_ts>2014-11-17 16:24:01 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus SASL</product>
          <component>sasldb</component>
          <version>2.1.x</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mikhail T.">mi+cyrus-2014@aldan.algebra.com</reporter>
          <assigned_to name="Alexey Melnikov">Alexey.Melnikov@isode.com</assigned_to>
          
          <qa_contact name="The Cyrus Bugzilla List">cyrus-bugzilla@lists.andrew.cmu.edu</qa_contact>

      

      

      
          <long_desc isprivate="0">
            <who name="Mikhail T.">mi+cyrus-2014@aldan.algebra.com</who>
            <bug_when>2014-11-17 16:24:01 EDT</bug_when>
            <thetext>Created an attachment (id=1544)
Add more details to &quot;Can not open db&quot; errors

The failures of dbm_open inside sasldb/db_ndbm.c are currently reported without any details -- neither the filename nor the error are logged.

The proposed patch addresses both shortcomings. Please, consider including in the next release.</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1544</attachid>
            <date>2014-11-17 16:24 EDT</date>
            <desc>Add more details to &quot;Can not open db&quot; errors</desc>
            <filename>patch-sasldb__db_ndbm.c</filename>
            <type>text/plain</type>
            <size>969</size>
            <attacher>mi+cyrus-2014@aldan.algebra.com</attacher>
            
              <data encoding="base64">LS0tIHNhc2xkYi9kYl9uZGJtLmMJMjAxMi0wMS0yNyAxODozMTozNi4wMDAwMDAwMDAgLTA1MDAK
KysrIHNhc2xkYi9kYl9uZGJtLmMJMjAxNC0xMS0xNyAxNTo1OTo1NC4wMDAwMDAwMDAgLTA1MDAK
QEAgLTEwMiw1ICsxMDIsNiBAQAogICBkYiA9IGRibV9vcGVuKHBhdGgsIE9fUkRPTkxZLCBTX0lS
VVNSIHwgU19JV1VTUik7CiAgIGlmICghIGRiKSB7Ci0gICAgICB1dGlscy0+c2V0ZXJyb3IoY250
eHQsIDAsICJDb3VsZCBub3Qgb3BlbiBkYiIpOworICAgICAgdXRpbHMtPnNldGVycm9yKGNudHh0
LCAwLCAiQ291bGQgbm90IG9wZW4gZGIgYCVzJzogJXMiLAorCQkgICAgICBwYXRoLCBzdHJlcnJv
cihlcnJubykpOwogICAgICAgcmVzdWx0ID0gU0FTTF9GQUlMOwogICAgICAgZ290byBjbGVhbnVw
OwpAQCAtMTgzLDggKzE4NCw5IEBACiAJCVNfSVJVU1IgfCBTX0lXVVNSKTsKICAgaWYgKCEgZGIp
IHsKKyAgICAgIHV0aWxzLT5zZXRlcnJvcihjb25uLCAwLCAiQ291bGQgbm90IG9wZW4gZGIgYCVz
JyBmb3Igd3JpdGluZzogJXMiLAorCQkgICAgICBwYXRoLCBzdHJlcnJvcihlcnJubykpOwogICAg
ICAgdXRpbHMtPmxvZyhjb25uLCBTQVNMX0xPR19FUlIsCiAJCSAiU0FTTCBlcnJvciBvcGVuaW5n
IHBhc3N3b3JkIGZpbGUuICIKIAkJICJEbyB5b3UgaGF2ZSB3cml0ZSBwZXJtaXNzaW9ucz9cbiIp
OwotICAgICAgdXRpbHMtPnNldGVycm9yKGNvbm4sIDAsICJDb3VsZCBub3Qgb3BlbiBkYiBmb3Ig
d3JpdGUiKTsKICAgICAgIGdvdG8gY2xlYW51cDsKICAgfQpAQCAtMzIzLDUgKzMyNSw2IEBACiAK
ICAgICBpZighZGIpIHsKLQl1dGlscy0+c2V0ZXJyb3IoY29ubiwgMCwgIkNvdWxkIG5vdCBvcGVu
IGRiIik7CisJdXRpbHMtPnNldGVycm9yKGNvbm4sIDAsICJDb3VsZCBub3Qgb3BlbiBkYiBgJXMn
OiAlcyIsCisJCQlwYXRoLCBzdHJlcnJvcihlcnJubykpOwogCXJldHVybiBOVUxMOwogICAgIH0K
</data>        

          </attachment>
      

    </bug>

</bugzilla>