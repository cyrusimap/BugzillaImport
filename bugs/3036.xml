<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>3036</bug_id>
          
          <creation_ts>2008-01-24 09:37 EDT</creation_ts>
          <short_desc>setpass connection state</short_desc>
          <delta_ts>2008-01-24 09:37:08 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus SASL</product>
          <component>SASL</component>
          <version>2.1.x</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          
          
          <bug_file_loc>http://www.openldap.org/its/index.cgi/Incoming?id=5266</bug_file_loc>
          
          
          <priority>P3</priority>
          <bug_severity>bug</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan White">dwhite@olp.net</reporter>
          <assigned_to name="Ken Murchison">murch@andrew.cmu.edu</assigned_to>
          
          

      

      

      
          <long_desc isprivate="0">
            <who name="Dan White">dwhite@olp.net</who>
            <bug_when>2008-01-24 09:37:08 EDT</bug_when>
            <thetext>Created an attachment (id=988)
Proposed Patch

Per Howard Chu, there appears to be &quot;a bug in Cyrus SASL; the setpass function is zeroing out the connection state when it should be leaving it intact.&quot;

Details about this bug can be found here, which originated as an openldap bug:

http://www.openldap.org/its/index.cgi/Incoming?id=5266

Thank You,
- Dan White</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>988</attachid>
            <date>2008-01-24 09:37 EDT</date>
            <desc>Proposed Patch</desc>
            <filename>sasl-patch.diff</filename>
            <type>text/plain</type>
            <size>1504</size>
            <attacher>dwhite@olp.net</attacher>
            
              <data encoding="base64">SW5kZXg6IHNlcnZlci5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3Nhc2wvbGliL3Nl
cnZlci5jLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjE0NwpkaWZmIC11IC1yMS4xNDcgc2VydmVy
LmMKLS0tIHNlcnZlci5jCTMgSnVsIDIwMDYgMTQ6NDM6MTYgLTAwMDAJMS4xNDcKKysrIHNlcnZl
ci5jCTIzIERlYyAyMDA3IDAxOjUyOjI1IC0wMDAwCkBAIC0xMjksNiArMTI5LDcgQEAKICAgICBp
bnQgcmVzdWx0ID0gU0FTTF9PSywgdG1wcmVzdWx0OwogICAgIHNhc2xfc2VydmVyX2Nvbm5fdCAq
c19jb25uID0gKHNhc2xfc2VydmVyX2Nvbm5fdCAqKSBjb25uOwogICAgIGNvbnN0IGNoYXIgKnBh
c3N3b3JkX3JlcXVlc3RbXSA9IHsgU0FTTF9BVVhfUEFTU1dPUkRfUFJPUCwgTlVMTCB9OworICAg
IHN0cnVjdCBwcm9wY3R4ICpwcm9wY3R4ID0gTlVMTDsKICAgICBzYXNsX3NlcnZlcl91c2VyZGJf
c2V0cGFzc190ICpzZXRwYXNzX2NiID0gTlVMTDsKICAgICB2b2lkICpjb250ZXh0ID0gTlVMTDsK
ICAgICBpbnQgdHJpZWRfc2V0cGFzcyA9IDA7CkBAIC0xNzIsMTQgKzE3MywxOCBAQAogCSAgICBw
YXNzID0gTlVMTDsKIAkgICAgcGFzc2xlbiA9IDA7CiAJfQotCi0JcmVzdWx0ID0gcHJvcF9yZXF1
ZXN0KHNfY29ubi0+c3BhcmFtcy0+cHJvcGN0eCwgcGFzc3dvcmRfcmVxdWVzdCk7CisgCisJcHJv
cGN0eCA9IHByb3BfbmV3KDApOworCWlmICggIXByb3BjdHggKSB7CisJCVJFVFVSTihjb25uLCBT
QVNMX05PTUVNKTsKKwl9CisJcmVzdWx0ID0gcHJvcF9yZXF1ZXN0KHByb3BjdHgsIHBhc3N3b3Jk
X3JlcXVlc3QpOwogCWlmIChyZXN1bHQgPT0gU0FTTF9PSykgewotCSAgICByZXN1bHQgPSBwcm9w
X3NldChzX2Nvbm4tPnNwYXJhbXMtPnByb3BjdHgsIFNBU0xfQVVYX1BBU1NXT1JEX1BST1AsCisJ
ICAgIHJlc3VsdCA9IHByb3Bfc2V0KHByb3BjdHgsIFNBU0xfQVVYX1BBU1NXT1JEX1BST1AsCiAJ
CQkgICAgICBwYXNzLCBwYXNzbGVuKTsKIAl9CiAJaWYgKHJlc3VsdCA9PSBTQVNMX09LKSB7Ci0J
ICAgIHJlc3VsdCA9IHNhc2xfYXV4cHJvcF9zdG9yZShjb25uLCBzX2Nvbm4tPnNwYXJhbXMtPnBy
b3BjdHgsIHVzZXIpOworCSAgICByZXN1bHQgPSBzYXNsX2F1eHByb3Bfc3RvcmUoY29ubiwgcHJv
cGN0eCwgdXNlcik7CiAJfQogCWlmIChyZXN1bHQgIT0gU0FTTF9PSykgewogCSAgICBfc2FzbF9s
b2coY29ubiwgU0FTTF9MT0dfRVJSLApAQCAtMTg5LDYgKzE5NCw3IEBACiAJICAgIF9zYXNsX2xv
Zyhjb25uLCBTQVNMX0xPR19OT1RFLAogCQkgICAgICAic2V0cGFzcyBzdWNjZWVkZWQgZm9yICVz
IiwgdXNlcik7CiAJfQorCXByb3BfZGlzcG9zZSgmcHJvcGN0eCk7CiAgICAgfQogCiAgICAgLyog
V2Ugd2FudCB0byBwcmVzZXJ2ZSB0aGUgY3VycmVudCB2YWx1ZSBvZiByZXN1bHQsIHNvIHdlIHVz
ZSB0bXByZXN1bHQgYmVsb3cgKi8KCg==
</data>        

          </attachment>
      

    </bug>

</bugzilla>