<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>3201</bug_id>
          
          <creation_ts>2010-03-30 11:41 EDT</creation_ts>
          <short_desc>Make unexpunge human readable output the default + patches for -m, -c, -r features</short_desc>
          <delta_ts>2010-10-25 18:46:48 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus IMAP</product>
          <component>IMAP</component>
          <version>2.3.x</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3008</dup_id>
          
          
          
          <priority>P5</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Awood">bawood@umich.edu</reporter>
          <assigned_to name="Ken Murchison">murch@andrew.cmu.edu</assigned_to>
          <cc>brong@fastmail.fm</cc>
    
    <cc>wes@umich.edu</cc>
          

      

      

      
          <long_desc isprivate="0">
            <who name="Brian Awood">bawood@umich.edu</who>
            <bug_when>2010-03-30 11:41:19 EDT</bug_when>
            <thetext>Patch to make the default output of unexpunge human readable.  Also these are patches to add recursive behavior (-r), a message count (-c), and a more machine parsable option (-m).  These should apply cleanly against unexpunge in 2.3.16, unfortunately the code had to be refactored a bit in order to implement the -r and -c, so the human readable and -m patches probably are dependent on the first one.  I can possibly reorder them with git if need be in order to just make the human readable patch apply on it&apos;s own.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Brian Awood">bawood@umich.edu</who>
            <bug_when>2010-03-30 11:42:51 EDT</bug_when>
            <thetext>Created an attachment (id=1260)
recursive and message count patch, code refactor

</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Brian Awood">bawood@umich.edu</who>
            <bug_when>2010-03-30 11:43:39 EDT</bug_when>
            <thetext>Created an attachment (id=1261)
make human readable the default

</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Brian Awood">bawood@umich.edu</who>
            <bug_when>2010-03-30 11:44:02 EDT</bug_when>
            <thetext>Created an attachment (id=1262)
machine readable

</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Wes Craig">wes@umich.edu</who>
            <bug_when>2010-05-07 14:54:28 EDT</bug_when>
            <thetext>This is a dup of 3008, please post your patches there and mark this as a dup.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Brian Awood">bawood@umich.edu</who>
            <bug_when>2010-05-08 11:03:07 EDT</bug_when>
            <thetext>

*** This bug has been marked as a duplicate of bug 3008 ***</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1260</attachid>
            <date>2010-03-30 11:42 EDT</date>
            <desc>recursive and message count patch, code refactor</desc>
            <filename>0001-Add-recursive-r-and-count-expunged-c-to-unexpunge-co.patch</filename>
            <type>text/plain</type>
            <size>13033</size>
            <attacher>bawood@umich.edu</attacher>
            
              <data encoding="base64">RnJvbSBiZjA4MGIyOGUyYjQzODk1NThkM2JjNmYyNWY2MDVmNjkyNDc3M2Y5IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBCcmlhbiBBd29vZCA8YmF3b29kQHVtaWNoLmVkdT4KRGF0ZTog
VGh1LCAyNCBTZXAgMjAwOSAxNTo0MzowMyAtMDQwMApTdWJqZWN0OiBbUEFUQ0ggMS8zXSBBZGQg
cmVjdXJzaXZlICgtcikgYW5kIGNvdW50IGV4cHVuZ2VkICgtYykgdG8gdW5leHB1bmdlIGNvbW1h
bmQKClRoZSAtYyBmbGFnIHByaW50cyBhIGNvdW50IG9mIHRoZSBtZXNzYWdlcyBpbiB0aGUgZXhw
dW5nZWQgc3RhdGUKZm9yIGEgbWFpbGJveC4gIFRoZSBvdXRwdXQgaXMgaW4gdGhlIGZvcm0gIm1h
aWxib3g6IGNvdW50Ii4KVGhlIC1yIGZsYWcgY2F1c2VzIHVuZXhwdW5nZSB0byByZWN1cnNlIGZy
b20gdGhlIHNwZWNpZmllZAptYWlsYm94LCBpdCBjYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgbmV3
IC1jIGZsYWcsIG9yIHRoZSBleGlzdGluZwotbCBhbmQgLWEgYnV0IG5vdCAtdS4KCmRpZmYgLS1n
aXQgYS9pbWFwL3VuZXhwdW5nZS5jIGIvaW1hcC91bmV4cHVuZ2UuYwppbmRleCBhZmJjNmRmLi5l
OWRkMTllIDEwMDY0NAotLS0gYS9pbWFwL3VuZXhwdW5nZS5jCisrKyBiL2ltYXAvdW5leHB1bmdl
LmMKQEAgLTc5LDE3ICs3OSwyNCBAQAogLyogZ2xvYmFsIHN0YXRlICovCiBjb25zdCBpbnQgY29u
ZmlnX25lZWRfZGF0YSA9IDA7CiAKK2ludCAgdW5zZXRkZWxldGVkID0gMDsKK3RpbWVfdCB0aW1l
X3NpbmNlOworCiAvKiBjdXJyZW50IG5hbWVzcGFjZSAqLwogc3RhdGljIHN0cnVjdCBuYW1lc3Bh
Y2UgdW5leF9uYW1lc3BhY2U7CiAKK2ludCBkb191bmV4cHVuZ2UoY2hhciAqbmFtZSwgaW50IG1h
dGNobGVuLCBpbnQgbWF5Y3JlYXRlLCB2b2lkICpyb2NrKTsKK2ludCB1bmV4cHVuZ2UoY2hhciAq
bWJveG5hbWUsIHVuc2lnbmVkIGxvbmcgKnVpZHMsIHVuc2lnbmVkIG51aWRzKTsKKwogaW50IHZl
cmJvc2UgPSAwOwogCiB2b2lkIHVzYWdlKHZvaWQpCiB7CiAgICAgZnByaW50ZihzdGRlcnIsCi0J
ICAgICJ1bmV4cHVuZ2UgWy1DIDxhbHRjb25maWc+XSAtbCA8bWFpbGJveD5cbiIKKwkgICAgInVu
ZXhwdW5nZSBbLUMgPGFsdGNvbmZpZz5dIC1sIFstcl0gPG1haWxib3g+XG4iCisJICAgICJ1bmV4
cHVuZ2UgWy1DIDxhbHRjb25maWc+XSAtYyBbLXJdIDxtYWlsYm94PlxuIgogICAgICAgICAgICAg
InVuZXhwdW5nZSBbLUMgPGFsdGNvbmZpZz5dIC10IHRpbWUtaW50ZXJ2YWwgWyAtZCBdIFsgLXYg
XSBtYWlsYm94XG4iCi0JICAgICJ1bmV4cHVuZ2UgWy1DIDxhbHRjb25maWc+XSAtYSBbLWRdIFst
dl0gPG1haWxib3g+XG4iCisJICAgICJ1bmV4cHVuZ2UgWy1DIDxhbHRjb25maWc+XSAtYSBbLWRd
IFstdl0gWy1yXSA8bWFpbGJveD5cbiIKIAkgICAgInVuZXhwdW5nZSBbLUMgPGFsdGNvbmZpZz5d
IC11IFstZF0gWy12XSA8bWFpbGJveD4gPHVpZD4uLi5cbiIpOwogICAgIGV4aXQoLTEpOwogfQpA
QCAtOTksOCArMTA2LDkgQEAgZW51bSB7CiAgICAgTU9ERV9MSVNULAogICAgIE1PREVfQUxMLAog
ICAgIE1PREVfVElNRSwKLSAgICBNT0RFX1VJRAotfTsKKyAgICBNT0RFX1VJRCwKKyAgICBNT0RF
X0NPVU5UCit9IG1vZGUgPSBNT0RFX1VOS05PV047CiAKIHN0cnVjdCBtc2cgewogICAgIHVuc2ln
bmVkIHJlY25vOwpAQCAtMTYyLDcgKzE3MCw3IEBAIHZvaWQgbGlzdF9leHB1bmdlZChzdHJ1Y3Qg
bWFpbGJveCAqbWFpbGJveCwKIGludCByZXN0b3JlX2V4cHVuZ2VkKHN0cnVjdCBtYWlsYm94ICpt
YWlsYm94LAogCQkgICAgIHN0cnVjdCBtc2cgKm1zZ3MsIHVuc2lnbmVkIGxvbmcgZWV4aXN0cywK
IAkJICAgICBjb25zdCBjaGFyICpleHB1bmdlX2luZGV4X2Jhc2UsCi0JCSAgICAgdW5zaWduZWQg
Km51bXJlc3RvcmVkLCBpbnQgdW5zZXRkZWxldGVkKQorCQkgICAgIHVuc2lnbmVkICpudW1yZXN0
b3JlZCkKIHsKICAgICBpbnQgciA9IDA7CiAgICAgY29uc3QgY2hhciAqaXJlYzsKQEAgLTQxNSwx
MTQgKzQyMywzMyBAQCBpbnQgcmVzdG9yZV9leHB1bmdlZChzdHJ1Y3QgbWFpbGJveCAqbWFpbGJv
eCwKICAgICByZXR1cm4gcjsKIH0KIAotaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkK
Ky8qCisgKiBtYm94bGlzdF9maW5kYWxsKCkgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIHVuZXhwdW5n
ZSByZWN1cnNpdmUgZmVhdHVyZXMKKyAqLworaW50Citkb191bmV4cHVuZ2UoY2hhciAqbmFtZSwK
KwkgIGludCBtYXRjaGxlbiBfX2F0dHJpYnV0ZV9fKCh1bnVzZWQpKSwKKwkgIGludCBtYXljcmVh
dGUgX19hdHRyaWJ1dGVfXygodW51c2VkKSksCisJICB2b2lkICpyb2NrIF9fYXR0cmlidXRlX18o
KHVudXNlZCkpKQogewotICAgIGV4dGVybiBjaGFyICpvcHRhcmc7Ci0gICAgaW50IG9wdCwgciA9
IDA7Ci0gICAgY2hhciAqYWx0X2NvbmZpZyA9IE5VTEw7Ci0gICAgY2hhciBidWZbTUFYX01BSUxC
T1hfUEFUSCsxXTsKLSAgICBzdHJ1Y3QgbWFpbGJveCBtYWlsYm94OwotICAgIGludCBkb2Nsb3Nl
ID0gMCwgbW9kZSA9IE1PREVfVU5LTk9XTiwgdW5zZXRkZWxldGVkID0gMDsKLSAgICBjaGFyIGV4
cHVuZ2VfZm5hbWVbTUFYX01BSUxCT1hfUEFUSCsxXTsKKyAgICByZXR1cm4gdW5leHB1bmdlKG5h
bWUsIE5VTEwsIDApOworfQorCitpbnQKK3VuZXhwdW5nZShjaGFyICptYm94bmFtZSwgdW5zaWdu
ZWQgbG9uZyAqdWlkcywgdW5zaWduZWQgbnVpZHMpCit7CisgICAgaW50IGRvY2xvc2UgPSAwLCBy
OwogICAgIGludCBleHB1bmdlX2ZkID0gLTE7Ci0gICAgc3RydWN0IHN0YXQgc2J1ZjsKKyAgICBj
aGFyIGV4cHVuZ2VfZm5hbWVbTUFYX01BSUxCT1hfUEFUSCsxXTsKICAgICBjb25zdCBjaGFyICps
b2NrZmFpbGFjdGlvbjsKLSAgICBzdHJ1Y3QgbXNnICptc2dzOwogICAgIHVuc2lnbmVkIG51bXJl
c3RvcmVkID0gMDsKLSAgICB0aW1lX3QgbGFzdF91cGRhdGUsIHRpbWVfc2luY2UgPSB0aW1lKE5V
TEwpOwotICAgIGludCBsZW4sIHNlY3MgPSAwOwotCi0gICAgaWYgKChnZXRldWlkKCkpID09IDAg
JiYgKGJlY29tZV9jeXJ1cygpICE9IDApKSB7Ci0JZmF0YWwoIm11c3QgcnVuIGFzIHRoZSBDeXJ1
cyB1c2VyIiwgRUNfVVNBR0UpOwotICAgIH0KLQotICAgIHdoaWxlICgob3B0ID0gZ2V0b3B0KGFy
Z2MsIGFyZ3YsICJDOmxhdWR0OnYiKSkgIT0gRU9GKSB7Ci0Jc3dpdGNoIChvcHQpIHsKLQljYXNl
ICdDJzogLyogYWx0IGNvbmZpZyBmaWxlICovCi0JICAgIGFsdF9jb25maWcgPSBvcHRhcmc7Ci0J
ICAgIGJyZWFrOwotCi0JY2FzZSAnbCc6Ci0JICAgIGlmIChtb2RlICE9IE1PREVfVU5LTk9XTikg
dXNhZ2UoKTsKLQkgICAgbW9kZSA9IE1PREVfTElTVDsKLQkgICAgYnJlYWs7Ci0JCi0JY2FzZSAn
YSc6Ci0JICAgIGlmIChtb2RlICE9IE1PREVfVU5LTk9XTikgdXNhZ2UoKTsKLQkgICAgbW9kZSA9
IE1PREVfQUxMOwotCSAgICBicmVhazsKLQkKLQljYXNlICd0JzoKLQkgICAgaWYgKG1vZGUgIT0g
TU9ERV9VTktOT1dOKSB1c2FnZSgpOwotCi0JICAgIG1vZGUgPSBNT0RFX1RJTUU7Ci0gICAgICAg
ICAgICBzZWNzID0gYXRvaShvcHRhcmcpOwotICAgICAgICAgICAgbGVuICA9IHN0cmxlbihvcHRh
cmcpOwotICAgICAgICAgICAgCi0gICAgICAgICAgICBpZiAoKHNlY3MgPiAwKSAmJiAobGVuID4g
MSkpIHsKLSAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wdGFyZ1tsZW4tMV0pIHsKLSAgICAgICAg
ICAgICAgICBjYXNlICdtJzoKLSAgICAgICAgICAgICAgICAgICAgc2VjcyAqPSA2MDsKLSAgICAg
ICAgICAgICAgICAgICAgYnJlYWs7Ci0gICAgICAgICAgICAgICAgY2FzZSAnaCc6Ci0gICAgICAg
ICAgICAgICAgICAgIHNlY3MgKj0gKDYwKjYwKTsKLSAgICAgICAgICAgICAgICAgICAgYnJlYWs7
Ci0gICAgICAgICAgICAgICAgY2FzZSAnZCc6Ci0gICAgICAgICAgICAgICAgICAgIHNlY3MgKj0g
KDI0KjYwKjYwKTsKLSAgICAgICAgICAgICAgICAgICAgYnJlYWs7Ci0gICAgICAgICAgICAgICAg
Y2FzZSAndyc6Ci0gICAgICAgICAgICAgICAgICAgIHNlY3MgKj0gKDcqMjQqNjAqNjApOwotICAg
ICAgICAgICAgICAgICAgICBicmVhazsKLSAgICAgICAgICAgICAgICB9Ci0gICAgICAgICAgICB9
Ci0gICAgICAgICAgICB0aW1lX3NpbmNlID0gdGltZShOVUxMKSAtIHNlY3M7Ci0JICAgIGJyZWFr
OwotCi0JY2FzZSAndSc6Ci0JICAgIGlmIChtb2RlICE9IE1PREVfVU5LTk9XTikgdXNhZ2UoKTsK
LQkgICAgbW9kZSA9IE1PREVfVUlEOwotCSAgICBicmVhazsKLQotCWNhc2UgJ2QnOgotCSAgICB1
bnNldGRlbGV0ZWQgPSAxOwotCSAgICBicmVhazsKLQkKLQljYXNlICd2JzoKLQkgICAgdmVyYm9z
ZSA9IDE7Ci0JICAgIGJyZWFrOwotCQotCWRlZmF1bHQ6Ci0JICAgIHVzYWdlKCk7Ci0JICAgIGJy
ZWFrOwotCX0KLSAgICB9Ci0KLSAgICAvKiBzYW5pdHkgY2hlY2sgKi8KLSAgICBpZiAobW9kZSA9
PSBNT0RFX1VOS05PV04gfHwKLQkob3B0aW5kICsgKG1vZGUgPT0gTU9ERV9VSUQgPyAxIDogMCkp
ID49IGFyZ2MpIHVzYWdlKCk7Ci0KLSAgICBjeXJ1c19pbml0KGFsdF9jb25maWcsICJ1bmV4cHVu
Z2UiLCAwKTsKLQotICAgIG1ib3hsaXN0X2luaXQoMCk7Ci0gICAgbWJveGxpc3Rfb3BlbihOVUxM
KTsKLQotICAgIHF1b3RhZGJfaW5pdCgwKTsKLSAgICBxdW90YWRiX29wZW4oTlVMTCk7Ci0KLSAg
ICBzeW5jX2xvZ19pbml0KCk7Ci0KLSAgICAvKiBTZXQgbmFtZXNwYWNlIC0tIGZvcmNlIHN0YW5k
YXJkIChpbnRlcm5hbCkgKi8KLSAgICBpZiAoKHIgPSBtYm94bmFtZV9pbml0X25hbWVzcGFjZSgm
dW5leF9uYW1lc3BhY2UsIDEpKSAhPSAwKSB7Ci0Jc3lzbG9nKExPR19FUlIsIGVycm9yX21lc3Nh
Z2UocikpOwotCWZhdGFsKGVycm9yX21lc3NhZ2UociksIEVDX0NPTkZJRyk7Ci0gICAgfQotCi0g
ICAgLyogVHJhbnNsYXRlIG1haWxib3huYW1lICovCi0gICAgKCp1bmV4X25hbWVzcGFjZS5tYm94
bmFtZV90b2ludGVybmFsKSgmdW5leF9uYW1lc3BhY2UsIGFyZ3Zbb3B0aW5kXSwKLQkJCQkJICBO
VUxMLCBidWYpOworICAgIHN0cnVjdCBtYWlsYm94IG1haWxib3g7CisgICAgc3RydWN0IG1zZyAq
bXNnczsKKyAgICBzdHJ1Y3Qgc3RhdCBzYnVmOworICAgIHRpbWVfdCBsYXN0X3VwZGF0ZTsKIAog
ICAgIC8qIE9wZW4vbG9jayBoZWFkZXIgKi8KLSAgICByID0gbWFpbGJveF9vcGVuX2hlYWRlcihi
dWYsIDAsICZtYWlsYm94KTsKKyAgICByID0gbWFpbGJveF9vcGVuX2hlYWRlcihtYm94bmFtZSwg
MCwgJm1haWxib3gpOwogICAgIGlmICghciAmJiBtYWlsYm94LmhlYWRlcl9mZCAhPSAtMSkgewog
CWRvY2xvc2UgPSAxOwogCSh2b2lkKSBtYWlsYm94X2xvY2tfaGVhZGVyKCZtYWlsYm94KTsKQEAg
LTUzNyw2ICs0NjQsMTMgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKICAgICB9
CiAgICAgaWYgKCFyKSByID0gbWFpbGJveF9sb2NrX3BvcCgmbWFpbGJveCk7CiAKKyAgICBpZiAo
cikgeworCS8qIG1haWxib3ggY29ycnVwdC9ub25leGlzdGVudCAtLSBza2lwIGl0ICovCisJc3lz
bG9nKExPR19XQVJOSU5HLCAidW5hYmxlIHRvIG9wZW4vbG9jayBtYWlsYm94ICVzIiwgbWJveG5h
bWUpOworCWlmIChkb2Nsb3NlKSBtYWlsYm94X2Nsb3NlKCZtYWlsYm94KTsKKwlyZXR1cm4gMDsK
KyAgICB9CisKICAgICAvKiBPcGVuIGV4cHVuZ2UgaW5kZXggKi8KICAgICBpZiAoIXIpIHsKIAlj
aGFyICpwYXRoID0KQEAgLTU1MCw5ICs0ODQsMTYgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIg
KmFyZ3ZbXSkKIAlleHB1bmdlX2ZkID0gb3BlbihleHB1bmdlX2ZuYW1lLCBPX1JEV1IsIDA2NjYp
OwogICAgIH0KIAotICAgIGlmIChyIHx8IGV4cHVuZ2VfZmQgPT0gLTEpIHsKKyAgICBpZiAoZXhw
dW5nZV9mZCA9PSAtMSkgeworCWlmIChtb2RlID09IE1PREVfQ09VTlQpIHsKKwkgICAgLyogVHJh
bnNsYXRlIG1haWxib3huYW1lICovCisJICAgIGNoYXIgYnVmW01BWF9NQUlMQk9YX1BBVEgrMV07
CisJICAgICgqdW5leF9uYW1lc3BhY2UubWJveG5hbWVfdG9leHRlcm5hbCkoJnVuZXhfbmFtZXNw
YWNlLAorCQkJICAgICBtYWlsYm94Lm5hbWUsIE5VTEwsIGJ1Zik7CisJICAgIHByaW50ZigiJXM6
IDBcbiIsIGJ1Zik7CisJfQogCS8qIG1haWxib3ggY29ycnVwdC9ub25leGlzdGVudCAtLSBza2lw
IGl0ICovCi0Jc3lzbG9nKExPR19XQVJOSU5HLCAidW5hYmxlIHRvIG9wZW4vbG9jayBtYWlsYm94
ICVzIiwgYXJndltvcHRpbmRdKTsKKwlzeXNsb2coTE9HX1dBUk5JTkcsICJ1bmFibGUgdG8gb3Bl
biAlczogJW0iLCBleHB1bmdlX2ZuYW1lKTsKIAlpZiAoZG9jbG9zZSkgbWFpbGJveF9jbG9zZSgm
bWFpbGJveCk7CiAJcmV0dXJuIDA7CiAgICAgfQpAQCAtNTY3LDMxICs1MDgsMzMgQEAgaW50IG1h
aW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKIAl1bnNpZ25lZCBsb25nIGV4aXN0cywgdWlkOwog
CWNvbnN0IGNoYXIgKnJlYzsKIAl1bnNpZ25lZCBtc2dubzsKLQl1bnNpZ25lZCBsb25nICp1aWRz
ID0gTlVMTDsKLQl1bnNpZ25lZCBudWlkcyA9IDA7CiAKIAltYXBfcmVmcmVzaChleHB1bmdlX2Zk
LCAxLCAmZXhwdW5nZV9pbmRleF9iYXNlLAogCQkgICAgJmV4cHVuZ2VfaW5kZXhfbGVuLCBzYnVm
LnN0X3NpemUsICJleHB1bmdlIiwKIAkJICAgIG1haWxib3gubmFtZSk7CiAKKwlpZiAoc2J1Zi5z
dF9zaXplIDwgSU5ERVhfSEVBREVSX1NJWkUpIHsKKwkgICAgc3lzbG9nKExPR19FUlIsICJFUlJP
UjogJXMgY3lydXMuZXhwdW5nZSBpbnZhbGlkIiwKKwkJICAgIG1haWxib3gubmFtZSk7CisJICAg
IGdvdG8gZG9uZTsKKwl9CisKIAlleGlzdHMgPSBudG9obCgqKChiaXQzMiAqKShleHB1bmdlX2lu
ZGV4X2Jhc2UrT0ZGU0VUX0VYSVNUUykpKTsKKwlpZiAoc2J1Zi5zdF9zaXplIDwgKCBJTkRFWF9I
RUFERVJfU0laRSArIChleGlzdHMgKiBJTkRFWF9SRUNPUkRfU0laRSkpKSB7CisJICAgIHN5c2xv
ZyhMT0dfRVJSLAorCQkgICAgIkVSUk9SOiAlcyBjeXJ1cy5leHB1bmdlIHRvbyBzaG9ydCBmb3Ig
JWx1IG1lc3NhZ2VzIiwKKwkJICAgIG1haWxib3gubmFtZSwgZXhpc3RzKTsKKwkgICAgZ290byBk
b25lOworCX0KIAorICAgIGlmIChtb2RlID09IE1PREVfQ09VTlQpIHsKKwkvKiBUcmFuc2xhdGUg
bWFpbGJveG5hbWUgKi8KKwljaGFyIGJ1ZltNQVhfTUFJTEJPWF9QQVRIKzFdOworCSgqdW5leF9u
YW1lc3BhY2UubWJveG5hbWVfdG9leHRlcm5hbCkoJnVuZXhfbmFtZXNwYWNlLCBtYWlsYm94Lm5h
bWUsIE5VTEwsIGJ1Zik7CisJcHJpbnRmKCIlczogJWx1XG4iLCBidWYsIGV4aXN0cyk7CisgICAg
fSBlbHNlIHsKIAltc2dzID0gKHN0cnVjdCBtc2cgKikgeG1hbGxvYyhleGlzdHMgKiBzaXplb2Yo
c3RydWN0IG1zZykpOwogCi0JLyogR2V0IFVJRHMgb2YgbWVzc2FnZXMgdG8gcmVzdG9yZSAqLwot
CWlmIChtb2RlID09IE1PREVfVUlEKSB7Ci0JICAgIHVuc2lnbmVkIGk7Ci0KLQkgICAgbnVpZHMg
PSBhcmdjIC0gKytvcHRpbmQ7Ci0JICAgIHVpZHMgPSAodW5zaWduZWQgbG9uZyAqKSB4bWFsbG9j
KG51aWRzICogc2l6ZW9mKHVuc2lnbmVkIGxvbmcpKTsKLQotCSAgICBmb3IgKGkgPSAwOyBpIDwg
bnVpZHM7IGkrKykKLQkJdWlkc1tpXSA9IHN0cnRvdWwoYXJndltvcHRpbmQraV0sIE5VTEwsIDEw
KTsKLQotCSAgICAvKiBTb3J0IHRoZSBVSURzIHNvIHdlIGNhbiBiaW5hcnkgc2VhcmNoICovCi0J
ICAgIHFzb3J0KHVpZHMsIG51aWRzLCBzaXplb2YodW5zaWduZWQgbG9uZyksIGNvbXBhcmVfdWlk
KTsKLQl9Ci0KIAkvKiBHZXQgVUlEcyBvZiBleHB1bmdlZCBtZXNzYWdlcyAqLwogCWZvciAobXNn
bm8gPSAwOyBtc2dubyA8IGV4aXN0czsgbXNnbm8rKykgewogCSAgICAvKiBKdW1wIHRvIGluZGV4
IHJlY29yZCBmb3IgdGhpcyBtZXNzYWdlICovCkBAIC02MTUsOSArNTU4LDExIEBAIGludCBtYWlu
KGludCBhcmdjLCBjaGFyICphcmd2W10pCiAJCQkJCSAgICAgIHNpemVvZih1bnNpZ25lZCBsb25n
KSwKIAkJCQkJICAgICAgY29tcGFyZV91aWQpICE9IE5VTEw7CiAJCWJyZWFrOworCSAgICBkZWZh
dWx0OgorCQkvKiBtYWlubHkgcHJldmVudCBjb21waWxlciB3YXJuaW5nICovCisJCWZwcmludGYo
c3RkZXJyLCAiVW5rbm93biBtb2RlIVxuIik7CiAJICAgIH0KIAl9Ci0JaWYgKHVpZHMpIGZyZWUo
dWlkcyk7CiAKIAkvKiBTb3J0IG1zZ3MgYnkgVUlEICovCiAJcXNvcnQobXNncywgZXhpc3RzLCBz
aXplb2Yoc3RydWN0IG1zZyksIGNvbXBhcmVfbXNnKTsKQEAgLTYyOSw3ICs1NzQsNyBAQCBpbnQg
bWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQogCQkgICAgbW9kZSA9PSBNT0RFX0FMTCA/ICJh
bGwgIiA6ICIiLCBtYWlsYm94Lm5hbWUpOwogCiAJICAgIHIgPSByZXN0b3JlX2V4cHVuZ2VkKCZt
YWlsYm94LCBtc2dzLCBleGlzdHMsIGV4cHVuZ2VfaW5kZXhfYmFzZSwKLQkJCQkgJm51bXJlc3Rv
cmVkLCB1bnNldGRlbGV0ZWQpOworCQkJCSAmbnVtcmVzdG9yZWQpOwogCSAgICBpZiAoIXIpIHsK
IAkJcHJpbnRmKCJyZXN0b3JlZCAldSBvdXQgb2YgJWx1IGV4cHVuZ2VkIG1lc3NhZ2VzXG4iLAog
CQkJbnVtcmVzdG9yZWQsIGV4aXN0cyk7CkBAIC02MzgsMTYgKzU4MywxNyBAQCBpbnQgbWFpbihp
bnQgYXJnYywgY2hhciAqYXJndltdKQogCQkgICAgICAgbnVtcmVzdG9yZWQsIGV4aXN0cywgbWFp
bGJveC5uYW1lKTsKIAkgICAgfQogCX0KLQotCW1hcF9mcmVlKCZleHB1bmdlX2luZGV4X2Jhc2Us
ICZleHB1bmdlX2luZGV4X2xlbik7CiAJZnJlZShtc2dzKTsKKyAgICB9Citkb25lOgorCW1hcF9m
cmVlKCZleHB1bmdlX2luZGV4X2Jhc2UsICZleHB1bmdlX2luZGV4X2xlbik7CiAKIAlpZiAobG9j
a191bmxvY2soZXhwdW5nZV9mZCkpCiAJICAgIHN5c2xvZyhMT0dfRVJSLAogCQkgICAiSU9FUlJP
UjogdW5sb2NraW5nIGV4cHVuZ2UgaW5kZXggb2YgJXM6ICVtIiwgCiAJCSAgIG1haWxib3gubmFt
ZSk7CiAgICAgfQotICAgIGNsb3NlKGV4cHVuZ2VfZmQpOworICAgIGlmIChleHB1bmdlX2ZkID49
IDApIGNsb3NlKGV4cHVuZ2VfZmQpOwogCiAgICAgbWFpbGJveF91bmxvY2tfcG9wKCZtYWlsYm94
KTsKICAgICBtYWlsYm94X3VubG9ja19pbmRleCgmbWFpbGJveCk7CkBAIC02NjEsNiArNjA3LDE0
NCBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQogICAgIHF1b3RhZGJfY2xvc2Uo
KTsKICAgICBxdW90YWRiX2RvbmUoKTsKIAorICAgIHJldHVybiByOworfQorCitpbnQgbWFpbihp
bnQgYXJnYywgY2hhciAqYXJndltdKQoreworICAgIGV4dGVybiBjaGFyICpvcHRhcmc7CisgICAg
aW50IG9wdCwgciA9IDAsIHJlY3Vyc2l2ZSA9IDA7CisgICAgY2hhciAqYWx0X2NvbmZpZyA9IE5V
TEw7CisgICAgY2hhciBidWZbTUFYX01BSUxCT1hfUEFUSCsxXTsKKyAgICBpbnQgbGVuLCBzZWNz
ID0gMDsKKyAgICB1bnNpZ25lZCBsb25nICp1aWRzID0gTlVMTDsKKyAgICB1bnNpZ25lZCBudWlk
cyA9IDA7CisKKyAgICBpZiAoKGdldGV1aWQoKSkgPT0gMCAmJiAoYmVjb21lX2N5cnVzKCkgIT0g
MCkpIHsKKwlmYXRhbCgibXVzdCBydW4gYXMgdGhlIEN5cnVzIHVzZXIiLCBFQ19VU0FHRSk7Cisg
ICAgfQorCisgICAgd2hpbGUgKChvcHQgPSBnZXRvcHQoYXJnYywgYXJndiwgIkM6bGF1ZHQ6dmNy
IikpICE9IEVPRikgeworCXN3aXRjaCAob3B0KSB7CisJY2FzZSAnQyc6IC8qIGFsdCBjb25maWcg
ZmlsZSAqLworCSAgICBhbHRfY29uZmlnID0gb3B0YXJnOworCSAgICBicmVhazsKKworCWNhc2Ug
J2wnOgorCSAgICBpZiAobW9kZSAhPSBNT0RFX1VOS05PV04pIHVzYWdlKCk7CisJICAgIG1vZGUg
PSBNT0RFX0xJU1Q7CisJICAgIGJyZWFrOworCQorCWNhc2UgJ2EnOgorCSAgICBpZiAobW9kZSAh
PSBNT0RFX1VOS05PV04pIHVzYWdlKCk7CisJICAgIG1vZGUgPSBNT0RFX0FMTDsKKwkgICAgYnJl
YWs7CisJCisJY2FzZSAndCc6CisJICAgIGlmIChtb2RlICE9IE1PREVfVU5LTk9XTikgdXNhZ2Uo
KTsKKworCSAgICBtb2RlID0gTU9ERV9USU1FOworICAgICAgICAgICAgc2VjcyA9IGF0b2kob3B0
YXJnKTsKKyAgICAgICAgICAgIGxlbiAgPSBzdHJsZW4ob3B0YXJnKTsKKyAgICAgICAgICAgIAor
ICAgICAgICAgICAgaWYgKChzZWNzID4gMCkgJiYgKGxlbiA+IDEpKSB7CisgICAgICAgICAgICAg
ICAgc3dpdGNoIChvcHRhcmdbbGVuLTFdKSB7CisgICAgICAgICAgICAgICAgY2FzZSAnbSc6Cisg
ICAgICAgICAgICAgICAgICAgIHNlY3MgKj0gNjA7CisgICAgICAgICAgICAgICAgICAgIGJyZWFr
OworICAgICAgICAgICAgICAgIGNhc2UgJ2gnOgorICAgICAgICAgICAgICAgICAgICBzZWNzICo9
ICg2MCo2MCk7CisgICAgICAgICAgICAgICAgICAgIGJyZWFrOworICAgICAgICAgICAgICAgIGNh
c2UgJ2QnOgorICAgICAgICAgICAgICAgICAgICBzZWNzICo9ICgyNCo2MCo2MCk7CisgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOworICAgICAgICAgICAgICAgIGNhc2UgJ3cnOgorICAgICAgICAg
ICAgICAgICAgICBzZWNzICo9ICg3KjI0KjYwKjYwKTsKKyAgICAgICAgICAgICAgICAgICAgYnJl
YWs7CisgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgfQorICAgICAgICAgICAgdGltZV9z
aW5jZSA9IHRpbWUoTlVMTCkgLSBzZWNzOworCSAgICBicmVhazsKKworCWNhc2UgJ3UnOgorCSAg
ICBpZiAobW9kZSAhPSBNT0RFX1VOS05PV04pIHVzYWdlKCk7CisJICAgIG1vZGUgPSBNT0RFX1VJ
RDsKKwkgICAgYnJlYWs7CisKKwljYXNlICdkJzoKKwkgICAgdW5zZXRkZWxldGVkID0gMTsKKwkg
ICAgYnJlYWs7CisJCisJY2FzZSAndic6CisJICAgIHZlcmJvc2UgPSAxOworCSAgICBicmVhazsK
KworCWNhc2UgJ2MnOgorCSAgICBpZiAobW9kZSAhPSBNT0RFX1VOS05PV04pIHVzYWdlKCk7CisJ
ICAgIG1vZGUgPSBNT0RFX0NPVU5UOworCSAgICBicmVhazsKKworCWNhc2UgJ3InOgorCSAgICBp
ZiAobW9kZSA9PSBNT0RFX1VJRCkgdXNhZ2UoKTsKKwkgICAgcmVjdXJzaXZlID0gMTsKKwkgICAg
YnJlYWs7CisJCisJZGVmYXVsdDoKKwkgICAgdXNhZ2UoKTsKKwkgICAgYnJlYWs7CisJfQorICAg
IH0KKworICAgIC8qIHNhbml0eSBjaGVjayAqLworICAgIGlmIChtb2RlID09IE1PREVfVU5LTk9X
TiB8fAorCShvcHRpbmQgKyAobW9kZSA9PSBNT0RFX1VJRCA/IDEgOiAwKSkgPj0gYXJnYykgdXNh
Z2UoKTsKKworICAgIGN5cnVzX2luaXQoYWx0X2NvbmZpZywgInVuZXhwdW5nZSIsIDApOworCisg
ICAgbWJveGxpc3RfaW5pdCgwKTsKKyAgICBtYm94bGlzdF9vcGVuKE5VTEwpOworCisgICAgcXVv
dGFkYl9pbml0KDApOworICAgIHF1b3RhZGJfb3BlbihOVUxMKTsKKworICAgIHN5bmNfbG9nX2lu
aXQoKTsKKworICAgIC8qIFNldCBuYW1lc3BhY2UgLS0gZm9yY2Ugc3RhbmRhcmQgKGludGVybmFs
KSAqLworICAgIGlmICgociA9IG1ib3huYW1lX2luaXRfbmFtZXNwYWNlKCZ1bmV4X25hbWVzcGFj
ZSwgMSkpICE9IDApIHsKKwlzeXNsb2coTE9HX0VSUiwgZXJyb3JfbWVzc2FnZShyKSk7CisJZmF0
YWwoZXJyb3JfbWVzc2FnZShyKSwgRUNfQ09ORklHKTsKKyAgICB9CisKKyAgICAvKiBUcmFuc2xh
dGUgbWFpbGJveG5hbWUgKi8KKyAgICAoKnVuZXhfbmFtZXNwYWNlLm1ib3huYW1lX3RvaW50ZXJu
YWwpKCZ1bmV4X25hbWVzcGFjZSwgYXJndltvcHRpbmRdLAorCQkJCQkgIE5VTEwsIGJ1Zik7CisK
KyAgICAvKiBHZXQgVUlEcyBvZiBtZXNzYWdlcyB0byByZXN0b3JlICovCisgICAgaWYgKG1vZGUg
PT0gTU9ERV9VSUQpIHsKKyAgICAgICAgdW5zaWduZWQgaTsKKworCW51aWRzID0gYXJnYyAtICsr
b3B0aW5kOworCXVpZHMgPSAodW5zaWduZWQgbG9uZyAqKSB4bWFsbG9jKG51aWRzICogc2l6ZW9m
KHVuc2lnbmVkIGxvbmcpKTsKKworCWZvciAoaSA9IDA7IGkgPCBudWlkczsgaSsrKSB7CisJICAg
IHVpZHNbaV0gPSBzdHJ0b3VsKGFyZ3Zbb3B0aW5kK2ldLCBOVUxMLCAxMCk7CisJfQorCisJLyog
U29ydCB0aGUgVUlEcyBzbyB3ZSBjYW4gYmluYXJ5IHNlYXJjaCAqLworCXFzb3J0KHVpZHMsIG51
aWRzLCBzaXplb2YodW5zaWduZWQgbG9uZyksIGNvbXBhcmVfdWlkKTsKKyAgICB9CisKKyAgICBp
ZiAoICFyZWN1cnNpdmUgKSB7CisJciA9IHVuZXhwdW5nZSggYnVmLCB1aWRzLCBudWlkcyApOwor
ICAgIH0gZWxzZSB7CisJc3RybGNhdChidWYsICIqIiwgc2l6ZW9mKGJ1ZikpOworCXIgPSAoKnVu
ZXhfbmFtZXNwYWNlLm1ib3hsaXN0X2ZpbmRhbGwpKCZ1bmV4X25hbWVzcGFjZSwgYnVmLCAxLCAw
LCAwLAorCQkJCQkgICBkb191bmV4cHVuZ2UsIE5VTEwpOworLyogWFhYIGNhbGwgdW5leHB1bmdl
IGFwcHJvcHJpYXRlbHkgWFhYICovCisgICAgfQorCisgICAgaWYgKHVpZHMpIGZyZWUodWlkcyk7
CisKICAgICBtYm94bGlzdF9jbG9zZSgpOwogICAgIG1ib3hsaXN0X2RvbmUoKTsKIApkaWZmIC0t
Z2l0IGEvbWFuL3VuZXhwdW5nZS44IGIvbWFuL3VuZXhwdW5nZS44CmluZGV4IGU5YjYwNDMuLjMx
NTJhZjAgMTAwNjQ0Ci0tLSBhL21hbi91bmV4cHVuZ2UuOAorKysgYi9tYW4vdW5leHB1bmdlLjgK
QEAgLTEwOCw2ICsxMDgsMTQgQEAgZmlsZSB1bmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZSBieSBc
ZkItQ1xmUi4KIC5CSSBcLUMgIiBjb25maWctZmlsZSIKIFJlYWQgY29uZmlndXJhdGlvbiBvcHRp
b25zIGZyb20gXGZJY29uZmlnLWZpbGVcZlIuCiAuVFAKKy5CIFwtcgorUmVjdXJzaXZlbHkgcHJv
Y2VzcyBtYWlsYm94ZXMuIE11dHVhbGx5IGV4Y2x1c2l2ZSB0byAtdS4KKy5UUAorLkIgXC1jCitQ
cmludCBhIGNvdW50IG9mIHRoZSBtZXNzYWdlcyB0aGF0IGFyZSBhdmFpbGFibGUgdG8gYmUgdW5l
eHB1bmdlZCBmb3IKK2EgbWFpbGJveC4gIE5vdGhpbmcgaXMgcHJpbnRlZCBmb3IgYSBtYWlsYm94
IHRoYXQgaGFzIG5vIGN5cnVzLmV4cHVuZ2UKK2ZpbGUuCisuVFAKIC5CIFwtbAogTGlzdCB0aGUg
ZXhwdW5nZWQgbWVzc2FnZXMgaW4gdGhlIHNwZWNpZmllZCBtYWlsYm94IHdoaWNoIGFyZSBhdmFp
bGFibGUKIGZvciByZXN0b3JhdGlvbi4KLS0gCjEuNy4wLjMKCg==
</data>        

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1261</attachid>
            <date>2010-03-30 11:43 EDT</date>
            <desc>make human readable the default</desc>
            <filename>0002-Make-the-default-output-on-unexpunge-l-human-readabl.patch</filename>
            <type>text/plain</type>
            <size>6976</size>
            <attacher>bawood@umich.edu</attacher>
            
              <data encoding="base64">RnJvbSAwOWNhYzU5NTFlMmUyYTBiZDhmOGViZTNiMTI0MjdlMjhmZDNiZjk3IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBCcmlhbiBBd29vZCA8YmF3b29kQHVtaWNoLmVkdT4KRGF0ZTog
V2VkLCAyMSBPY3QgMjAwOSAxNjozNzowMSAtMDQwMApTdWJqZWN0OiBbUEFUQ0ggMi8zXSBNYWtl
IHRoZSBkZWZhdWx0IG91dHB1dCBvbiB1bmV4cHVuZ2UgLWwgaHVtYW4gcmVhZGFibGUKClVuZXhw
dW5nZSAtbCBwcmV2aW91c2x5IHByaW50ZWQgb3V0IHRoZSBjYWNoZSBkYXRhCmluIHRoZSBmb3Jt
YXQgd2hlcmUgaXQgaXMgc3RyaXBlZCBvZiBjYXBzIGFuZCB3aGl0ZQpzcGFjZS4gIFRoaXMgaXMg
YSBtb2RpZmljYXRpb24gdG8gdGhlIG9yaWdpbmFsIHBhdGNoCmZyb20gV2VzIENyYWlnIGZvciBo
dW1hbiByZWFkYWJsZSBvdXRwdXQgc28gaXQKYXBwbGllcyB0byAyLjMuMTUgYW5kIGlzIHRoZSBk
ZWZhdWx0IG91dHB1dC4KCmRpZmYgLS1naXQgYS9pbWFwL01ha2VmaWxlLmluIGIvaW1hcC9NYWtl
ZmlsZS5pbgppbmRleCAwMTIzNzE5Li5hYzNiMTFmIDEwMDY0NAotLS0gYS9pbWFwL01ha2VmaWxl
LmluCisrKyBiL2ltYXAvTWFrZWZpbGUuaW4KQEAgLTMzOCw4ICszMzgsOCBAQCB0bHNfcHJ1bmU6
IHRsc19wcnVuZS5vIHRscy5vICQoQ0xJT0JKUykgbGliaW1hcC5hICQoREVQTElCUykKIAkkKEND
KSAkKExERkxBR1MpIC1vIFwKIAkgJEAgdGxzX3BydW5lLm8gdGxzLm8gJChDTElPQkpTKSBsaWJp
bWFwLmEgJChERVBMSUJTKSAkKExJQlMpCiAKLXVuZXhwdW5nZTogdW5leHB1bmdlLm8gJChDTElP
QkpTKSBsaWJpbWFwLmEgJChERVBMSUJTKQotCSQoQ0MpICQoTERGTEFHUykgLW8gJEAgdW5leHB1
bmdlLm8gJChDTElPQkpTKSBcCit1bmV4cHVuZ2U6IHVuZXhwdW5nZS5vIGluZGV4Lm8gJChDTElP
QkpTKSBsaWJpbWFwLmEgJChERVBMSUJTKQorCSQoQ0MpICQoTERGTEFHUykgLW8gJEAgdW5leHB1
bmdlLm8gaW5kZXgubyAkKENMSU9CSlMpIFwKIAlsaWJpbWFwLmEgJChERVBMSUJTKSAkKExJQlMp
CiAKIG1ha2VfbWQ1OiBtYWtlX21kNS5vIGxpYmltYXAuYSBtdXRleF9mYWtlLm8gJChERVBMSUJT
KQpkaWZmIC0tZ2l0IGEvaW1hcC9pbmRleC5jIGIvaW1hcC9pbmRleC5jCmluZGV4IDI4NGVhZjcu
LmRlYzg0MjUgMTAwNjQ0Ci0tLSBhL2ltYXAvaW5kZXguYworKysgYi9pbWFwL2luZGV4LmMKQEAg
LTE2Nyw3ICsxNjcsNiBAQCBzdGF0aWMgaW50IF9pbmRleF9zZWFyY2godW5zaWduZWQgKiptc2du
b19saXN0LCBzdHJ1Y3QgbWFpbGJveCAqbWFpbGJveCwKIAkJCSBzdHJ1Y3Qgc2VhcmNoYXJncyAq
c2VhcmNoYXJncywKIAkJCSBtb2RzZXFfdCAqaGlnaGVzdG1vZHNlcSk7CiAKLXN0YXRpYyB2b2lk
IHBhcnNlX2NhY2hlZF9lbnZlbG9wZShjaGFyICplbnYsIGNoYXIgKnRva2Vuc1tdLCBpbnQgdG9r
ZW5zX3NpemUpOwogc3RhdGljIGNoYXIgKmZpbmRfbXNnaWQoY2hhciAqc3RyLCBjaGFyICoqcmVt
KTsKIHN0YXRpYyBjaGFyICpnZXRfbG9jYWxwYXJ0X2FkZHIoY29uc3QgY2hhciAqaGVhZGVyKTsK
IHN0YXRpYyBjaGFyICppbmRleF9leHRyYWN0X3N1YmplY3QoY29uc3QgY2hhciAqc3Viaiwgc2l6
ZV90IGxlbiwgaW50ICppc19yZWZ3ZCk7CkBAIC0zNzM3LDcgKzM3MzYsNyBAQCBzdGF0aWMgTXNn
RGF0YSAqaW5kZXhfbXNnZGF0YV9sb2FkKHVuc2lnbmVkICptc2dub19saXN0LCBpbnQgbiwKICAq
IFdoZW4gaW5zaWRlIGEgbGlzdCAobmNvbSA+IDApLCB3ZSBwYXJzZSB0aGUgaW5kaXZpZHVhbCB0
b2tlbnMgYnV0IGRvbid0CiAgKiBpc29sYXRlIHRoZW0gLS0gd2UgcmV0dXJuIHRoZSBlbnRpcmUg
bGlzdCBhcyBhIHNpbmdsZSB0b2tlbi4KICAqLwotc3RhdGljIHZvaWQgcGFyc2VfY2FjaGVkX2Vu
dmVsb3BlKGNoYXIgKmVudiwgY2hhciAqdG9rZW5zW10sIGludCB0b2tlbnNfc2l6ZSkKK3ZvaWQg
cGFyc2VfY2FjaGVkX2VudmVsb3BlKGNoYXIgKmVudiwgY2hhciAqdG9rZW5zW10sIGludCB0b2tl
bnNfc2l6ZSkKIHsKICAgICBjaGFyICpjOwogICAgIGludCBpID0gMCwgbmNvbSA9IDAsIGxlbjsK
QEAgLTUxNjYsNyArNTE2NSw3IEBAIHN0YXRpYyBjaGFyICpwYXJzZV9uc3RyaW5nKGNoYXIgKipz
dHIpCiAgICAgcmV0dXJuIHZhbDsKIH0KIAotc3RhdGljIHZvaWQgcGFyc2VfZW52X2FkZHJlc3Mo
Y2hhciAqc3RyLCBzdHJ1Y3QgYWRkcmVzcyAqYWRkcikKK3ZvaWQgcGFyc2VfZW52X2FkZHJlc3Mo
Y2hhciAqc3RyLCBzdHJ1Y3QgYWRkcmVzcyAqYWRkcikKIHsKICAgICBzdHIrKzsgLyogc2tpcCAo
ICovCiAgICAgYWRkci0+bmFtZSA9IHBhcnNlX25zdHJpbmcoJnN0cik7CmRpZmYgLS1naXQgYS9p
bWFwL2luZGV4LmggYi9pbWFwL2luZGV4LmgKaW5kZXggMDQxMGIwZi4uMGRlNjZkOSAxMDA2NDQK
LS0tIGEvaW1hcC9pbmRleC5oCisrKyBiL2ltYXAvaW5kZXguaApAQCAtMTgwLDYgKzE4MCw3IEBA
IGV4dGVybiB1bnNpZ25lZCBsb25nIGluZGV4X2dldHNpemUoc3RydWN0IG1haWxib3ggKm1haWxi
b3gsIHVuc2lnbmVkIG1zZ25vKTsKIGV4dGVybiB1bnNpZ25lZCBsb25nIGluZGV4X2dldGxpbmVz
KHN0cnVjdCBtYWlsYm94ICptYWlsYm94LCB1bnNpZ25lZCBtc2dubyk7CiBleHRlcm4gaW50IGlu
ZGV4X2NvcHlfcmVtb3RlKHN0cnVjdCBtYWlsYm94ICptYWlsYm94LCBjaGFyICpzZXF1ZW5jZSwg
CiAJCQkgICAgIGludCB1c2luZ3VpZCwgc3RydWN0IHByb3RzdHJlYW0gKnBvdXQpOwordm9pZCBw
YXJzZV9jYWNoZWRfZW52ZWxvcGUoY2hhciAqZW52LCBjaGFyICp0b2tlbnNbXSwgaW50IHRva2Vu
c19zaXplKTsKIAogdm9pZCBhcHBlbmRzZXF1ZW5jZWxpc3Qoc3RydWN0IHNlcV9zZXQgKipsLCBj
aGFyICpzZXF1ZW5jZSwgaW50IHVzaW5ndWlkKTsKIHZvaWQgZnJlZXNlcXVlbmNlbGlzdChzdHJ1
Y3Qgc2VxX3NldCAqbCk7CmRpZmYgLS1naXQgYS9pbWFwL3VuZXhwdW5nZS5jIGIvaW1hcC91bmV4
cHVuZ2UuYwppbmRleCBlOWRkMTllLi45NTgyNGI1IDEwMDY0NAotLS0gYS9pbWFwL3VuZXhwdW5n
ZS5jCisrKyBiL2ltYXAvdW5leHB1bmdlLmMKQEAgLTY0LDYgKzY0LDcgQEAKICNpbmNsdWRlICJn
bG9iYWwuaCIKICNpbmNsdWRlICJoYXNoLmgiCiAjaW5jbHVkZSAiaW1hcF9lcnIuaCIKKyNpbmNs
dWRlICJwYXJzZWFkZHIuaCIKICNpbmNsdWRlICJpbmRleC5oIgogI2luY2x1ZGUgImxpYmN5cl9j
ZmcuaCIKICNpbmNsdWRlICJsb2NrLmgiCkBAIC03NiwxMiArNzcsMzEgQEAKICNpbmNsdWRlICJ4
c3RybGNhdC5oIgogI2luY2x1ZGUgInN5bmNfbG9nLmgiCiAKKy8qCisgKiBKdW5rLCB0byBoZWxw
IGluZGV4LmMgbGluay4KKyAqLworaW50IGltYXBkX2V4aXN0czsKK3N0cnVjdCBwcm90c3RyZWFt
ICppbWFwZF9vdXQgPSBOVUxMOworc3RydWN0IGF1dGhfc3RhdGUgKmltYXBkX2F1dGhzdGF0ZSA9
IE5VTEw7CitjaGFyICppbWFwZF91c2VyaWQgPSBOVUxMOworaW50IGltYXBkX2NvbmRzdG9yZV9j
bGllbnQgPSAwOworCitleHRlcm4gdm9pZCBwYXJzZV9lbnZfYWRkcmVzcyhjaGFyICpzdHIsIHN0
cnVjdCBhZGRyZXNzICphZGRyKTsKKwogLyogZ2xvYmFsIHN0YXRlICovCiBjb25zdCBpbnQgY29u
ZmlnX25lZWRfZGF0YSA9IDA7Ci0KIGludCAgdW5zZXRkZWxldGVkID0gMDsKIHRpbWVfdCB0aW1l
X3NpbmNlOwogCitlbnVtIHsKKyAgICBNT0RFX1VOS05PV04gPSAtMSwKKyAgICBNT0RFX0xJU1Qs
CisgICAgTU9ERV9BTEwsCisgICAgTU9ERV9USU1FLAorICAgIE1PREVfVUlELAorICAgIE1PREVf
Q09VTlQKK30gbW9kZSA9IE1PREVfVU5LTk9XTjsKKwogLyogY3VycmVudCBuYW1lc3BhY2UgKi8K
IHN0YXRpYyBzdHJ1Y3QgbmFtZXNwYWNlIHVuZXhfbmFtZXNwYWNlOwogCkBAIC0xMDEsMTUgKzEy
MSw2IEBAIHZvaWQgdXNhZ2Uodm9pZCkKICAgICBleGl0KC0xKTsKIH0KIAotZW51bSB7Ci0gICAg
TU9ERV9VTktOT1dOID0gLTEsCi0gICAgTU9ERV9MSVNULAotICAgIE1PREVfQUxMLAotICAgIE1P
REVfVElNRSwKLSAgICBNT0RFX1VJRCwKLSAgICBNT0RFX0NPVU5UCi19IG1vZGUgPSBNT0RFX1VO
S05PV047Ci0KIHN0cnVjdCBtc2cgewogICAgIHVuc2lnbmVkIHJlY25vOwogICAgIHVuc2lnbmVk
IGxvbmcgdWlkOwpAQCAtMTM1LDYgKzE0NiwxMCBAQCB2b2lkIGxpc3RfZXhwdW5nZWQoc3RydWN0
IG1haWxib3ggKm1haWxib3gsCiAgICAgdW5zaWduZWQgbG9uZyB1aWQsIHNpemUsIGNhY2hlX29m
ZnNldDsKICAgICB0aW1lX3QgaW50ZXJuYWxkYXRlLCBzZW50ZGF0ZSwgbGFzdF91cGRhdGVkOwog
ICAgIGNhY2hlcmVjb3JkIGNyZWM7CisgICAgaW50IGNhY2hlbGVuOworICAgIGNoYXIgKmVudjsK
KyAgICBjaGFyICplbnZ0b2tlbnNbTlVNRU5WVE9LRU5TXTsKKyAgICBzdHJ1Y3QgYWRkcmVzcyBh
ZGRyOwogCiAgICAgZm9yIChtc2dubyA9IDA7IG1zZ25vIDwgZXhpc3RzOyBtc2dubysrKSB7CiAJ
LyogSnVtcCB0byBpbmRleCByZWNvcmQgZm9yIHRoaXMgbWVzc2FnZSAqLwpAQCAtMTU0LDE2ICsx
NjksNDkgQEAgdm9pZCBsaXN0X2V4cHVuZ2VkKHN0cnVjdCBtYWlsYm94ICptYWlsYm94LAogCXBy
aW50ZigiXHRSZWN2OiAlcyIsIGN0aW1lKCZpbnRlcm5hbGRhdGUpKTsKIAlwcmludGYoIlx0RXhw
ZzogJXMiLCBjdGltZSgmbGFzdF91cGRhdGVkKSk7CiAKLQlpZiAoIW1haWxib3hfY2FjaGVyZWNv
cmRfb2Zmc2V0KG1haWxib3gsIGNhY2hlX29mZnNldCwgJmNyZWMpKSB7CisJaWYgKChjYWNoZWxl
biA9IG1haWxib3hfY2FjaGVyZWNvcmRfb2Zmc2V0KG1haWxib3gsCisJCQljYWNoZV9vZmZzZXQs
ICZjcmVjKSkgPT0gMCkgewogCSAgICBwcmludGYoIlx0RVJST1I6IGNhY2hlIHJlY29yZCBtaXNz
aW5nIG9yIGNvcnJ1cHQsIG5vdCBwcmludGluZyBjYWNoZSBkZXRhaWxzXG5cbiIpOwogCSAgICBj
b250aW51ZTsKIAl9CisJZW52ID0geHN0cm5kdXAoY3JlY1tDQUNIRV9FTlZFTE9QRV0ucyArIDEs
IGNyZWNbQ0FDSEVfRU5WRUxPUEVdLmwgLSAyKTsKKwlwYXJzZV9jYWNoZWRfZW52ZWxvcGUoZW52
LCBlbnZ0b2tlbnMsIFZFQ1RPUl9TSVpFKGVudnRva2VucykpOworCisJaWYgKCBlbnZ0b2tlbnNb
IEVOVl9GUk9NIF0gKSB7CisJICAgIHBhcnNlX2Vudl9hZGRyZXNzKCBlbnZ0b2tlbnNbIEVOVl9G
Uk9NIF0sICZhZGRyICk7CisJICAgIHByaW50ZigiXHRGcm9tOiAiICk7CisJICAgIGlmICggYWRk
ci5uYW1lICkgcHJpbnRmKCJcIiVzXCIgIiwgYWRkci5uYW1lICk7CisJICAgIHByaW50ZiggIjwl
c0Alcz5cbiIsIGFkZHIubWFpbGJveCwgYWRkci5kb21haW4gKTsKKwl9IGVsc2UgeworCSAgICBw
cmludGYoIlx0RnJvbTogXG4iICk7CisJfQorCWlmICggZW52dG9rZW5zWyBFTlZfVE8gXSApIHsK
KwkgICAgcGFyc2VfZW52X2FkZHJlc3MoIGVudnRva2Vuc1sgRU5WX1RPIF0sICZhZGRyICk7CisJ
ICAgIHByaW50ZigiXHRUbyAgOiAiICk7CisJICAgIGlmICggYWRkci5uYW1lICkgcHJpbnRmKCJc
IiVzXCIgIiwgYWRkci5uYW1lICk7CisJICAgIHByaW50ZiggIjwlc0Alcz5cbiIsIGFkZHIubWFp
bGJveCwgYWRkci5kb21haW4gKTsKKwl9IGVsc2UgeworCSAgICBwcmludGYoIlx0VG8gIDogXG4i
ICk7CisJfQorCWlmICggZW52dG9rZW5zWyBFTlZfQ0MgXSApIHsKKwkgICAgcGFyc2VfZW52X2Fk
ZHJlc3MoIGVudnRva2Vuc1sgRU5WX0NDIF0sICZhZGRyICk7CisJICAgIHByaW50ZigiXHRDYyAg
OiAiICk7CisJICAgIGlmICggYWRkci5uYW1lICkgcHJpbnRmKCJcIiVzXCIgIiwgYWRkci5uYW1l
ICk7CisJICAgIHByaW50ZiggIjwlc0Alcz5cbiIsIGFkZHIubWFpbGJveCwgYWRkci5kb21haW4g
KTsKKwl9IGVsc2UgeworCSAgICBwcmludGYoIlx0Q2MgIDogXG4iICk7CisJfQorCWlmICggZW52
dG9rZW5zWyBFTlZfQkNDIF0gKSB7CisJICAgIHBhcnNlX2Vudl9hZGRyZXNzKCBlbnZ0b2tlbnNb
IEVOVl9CQ0MgXSwgJmFkZHIgKTsKKwkgICAgcHJpbnRmKCJcdEJjYyA6ICIgKTsKKwkgICAgaWYg
KCBhZGRyLm5hbWUgKSBwcmludGYoIlwiJXNcIiAiLCBhZGRyLm5hbWUgKTsKKwkJcHJpbnRmKCAi
PCVzQCVzPlxuIiwgYWRkci5tYWlsYm94LCBhZGRyLmRvbWFpbiApOworCX0gZWxzZSB7CisJICAg
IHByaW50ZigiXHRCY2MgOiBcbiIgKTsKKwl9CisJcHJpbnRmKCJcdFN1Ymo6ICVzXG5cbiIsIGVu
dnRva2Vuc1tFTlZfU1VCSkVDVF0pOworCWZyZWUgKGVudik7CiAKLQlwcmludGYoIlx0RnJvbTog
JS4qc1xuIiwgY3JlY1tDQUNIRV9GUk9NXS5sLCBjcmVjW0NBQ0hFX0ZST01dLnMpOwotCXByaW50
ZigiXHRUbyAgOiAlLipzXG4iLCBjcmVjW0NBQ0hFX1RPXS5sLCBjcmVjW0NBQ0hFX1RPXS5zKTsK
LQlwcmludGYoIlx0Q2MgIDogJS4qc1xuIiwgY3JlY1tDQUNIRV9DQ10ubCwgY3JlY1tDQUNIRV9D
Q10ucyk7Ci0JcHJpbnRmKCJcdEJjYyA6ICUuKnNcbiIsIGNyZWNbQ0FDSEVfQkNDXS5sLCBjcmVj
W0NBQ0hFX0JDQ10ucyk7Ci0JcHJpbnRmKCJcdFN1Ymo6ICUuKnNcblxuIiwgY3JlY1tDQUNIRV9T
VUJKRUNUXS5sLCBjcmVjW0NBQ0hFX1NVQkpFQ1RdLnMpOwogICAgIH0KIH0KIApAQCAtNjg4LDcg
KzczNiw3IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pCiAJICAgIGlmIChtb2Rl
ID09IE1PREVfVUlEKSB1c2FnZSgpOwogCSAgICByZWN1cnNpdmUgPSAxOwogCSAgICBicmVhazsK
LQkKKwogCWRlZmF1bHQ6CiAJICAgIHVzYWdlKCk7CiAJICAgIGJyZWFrOwpAQCAtNzUyLDMgKzgw
MCwxMSBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQogCiAgICAgZXhpdChyKTsK
IH0KKworLyoKKyAqIEp1bmssIHRvIGhlbHAgaW5kZXguYyBsaW5rLgorICovCit2b2lkIHByaW50
YXN0cmluZyhjb25zdCBjaGFyICpzIF9fYXR0cmlidXRlX18oKHVudXNlZCkpKQoreworICAgIGZh
dGFsKCJwcmludGFzdHJpbmcgbm90IGltcGxlbWVudGVkIGluIHVuZXhwdW5nZSIsIEVDX1NPRlRX
QVJFKTsKK30KLS0gCjEuNy4wLjMKCg==
</data>        

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1262</attachid>
            <date>2010-03-30 11:44 EDT</date>
            <desc>machine readable</desc>
            <filename>0003-Add-machine-readable-m-option-to-unexpunge-command.patch</filename>
            <type>text/plain</type>
            <size>9425</size>
            <attacher>bawood@umich.edu</attacher>
            
              <data encoding="base64">RnJvbSA5YzdlYzQwNzdhNDA2YzllMzkwYmVkYjA0ZWQwNGJlYmUxZGVjZjYyIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBCcmlhbiBBd29vZCA8YmF3b29kQHVtaWNoLmVkdT4KRGF0ZTog
TW9uLCAyIE5vdiAyMDA5IDEyOjUzOjIyIC0wNTAwClN1YmplY3Q6IFtQQVRDSCAzLzNdIEFkZCAi
bWFjaGluZSByZWFkYWJsZSIgLW0gb3B0aW9uIHRvIHVuZXhwdW5nZSBjb21tYW5kCgpUaGlzIHBh
dGNoIGFkZHMgdGhlIC1tIGZsYWcgdG8gYmUgY29tYmluZWQgd2l0aCAtbApvcHRpb24gb2YgdGhl
IHVuZXhwdW5nZSBjb21tYW5kIHNvIHRoZSBsaXN0IGlzIG1vcmUKZWFzaWx5IHBhcnNlZCB3aXRo
IHBlcmwgb3Igb3RoZXIgc2ltaWxhciB0b29scy4KT3V0cHV0IGZvciBlYWNoIG1lc3NhZ2UgaXMg
b24gb25lIGxpbmUgYW5kIGZpZWxkcwpzZXBhcmF0ZWQgd2l0aCAlIHNpbmNlIHRoYXQgY2hhciBz
aG91bGQgb25seSBiZQpwb3NzaWJsZSBpbiB0aGUgU3ViamVjdCBmaWVsZC4KCmRpZmYgLS1naXQg
YS9pbWFwL3VuZXhwdW5nZS5jIGIvaW1hcC91bmV4cHVuZ2UuYwppbmRleCA5NTgyNGI1Li44NDk0
OTMwIDEwMDY0NAotLS0gYS9pbWFwL3VuZXhwdW5nZS5jCisrKyBiL2ltYXAvdW5leHB1bmdlLmMK
QEAgLTkyLDYgKzkyLDcgQEAgZXh0ZXJuIHZvaWQgcGFyc2VfZW52X2FkZHJlc3MoY2hhciAqc3Ry
LCBzdHJ1Y3QgYWRkcmVzcyAqYWRkcik7CiBjb25zdCBpbnQgY29uZmlnX25lZWRfZGF0YSA9IDA7
CiBpbnQgIHVuc2V0ZGVsZXRlZCA9IDA7CiB0aW1lX3QgdGltZV9zaW5jZTsKK2NoYXIgc2VwY2hh
ciA9ICdcbic7CiAKIGVudW0gewogICAgIE1PREVfVU5LTk9XTiA9IC0xLApAQCAtMTM3LDYgKzEz
OCwyMyBAQCBpbnQgY29tcGFyZV9tc2coY29uc3Qgdm9pZCAqYSwgY29uc3Qgdm9pZCAqYikKICAg
ICByZXR1cm4gKChzdHJ1Y3QgbXNnICopIGEpLT51aWQgLSAoKHN0cnVjdCBtc2cgKikgYiktPnVp
ZDsKIH0KIAoraW50IGVzY2FwZV9zdHJpbmcoY2hhciAqaW5idWYsIGludCBsZW4sIGNoYXIgKm91
dGJ1ZiwgY29uc3QgY2hhciBjKQoreworICAgIGludCB4OworICAgIGNoYXIgKnJldCA9IG91dGJ1
ZjsKKworICAgIGZvciAoIHggPSAwOyB4IDwgbGVuOyB4KysgKSB7CisJaWYgKCAqaW5idWYgIT0g
YyApIHsKKwkgICAgKm91dGJ1ZisrID0gKmluYnVmKys7CisJfSBlbHNlIHsKKwkgICAgKm91dGJ1
ZisrID0gJ1xcJzsKKwkgICAgKm91dGJ1ZisrID0gKmluYnVmKys7CisJfQorICAgIH0KKyAgICAq
b3V0YnVmID0gJ1wwJzsKKyAgICByZXR1cm4gc3RybGVuKHJldCk7Cit9CisKIHZvaWQgbGlzdF9l
eHB1bmdlZChzdHJ1Y3QgbWFpbGJveCAqbWFpbGJveCwKIAkJICAgc3RydWN0IG1zZyAqbXNncywg
dW5zaWduZWQgbG9uZyBleGlzdHMsCiAJCSAgIGNvbnN0IGNoYXIgKmV4cHVuZ2VfaW5kZXhfYmFz
ZSkKQEAgLTE0NiwxMCArMTY0LDEzIEBAIHZvaWQgbGlzdF9leHB1bmdlZChzdHJ1Y3QgbWFpbGJv
eCAqbWFpbGJveCwKICAgICB1bnNpZ25lZCBsb25nIHVpZCwgc2l6ZSwgY2FjaGVfb2Zmc2V0Owog
ICAgIHRpbWVfdCBpbnRlcm5hbGRhdGUsIHNlbnRkYXRlLCBsYXN0X3VwZGF0ZWQ7CiAgICAgY2Fj
aGVyZWNvcmQgY3JlYzsKLSAgICBpbnQgY2FjaGVsZW47CisgICAgaW50IGNhY2hlbGVuLCBkYXRl
bGVuOwogICAgIGNoYXIgKmVudjsKICAgICBjaGFyICplbnZ0b2tlbnNbTlVNRU5WVE9LRU5TXTsK
ICAgICBzdHJ1Y3QgYWRkcmVzcyBhZGRyOworICAgIGNoYXIgZGF0ZVsyMDBdOworICAgIGNoYXIg
KmZvcm1hdCA9ICIlYyI7CisgICAgY2hhciAqZXNjc3RyOwogCiAgICAgZm9yIChtc2dubyA9IDA7
IG1zZ25vIDwgZXhpc3RzOyBtc2dubysrKSB7CiAJLyogSnVtcCB0byBpbmRleCByZWNvcmQgZm9y
IHRoaXMgbWVzc2FnZSAqLwpAQCAtMTYyLDEyICsxODMsMjIgQEAgdm9pZCBsaXN0X2V4cHVuZ2Vk
KHN0cnVjdCBtYWlsYm94ICptYWlsYm94LAogCXNpemUgPSBudG9obCgqKChiaXQzMiAqKShyZWMr
T0ZGU0VUX1NJWkUpKSk7CiAJY2FjaGVfb2Zmc2V0ID0gbnRvaGwoKigoYml0MzIgKikocmVjK09G
RlNFVF9DQUNIRV9PRkZTRVQpKSk7CiAJbGFzdF91cGRhdGVkID0gbnRvaGwoKigoYml0MzIgKiko
cmVjK09GRlNFVF9MQVNUX1VQREFURUQpKSk7Ci0KLQlwcmludGYoIlVJRDogJWx1XG4iLCB1aWQp
OwotCXByaW50ZigiXHRTaXplOiAlbHVcbiIsIHNpemUpOwotCXByaW50ZigiXHRTZW50OiAlcyIs
IGN0aW1lKCZzZW50ZGF0ZSkpOwotCXByaW50ZigiXHRSZWN2OiAlcyIsIGN0aW1lKCZpbnRlcm5h
bGRhdGUpKTsKLQlwcmludGYoIlx0RXhwZzogJXMiLCBjdGltZSgmbGFzdF91cGRhdGVkKSk7CisJ
ZGF0ZWxlbiA9IHN0cmxlbihjdGltZSgmaW50ZXJuYWxkYXRlKSk7CisKKwlpZiAoc2VwY2hhciAh
PSAnXG4nKSBwcmludGYoIiVzJWMiLCBtYWlsYm94LT5uYW1lLCBzZXBjaGFyKTsKKwlpZiAoc2Vw
Y2hhciA9PSAnXG4nKSBwcmludGYoIlVJRDogIik7CisJcHJpbnRmKCIlbHUlYyIsIHVpZCwgc2Vw
Y2hhcik7CisJaWYgKHNlcGNoYXIgPT0gJ1xuJykgcHJpbnRmKCJcdFNpemU6ICIpOworCXByaW50
ZigiJWx1JWMiLCBzaXplLCBzZXBjaGFyKTsKKwlpZiAoc2VwY2hhciA9PSAnXG4nKSBwcmludGYo
Ilx0U2VudDogIik7CisJc3RyZnRpbWUoIGRhdGUsIHNpemVvZihkYXRlKSwgZm9ybWF0LCBsb2Nh
bHRpbWUoJnNlbnRkYXRlKSk7CisJcHJpbnRmKCIlcyVjIiwgZGF0ZSwgc2VwY2hhcik7CisJaWYg
KHNlcGNoYXIgPT0gJ1xuJykgcHJpbnRmKCJcdFJlY3Y6ICIpOworCXN0cmZ0aW1lKCBkYXRlLCBz
aXplb2YoZGF0ZSksIGZvcm1hdCwgbG9jYWx0aW1lKCZpbnRlcm5hbGRhdGUpKTsKKwlwcmludGYo
IiVzJWMiLCBkYXRlLCBzZXBjaGFyKTsKKwlpZiAoc2VwY2hhciA9PSAnXG4nKSBwcmludGYoIlx0
RXhwZzogIik7CisJc3RyZnRpbWUoIGRhdGUsIHNpemVvZihkYXRlKSwgZm9ybWF0LCBsb2NhbHRp
bWUoJmxhc3RfdXBkYXRlZCkpOworCXByaW50ZigiJXMlYyIsIGRhdGUsIHNlcGNoYXIpOwogCiAJ
aWYgKChjYWNoZWxlbiA9IG1haWxib3hfY2FjaGVyZWNvcmRfb2Zmc2V0KG1haWxib3gsCiAJCQlj
YWNoZV9vZmZzZXQsICZjcmVjKSkgPT0gMCkgewpAQCAtMTc5LDM5ICsyMTAsNTcgQEAgdm9pZCBs
aXN0X2V4cHVuZ2VkKHN0cnVjdCBtYWlsYm94ICptYWlsYm94LAogCiAJaWYgKCBlbnZ0b2tlbnNb
IEVOVl9GUk9NIF0gKSB7CiAJICAgIHBhcnNlX2Vudl9hZGRyZXNzKCBlbnZ0b2tlbnNbIEVOVl9G
Uk9NIF0sICZhZGRyICk7Ci0JICAgIHByaW50ZigiXHRGcm9tOiAiICk7CisJICAgIGlmIChzZXBj
aGFyID09ICdcbicpIHByaW50ZigiXHRGcm9tOiAiICk7CiAJICAgIGlmICggYWRkci5uYW1lICkg
cHJpbnRmKCJcIiVzXCIgIiwgYWRkci5uYW1lICk7Ci0JICAgIHByaW50ZiggIjwlc0Alcz5cbiIs
IGFkZHIubWFpbGJveCwgYWRkci5kb21haW4gKTsKKwkgICAgcHJpbnRmKCAiPCVzQCVzPiVjIiwg
YWRkci5tYWlsYm94LCBhZGRyLmRvbWFpbiwgc2VwY2hhciApOwogCX0gZWxzZSB7Ci0JICAgIHBy
aW50ZigiXHRGcm9tOiBcbiIgKTsKKwkgICAgaWYgKHNlcGNoYXIgPT0gJ1xuJykgcHJpbnRmKCJc
dEZyb206IFxuIiApOworCSAgICBlbHNlIHByaW50ZiggIiVjIiwgc2VwY2hhciApOwogCX0KIAlp
ZiAoIGVudnRva2Vuc1sgRU5WX1RPIF0gKSB7CiAJICAgIHBhcnNlX2Vudl9hZGRyZXNzKCBlbnZ0
b2tlbnNbIEVOVl9UTyBdLCAmYWRkciApOwotCSAgICBwcmludGYoIlx0VG8gIDogIiApOworCSAg
ICBpZiAoc2VwY2hhciA9PSAnXG4nKSBwcmludGYoIlx0VG8gIDogIiApOwogCSAgICBpZiAoIGFk
ZHIubmFtZSApIHByaW50ZigiXCIlc1wiICIsIGFkZHIubmFtZSApOwotCSAgICBwcmludGYoICI8
JXNAJXM+XG4iLCBhZGRyLm1haWxib3gsIGFkZHIuZG9tYWluICk7CisJICAgIHByaW50ZiggIjwl
c0Alcz4lYyIsIGFkZHIubWFpbGJveCwgYWRkci5kb21haW4sIHNlcGNoYXIgKTsKIAl9IGVsc2Ug
ewotCSAgICBwcmludGYoIlx0VG8gIDogXG4iICk7CisJICAgIGlmIChzZXBjaGFyID09ICdcbicp
IHByaW50ZigiXHRUbyAgOiBcbiIgKTsKKwkgICAgZWxzZSBwcmludGYoICIlYyIsIHNlcGNoYXIg
KTsKIAl9CiAJaWYgKCBlbnZ0b2tlbnNbIEVOVl9DQyBdICkgewogCSAgICBwYXJzZV9lbnZfYWRk
cmVzcyggZW52dG9rZW5zWyBFTlZfQ0MgXSwgJmFkZHIgKTsKLQkgICAgcHJpbnRmKCJcdENjICA6
ICIgKTsKKwkgICAgaWYgKHNlcGNoYXIgPT0gJ1xuJykgcHJpbnRmKCJcdENjICA6ICIgKTsKIAkg
ICAgaWYgKCBhZGRyLm5hbWUgKSBwcmludGYoIlwiJXNcIiAiLCBhZGRyLm5hbWUgKTsKLQkgICAg
cHJpbnRmKCAiPCVzQCVzPlxuIiwgYWRkci5tYWlsYm94LCBhZGRyLmRvbWFpbiApOworCSAgICBw
cmludGYoICI8JXNAJXM+JWMiLCBhZGRyLm1haWxib3gsIGFkZHIuZG9tYWluLCBzZXBjaGFyICk7
CiAJfSBlbHNlIHsKLQkgICAgcHJpbnRmKCJcdENjICA6IFxuIiApOworCSAgICBpZiAoc2VwY2hh
ciA9PSAnXG4nKSBwcmludGYoIlx0Q2MgIDogXG4iICk7CisJICAgIGVsc2UgcHJpbnRmKCAiJWMi
LCBzZXBjaGFyICk7CiAJfQogCWlmICggZW52dG9rZW5zWyBFTlZfQkNDIF0gKSB7CiAJICAgIHBh
cnNlX2Vudl9hZGRyZXNzKCBlbnZ0b2tlbnNbIEVOVl9CQ0MgXSwgJmFkZHIgKTsKLQkgICAgcHJp
bnRmKCJcdEJjYyA6ICIgKTsKKwkgICAgaWYgKHNlcGNoYXIgPT0gJ1xuJykgcHJpbnRmKCJcdEJj
YyA6ICIgKTsKIAkgICAgaWYgKCBhZGRyLm5hbWUgKSBwcmludGYoIlwiJXNcIiAiLCBhZGRyLm5h
bWUgKTsKLQkJcHJpbnRmKCAiPCVzQCVzPlxuIiwgYWRkci5tYWlsYm94LCBhZGRyLmRvbWFpbiAp
OworCQlwcmludGYoICI8JXNAJXM+JWMiLCBhZGRyLm1haWxib3gsIGFkZHIuZG9tYWluLCBzZXBj
aGFyICk7CisJfSBlbHNlIHsKKwkgICAgaWYgKHNlcGNoYXIgPT0gJ1xuJykgcHJpbnRmKCJcdEJj
YyA6IFxuIiApOworCSAgICBlbHNlIHByaW50ZiggIiVjIiwgc2VwY2hhciApOworCX0KKwlpZiAo
IGVudnRva2Vuc1sgRU5WX1NVQkpFQ1QgXSApIHsKKwkgICAgaWYgKCBzZXBjaGFyICE9ICdcbicg
KSB7CisJCWNhY2hlbGVuID0gc3RybGVuKGVudnRva2Vuc1tFTlZfU1VCSkVDVF0pOworCQllc2Nz
dHIgPSB4bWFsbG9jKCAyICogY2FjaGVsZW4gKyAxICk7CisJCWlmICggZXNjYXBlX3N0cmluZygg
ZW52dG9rZW5zW0VOVl9TVUJKRUNUXSwgY2FjaGVsZW4sCisJCQkJZXNjc3RyLCAnJScgKSAhPSAw
ICkgeworCQkgICAgcHJpbnRmKCIlcyIsIGVzY3N0cik7CisJCX0KKwkJZnJlZSAoZXNjc3RyKTsK
KwkgICAgfSBlbHNlIHsKKwkJcHJpbnRmKCJcdFN1Ymo6ICVzXG4iLCBlbnZ0b2tlbnNbIEVOVl9T
VUJKRUNUIF0pOworCSAgICB9CiAJfSBlbHNlIHsKLQkgICAgcHJpbnRmKCJcdEJjYyA6IFxuIiAp
OworCSAgICBpZiAoc2VwY2hhciA9PSAnXG4nKSBwcmludGYoIlx0U3ViajpcbiIpOwogCX0KLQlw
cmludGYoIlx0U3ViajogJXNcblxuIiwgZW52dG9rZW5zW0VOVl9TVUJKRUNUXSk7CisJcHJpbnRm
KCJcbiIpOwogCWZyZWUgKGVudik7Ci0KICAgICB9CiB9CiAKQEAgLTUxNCw5ICs1NjMsMTMgQEAg
dW5leHB1bmdlKGNoYXIgKm1ib3huYW1lLCB1bnNpZ25lZCBsb25nICp1aWRzLCB1bnNpZ25lZCBu
dWlkcykKIAogICAgIGlmIChyKSB7CiAJLyogbWFpbGJveCBjb3JydXB0L25vbmV4aXN0ZW50IC0t
IHNraXAgaXQgKi8KLQlzeXNsb2coTE9HX1dBUk5JTkcsICJ1bmFibGUgdG8gb3Blbi9sb2NrIG1h
aWxib3ggJXMiLCBtYm94bmFtZSk7Ci0JaWYgKGRvY2xvc2UpIG1haWxib3hfY2xvc2UoJm1haWxi
b3gpOwotCXJldHVybiAwOworCWlmIChkb2Nsb3NlKSB7CisJICAgIHN5c2xvZyhMT0dfV0FSTklO
RywgInVuYWJsZSB0byBvcGVuL2xvY2sgbWFpbGJveCBpbmRleCAlcyIsIG1ib3huYW1lKTsKKwkg
ICAgbWFpbGJveF9jbG9zZSgmbWFpbGJveCk7CisJfSBlbHNlIHsKKwkgICAgc3lzbG9nKExPR19X
QVJOSU5HLCAidW5hYmxlIHRvIG9wZW4gbWFpbGJveCBoZWFkZXIgJXMiLCBtYm94bmFtZSk7CisJ
fQorCXJldHVybiByOwogICAgIH0KIAogICAgIC8qIE9wZW4gZXhwdW5nZSBpbmRleCAqLwpAQCAt
NTQwLDcgKzU5Myw3IEBAIHVuZXhwdW5nZShjaGFyICptYm94bmFtZSwgdW5zaWduZWQgbG9uZyAq
dWlkcywgdW5zaWduZWQgbnVpZHMpCiAJCQkgICAgIG1haWxib3gubmFtZSwgTlVMTCwgYnVmKTsK
IAkgICAgcHJpbnRmKCIlczogMFxuIiwgYnVmKTsKIAl9Ci0JLyogbWFpbGJveCBjb3JydXB0L25v
bmV4aXN0ZW50IC0tIHNraXAgaXQgKi8KKwkvKiBtYWlsYm94IGV4cHVuZ2UgZmlsZSBub25leGlz
dGVudCAtLSBza2lwIGl0ICovCiAJc3lzbG9nKExPR19XQVJOSU5HLCAidW5hYmxlIHRvIG9wZW4g
JXM6ICVtIiwgZXhwdW5nZV9mbmFtZSk7CiAJaWYgKGRvY2xvc2UpIG1haWxib3hfY2xvc2UoJm1h
aWxib3gpOwogCXJldHVybiAwOwpAQCAtNTY0LDIzICs2MTcsMjUgQEAgdW5leHB1bmdlKGNoYXIg
Km1ib3huYW1lLCB1bnNpZ25lZCBsb25nICp1aWRzLCB1bnNpZ25lZCBudWlkcykKIAlpZiAoc2J1
Zi5zdF9zaXplIDwgSU5ERVhfSEVBREVSX1NJWkUpIHsKIAkgICAgc3lzbG9nKExPR19FUlIsICJF
UlJPUjogJXMgY3lydXMuZXhwdW5nZSBpbnZhbGlkIiwKIAkJICAgIG1haWxib3gubmFtZSk7Ci0J
ICAgIGdvdG8gZG9uZTsKKwkgICAgciA9IElNQVBfSU9FUlJPUjsKIAl9CiAKLQlleGlzdHMgPSBu
dG9obCgqKChiaXQzMiAqKShleHB1bmdlX2luZGV4X2Jhc2UrT0ZGU0VUX0VYSVNUUykpKTsKLQlp
ZiAoc2J1Zi5zdF9zaXplIDwgKCBJTkRFWF9IRUFERVJfU0laRSArIChleGlzdHMgKiBJTkRFWF9S
RUNPUkRfU0laRSkpKSB7Ci0JICAgIHN5c2xvZyhMT0dfRVJSLAotCQkgICAgIkVSUk9SOiAlcyBj
eXJ1cy5leHB1bmdlIHRvbyBzaG9ydCBmb3IgJWx1IG1lc3NhZ2VzIiwKKwlpZiAoIXIpIGV4aXN0
cyA9IG50b2hsKCooKGJpdDMyICopKGV4cHVuZ2VfaW5kZXhfYmFzZStPRkZTRVRfRVhJU1RTKSkp
OworCWlmICghciAmJiBzYnVmLnN0X3NpemUgPCAoIElOREVYX0hFQURFUl9TSVpFICsgKGV4aXN0
cyAqIElOREVYX1JFQ09SRF9TSVpFKSkpIHsKKwkgICAgc3lzbG9nKExPR19FUlIsICJFUlJPUjog
JXMgY3lydXMuZXhwdW5nZSB0b28gc2hvcnQgZm9yICVsdSBtZXNzYWdlcyIsCiAJCSAgICBtYWls
Ym94Lm5hbWUsIGV4aXN0cyk7Ci0JICAgIGdvdG8gZG9uZTsKKwkgICAgciA9IElNQVBfSU9FUlJP
UjsKIAl9CiAKICAgICBpZiAobW9kZSA9PSBNT0RFX0NPVU5UKSB7CiAJLyogVHJhbnNsYXRlIG1h
aWxib3huYW1lICovCiAJY2hhciBidWZbTUFYX01BSUxCT1hfUEFUSCsxXTsKIAkoKnVuZXhfbmFt
ZXNwYWNlLm1ib3huYW1lX3RvZXh0ZXJuYWwpKCZ1bmV4X25hbWVzcGFjZSwgbWFpbGJveC5uYW1l
LCBOVUxMLCBidWYpOwotCXByaW50ZigiJXM6ICVsdVxuIiwgYnVmLCBleGlzdHMpOwotICAgIH0g
ZWxzZSB7CisJLyogaW4gY291bnQgbW9kZSwgaWYgdGhlcmUncyBhIHByb2JsZW0sIHByaW50IGFu
IGVycm9yIGFuZCBjb250aW51ZSAqLworCWlmICghcikgcHJpbnRmKCIlczogJWx1XG4iLCBidWYs
IGV4aXN0cyk7CisJZWxzZSBwcmludGYoIiVzOiAtMVxuIiwgYnVmKTsKKwlyID0gMDsKKyAgICB9
IGVsc2UgaWYgKCFyKSB7CiAJbXNncyA9IChzdHJ1Y3QgbXNnICopIHhtYWxsb2MoZXhpc3RzICog
c2l6ZW9mKHN0cnVjdCBtc2cpKTsKIAogCS8qIEdldCBVSURzIG9mIGV4cHVuZ2VkIG1lc3NhZ2Vz
ICovCkBAIC02NzIsNyArNzI3LDcgQEAgaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkK
IAlmYXRhbCgibXVzdCBydW4gYXMgdGhlIEN5cnVzIHVzZXIiLCBFQ19VU0FHRSk7CiAgICAgfQog
Ci0gICAgd2hpbGUgKChvcHQgPSBnZXRvcHQoYXJnYywgYXJndiwgIkM6bGF1ZHQ6dmNyIikpICE9
IEVPRikgeworICAgIHdoaWxlICgob3B0ID0gZ2V0b3B0KGFyZ2MsIGFyZ3YsICJDOmxhdWR0OnZj
cm0iKSkgIT0gRU9GKSB7CiAJc3dpdGNoIChvcHQpIHsKIAljYXNlICdDJzogLyogYWx0IGNvbmZp
ZyBmaWxlICovCiAJICAgIGFsdF9jb25maWcgPSBvcHRhcmc7CkBAIC03MzcsNiArNzkyLDExIEBA
IGludCBtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pCiAJICAgIHJlY3Vyc2l2ZSA9IDE7CiAJ
ICAgIGJyZWFrOwogCisJY2FzZSAnbSc6CisJICAgIGlmIChtb2RlICE9IE1PREVfTElTVCkgdXNh
Z2UoKTsKKwkgICAgc2VwY2hhciA9ICclJzsKKwkgICAgYnJlYWs7CisJCiAJZGVmYXVsdDoKIAkg
ICAgdXNhZ2UoKTsKIAkgICAgYnJlYWs7CkBAIC03ODgsNyArODQ4LDYgQEAgaW50IG1haW4oaW50
IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKIAlzdHJsY2F0KGJ1ZiwgIioiLCBzaXplb2YoYnVmKSk7CiAJ
ciA9ICgqdW5leF9uYW1lc3BhY2UubWJveGxpc3RfZmluZGFsbCkoJnVuZXhfbmFtZXNwYWNlLCBi
dWYsIDEsIDAsIDAsCiAJCQkJCSAgIGRvX3VuZXhwdW5nZSwgTlVMTCk7Ci0vKiBYWFggY2FsbCB1
bmV4cHVuZ2UgYXBwcm9wcmlhdGVseSBYWFggKi8KICAgICB9CiAKICAgICBpZiAodWlkcykgZnJl
ZSh1aWRzKTsKZGlmZiAtLWdpdCBhL21hbi91bmV4cHVuZ2UuOCBiL21hbi91bmV4cHVuZ2UuOApp
bmRleCAzMTUyYWYwLi45NTVmNjdiIDEwMDY0NAotLS0gYS9tYW4vdW5leHB1bmdlLjgKKysrIGIv
bWFuL3VuZXhwdW5nZS44CkBAIC01MCw2ICs1MCw5IEBAIHVuZXhwdW5nZSBcLSByZXN0b3JlIGV4
cHVuZ2VkIChidXQgeWV0IHVucmVtb3ZlZCkgbWVzc2FnZXMKIC5JIGNvbmZpZy1maWxlCiBdCiAu
QiBcLWwKK1sKKy5CIFwtbQorXQogLkkgbWFpbGJveAogLmJyCiAuQiB1bmV4cHVuZ2UKQEAgLTEy
MCw2ICsxMjMsMTIgQEAgZmlsZS4KIExpc3QgdGhlIGV4cHVuZ2VkIG1lc3NhZ2VzIGluIHRoZSBz
cGVjaWZpZWQgbWFpbGJveCB3aGljaCBhcmUgYXZhaWxhYmxlCiBmb3IgcmVzdG9yYXRpb24uCiAu
VFAKKy5CIFwtbQorV2hlbiBsaXN0aW5nIHdpdGggLWwsIHByaW50IGRhdGEgZmllbGRzIGZvciBl
YWNoIG1lc3NhZ2Ugb24gb25lCitsaW5lIHNlcGFyYXRlZCBieSAnJScuICBPY2N1cmFuY2VzIG9m
ICclJyBpbiBhIFN1YmplY3QgZmllbGQgYXJlIGVzY2FwZWQKK3dpdGggYSAnXFwnLiAgRGF0YSBp
cyBpbiB0aGUgc2FtZSBvcmRlciBhcyBwbGFpbiAtbCwgd2l0aCB0aGUgYWRkaXRpb24gb2YKK3Ro
ZSBtYWlsYm94IG5hbWUgaW4gdGhlIGZpcnN0IGZpZWxkLCBob3dldmVyIGZpZWxkIHRpdGxlcyBh
cmUgbm90IGluY2x1ZGVkLgorLlRQCiAuQkkgXC10ICIgdGltZS1pbnRlcnZhbCIKIFVuZXhwdW5n
ZSBtZXNzYWdlcyB3aGljaCB3ZXJlIGV4cHVuZ2VkIGluIHRoZSBsYXN0IHRpbWUtaW50ZXJ2YWwg
c2Vjb25kcy4KIChtb2RpZmllcnM6IG06IG1pbnV0ZXMsIGg6IGhvdXJzLCBkOiBkYXlzLCB3OiB3
ZWVrcykuCi0tIAoxLjcuMC4zCgo=
</data>        

          </attachment>
      

    </bug>

</bugzilla>