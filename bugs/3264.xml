<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>3264</bug_id>
          
          <creation_ts>2010-10-08 09:04 EDT</creation_ts>
          <short_desc>Patch for BODYPARTSTRUCTURE</short_desc>
          <delta_ts>2010-10-08 09:04:55 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus IMAP</product>
          <component>IMAP</component>
          <version>2.4.0</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          <priority>P5</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gildas Desnos">gildas.desnos@atosorigin.com</reporter>
          <assigned_to name="Ken Murchison">murch@andrew.cmu.edu</assigned_to>
          
          <qa_contact name="The Cyrus Bugzilla List">cyrus-bugzilla@lists.andrew.cmu.edu</qa_contact>

      

      

      
          <long_desc isprivate="0">
            <who name="Gildas Desnos">gildas.desnos@atosorigin.com</who>
            <bug_when>2010-10-08 09:04:55 EDT</bug_when>
            <thetext>Created an attachment (id=1306)
Patch for BODYPARTSTRUCTURE (extended URLFETCH option) in 2.4 alpha branch

While trying to implement the RFC 5616 (Streaming Internet Messaging Attachments),
I was led to implement the BODYPARTSTRUCTURE extended option for URLFETCH command (RFC 5524).

This patch doesn&apos;t protect from bugs while trying to do an URLFETCH on non-existing parts (such IMAP URL exist since GENURLAUTH produce a valid response for those unvalid parts)

This patch applies on the branch 2.4 alpha</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1306</attachid>
            <date>2010-10-08 09:04 EDT</date>
            <desc>Patch for BODYPARTSTRUCTURE (extended URLFETCH option) in 2.4 alpha branch</desc>
            <filename>extended-urlfetch.patch</filename>
            <type>text/plain</type>
            <size>7565</size>
            <attacher>gildas.desnos@atosorigin.com</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL1NNYWtlZmlsZSBiL1NNYWtlZmlsZQpvbGQgbW9kZSAxMDA2NDQKbmV3IG1v
ZGUgMTAwNzU1CmRpZmYgLS1naXQgYS9pbWFwL2luZGV4LmMgYi9pbWFwL2luZGV4LmMKaW5kZXgg
ZGIxNjM4My4uYmVkYjEzMSAxMDA2NDQKLS0tIGEvaW1hcC9pbmRleC5jCisrKyBiL2ltYXAvaW5k
ZXguYwpAQCAtMjY4NSwxNCArMjY4NSwxNyBAQCBpbnQgaW5kZXhfdXJsZmV0Y2goc3RydWN0IGlu
ZGV4X3N0YXRlICpzdGF0ZSwgdWludDMyX3QgbXNnbm8sCiAgICAgaWYgKG1haWxib3hfbWFwX21l
c3NhZ2UobWFpbGJveCwgaW0tPnJlY29yZC51aWQsICZtc2dfYmFzZSwgJm1zZ19zaXplKSkKIAly
ZXR1cm4gSU1BUF9OT19NU0dHT05FOwogCisJLyogRGF0YSBpcyBub3QgcmV0cmlldmVkIGlmIHdl
IGhhdmUgQk9EWVBBUlRTVFJVQ1RVUkUgYW5kIG5laXRoZXIgQk9EWSBub3IgQklOQVJZKi8KKyAg
ICBpZiAoIShwYXJhbXMgJiBVUkxGRVRDSF9CT0RZUEFSVFNUUlVDVFVSRSkgfHwgKHBhcmFtcyAm
IChVUkxGRVRDSF9CT0RZIHwgVVJMRkVUQ0hfQklOQVJZKSkpIHsKKwkJCiAgICAgZGF0YSA9IG1z
Z19iYXNlOwogICAgIHNpemUgPSBpbS0+cmVjb3JkLnNpemU7CiAKICAgICBpZiAoc2l6ZSA+IG1z
Z19zaXplKSBzaXplID0gbXNnX3NpemU7CiAKICAgICBjYWNoZWl0ZW0gPSBjYWNoZWl0ZW1fYmFz
ZSgmaW0tPnJlY29yZCwgQ0FDSEVfU0VDVElPTik7Ci0gICAgY2FjaGVpdGVtICs9IENBQ0hFX0lU
RU1fU0laRV9TS0lQOwotCisvLyAgICBjYWNoZWl0ZW0gKz0gQ0FDSEVfSVRFTV9TSVpFX1NLSVA7
IC8qVGhpcyBtYWtlcyB1cyB0byBnbyB0b28gZmFyKi8KKyAgICAKICAgICAvKiBTcGVjaWFsLWNh
c2UgQk9EWVtdICovCiAgICAgaWYgKCFzZWN0aW9uIHx8ICEqc2VjdGlvbikgewogCS8qIHdob2xl
IG1lc3NhZ2UsIG5vIGZ1cnRoZXIgcGFyc2luZyAqLwpAQCAtMjc2NiwzMSArMjc2OSw3NCBAQCBp
bnQgaW5kZXhfdXJsZmV0Y2goc3RydWN0IGluZGV4X3N0YXRlICpzdGF0ZSwgdWludDMyX3QgbXNn
bm8sCiAJZGF0YSArPSBDQUNIRV9JVEVNX0JJVDMyKGNhY2hlaXRlbSk7CiAJc2l6ZSA9IENBQ0hF
X0lURU1fQklUMzIoY2FjaGVpdGVtICsgQ0FDSEVfSVRFTV9TSVpFX1NLSVApOwogICAgIH0KLQor
ICAgIH0KICAgICAvKiBIYW5kbGUgZXh0ZW5kZWQgVVJMRkVUQ0ggcGFyYW1ldGVycyAqLworICAg
IGludCBlbmNvZGluZywgZGVjb2RlZCA9IDE7CisgICAgY2hhciAqYm9keUFuc3dlcjsKKyAgICBp
ZiAocGFyYW1zICYgVVJMRkVUQ0hfQklOQVJZKXsKKwllbmNvZGluZyA9IENBQ0hFX0lURU1fQklU
MzIoY2FjaGVpdGVtICsgMiAqIDQpICYgMHhmZjsKKwlib2R5QW5zd2VyID0geHN0cmR1cCgiIChC
SU5BUlkiKTsKKwlkYXRhID0gY2hhcnNldF9kZWNvZGVfbWltZWJvZHkoZGF0YSwgc2l6ZSwgZW5j
b2RpbmcsCisJCQkJICAgICAgICZkZWNidWYsIDAsIChpbnQgKikgJnNpemUpOworCWlmICghZGF0
YSkgeworCQkvKiBmYWlsZWQgdG8gZGVjb2RlICovCisJCXN0cmNhdChib2R5QW5zd2VyLCAiIE5J
TCkiKTsKKwkJZGVjb2RlZCA9IDA7CisJfQorICAgIH0KKyAgICBlbHNlIGlmIChwYXJhbXMgJiBV
UkxGRVRDSF9CT0RZKXsKKwlib2R5QW5zd2VyID0geHN0cmR1cCgiIChCT0RZIik7CisgICAgfQor
ICAgIAogICAgIGlmIChwYXJhbXMgJiBVUkxGRVRDSF9CT0RZUEFSVFNUUlVDVFVSRSkgewotCXBy
b3RfcHJpbnRmKHBvdXQsICIgKEJPRFlQQVJUU1RSVUNUVVJFIik7CisJcHJvdF9wcmludGYocG91
dCwgIiAoQk9EWVBBUlRTVFJVQ1RVUkUgIik7CiAJLyogWFhYIENhbGN1bGF0ZSBib2R5IHBhcnQg
c3RydWN0dXJlICovCi0JcHJvdF9wcmludGYocG91dCwgIiBOSUwiKTsKLQlwcm90X3ByaW50Zihw
b3V0LCAiKSIpOwotICAgIH0KLQotICAgIGlmIChwYXJhbXMgJiBVUkxGRVRDSF9CT0RZKSB7Ci0J
cHJvdF9wcmludGYocG91dCwgIiAoQk9EWSIpOworCWNhY2hlaXRlbSA9IGNhY2hlaXRlbV9iYXNl
KCZpbS0+cmVjb3JkLCBDQUNIRV9CT0RZU1RSVUNUVVJFKTsKKwljaGFyICogYm9keXBhcnRTdHI7
CisJaW50IGJvZHlwYXJ0TGVuID0gaW5kZXhfYm9keXBhcnRzdHJ1Y3R1cmUoY2FjaGVpdGVtLCBz
ZWN0aW9uLCAmYm9keXBhcnRTdHIpOworCWlmICgocGFyYW1zICYgVVJMRkVUQ0hfQklOQVJZKSAm
JiBkZWNvZGVkKXsKKwkvKiBSZXBsYWNlIGVuY29kaW5nIGFuZCBzaXplIGZpZWxkcyB3aXRoIG5l
dyB2YWx1ZXMgKi8KKwljaGFyICplbmNvZGluZ1BsYWNlLCAqZW5jb2RpbmdOYW1lLCAqZW5kU2l6
ZSwgKnBhcmVudGhlc2lzLCAqc3BhY2UsICp0bXAsIHNpemVTdHJbMTBdOworCWludCBlbmNvZGVk
ID0gMDsKKwl0bXAgPSB4c3RyZHVwKGJvZHlwYXJ0U3RyKTsKKwlzd2l0Y2ggKGVuY29kaW5nKXsK
KwkgICAgY2FzZSBFTkNPRElOR19RUCA6CisJCQllbmNvZGluZ05hbWUgPSB4c3RyZHVwKCJcInF1
b3RlZC1wcmludGFibGVcIiIpOworCQkJZW5jb2RlZCA9IDE7CisJCQlicmVhazsKKwkgICAgY2Fz
ZSBFTkNPRElOR19CQVNFNjQgOgorCQkJZW5jb2RpbmdOYW1lID0geHN0cmR1cCgiXCJiYXNlNjRc
IiIpOworCQkJZW5jb2RlZCA9IDE7CisJCQlicmVhazsKKwkgICAgZGVmYXVsdCA6CisJCQlicmVh
azsKKwl9CisJaWYgKGVuY29kZWQpeworCSAgICBlbmNvZGluZ1BsYWNlID0gc3RyaXN0cih0bXAs
IGVuY29kaW5nTmFtZSk7CisJICAgIGVuZFNpemUgPSBzdHJjaHIoZW5jb2RpbmdQbGFjZSwgJyAn
KTsKKwkgICAgcGFyZW50aGVzaXMgPSBzdHJjaHIoZW5kU2l6ZSArIDEsICcpJyk7CisJICAgIHNw
YWNlID0gc3RyY2hyKGVuZFNpemUgKyAxLCAnICcpOworCSAgICBpZiAoc3BhY2UgJiYgKChwYXJl
bnRoZXNpcy1lbmRTaXplKSA+IChzcGFjZS1lbmRTaXplKSkpeworCQkJZW5kU2l6ZSA9IHNwYWNl
OworCSAgICB9CisJICAgIGVsc2UgZW5kU2l6ZSA9IHBhcmVudGhlc2lzOworCSAgICBzdHJsY3B5
KGJvZHlwYXJ0U3RyLCB0bXAsIGVuY29kaW5nUGxhY2UtdG1wKzEpOworCSAgICBzdHJjYXQoYm9k
eXBhcnRTdHIsICJcIkJJTkFSWVwiICIpOworCSAgICBzcHJpbnRmKHNpemVTdHIsICIlbGQiLCAo
bG9uZylzaXplKTsKKwkgICAgc3RyY2F0KGJvZHlwYXJ0U3RyLCBzaXplU3RyKTsKKwkgICAgc3Ry
Y2F0KGJvZHlwYXJ0U3RyLCBlbmRTaXplKTsKKwkgICAgYm9keXBhcnRMZW4gPSBzdHJsZW4oYm9k
eXBhcnRTdHIpOworCX0KKwl9CisJcHJvdF93cml0ZShwb3V0LCBib2R5cGFydFN0ciwgYm9keXBh
cnRMZW4pOwogICAgIH0KLSAgICBlbHNlIGlmIChwYXJhbXMgJiBVUkxGRVRDSF9CSU5BUlkpIHsK
LQlpbnQgZW5jb2RpbmcgPSBDQUNIRV9JVEVNX0JJVDMyKGNhY2hlaXRlbSArIDIgKiA0KSAmIDB4
ZmY7CisgICAgcHJvdF9wcmludGYocG91dCwgIikiKTsKKyAgICBpZiAocGFyYW1zICYgKFVSTEZF
VENIX0JPRFkgfCBVUkxGRVRDSF9CSU5BUlkpKSBwcm90X3ByaW50Zihwb3V0LCBib2R5QW5zd2Vy
KTsKKyAgICBpZiAoIWRlY29kZWQpIGdvdG8gZG9uZTsKIAotCXByb3RfcHJpbnRmKHBvdXQsICIg
KEJJTkFSWSIpOworCS8qIERhdGEgaXMgbm90IHNlbnQgaWYgd2UgaGF2ZSBCT0RZUEFSVFNUUlVD
VFVSRSBhbmQgbmVpdGhlciBCT0RZIG5vciBCSU5BUlkgKi8KKyAgICBpZiAoIShwYXJhbXMgJiBV
UkxGRVRDSF9CT0RZUEFSVFNUUlVDVFVSRSkgfHwgKHBhcmFtcyAmIChVUkxGRVRDSF9CT0RZIHwg
VVJMRkVUQ0hfQklOQVJZKSkpIHsKIAotCWRhdGEgPSBjaGFyc2V0X2RlY29kZV9taW1lYm9keShk
YXRhLCBzaXplLCBlbmNvZGluZywKLQkJCQkgICAgICAgJmRlY2J1ZiwgMCwgKHNpemVfdCAqKSAm
c2l6ZSk7Ci0JaWYgKCFkYXRhKSB7Ci0JICAgIC8qIGZhaWxlZCB0byBkZWNvZGUgKi8KLQkgICAg
cHJvdF9wcmludGYocG91dCwgIiBOSUwpIik7Ci0JICAgIGdvdG8gZG9uZTsKLQl9Ci0gICAgfQog
CiAgICAgLyogSGFuZGxlIFBBUlRJQUwgcmVxdWVzdCAqLwogICAgIG4gPSBvY3RldF9jb3VudCA/
IG9jdGV0X2NvdW50IDogc2l6ZTsKQEAgLTI4MjAsNiArMjg2Niw3IEBAIGludCBpbmRleF91cmxm
ZXRjaChzdHJ1Y3QgaW5kZXhfc3RhdGUgKnN0YXRlLCB1aW50MzJfdCBtc2dubywKIAogICAgIC8q
IEVuZCBvZiBub24tdGV4dCBsaXRlcmFsIC0tIHRlbGwgdGhlIHByb3RzdHJlYW0gYWJvdXQgaXQg
Ki8KICAgICBpZiAoZG9tYWluICE9IERPTUFJTl83QklUKSBwcm90X2RhdGFfYm91bmRhcnkocG91
dCk7CisgICAgfQogCiAgICAgLyogQ29tcGxldGUgZXh0ZW5kZWQgVVJMRkVUQ0ggcmVzcG9uc2Ug
Ki8KICAgICBpZiAocGFyYW1zICYgKFVSTEZFVENIX0JPRFkgfCBVUkxGRVRDSF9CSU5BUlkpKSBw
cm90X3ByaW50Zihwb3V0LCAiKSIpOwpAQCAtMjgzMiw2ICsyODc5LDkyIEBAIGludCBpbmRleF91
cmxmZXRjaChzdHJ1Y3QgaW5kZXhfc3RhdGUgKnN0YXRlLCB1aW50MzJfdCBtc2dubywKICAgICBy
ZXR1cm4gcjsKIH0KIAorCisvKgorICogRXh0cmFjdCB0aGUgYm9keXBhcnRzdHJ1Y3R1cmUgZnJv
bSB0aGUgImJvZHkiIGluIGN5cnVzLmNhY2hlIGZvciB0aGUgc2VsZWN0ZWQgc2VjdGlvbgorICog
UmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBib2R5cGFydHN0cnVjdHVyZQorICovCitpbnQgaW5k
ZXhfYm9keXBhcnRzdHJ1Y3R1cmUoY29uc3QgY2hhciAqIGJvZHksIGNvbnN0IGNoYXIgKiBzZWN0
aW9uLCBjaGFyICoqIGJvZHlwYXJ0c3RydWN0KQoreworICAgIGludCBpLCBzY3RuTm8gPSAwLCBs
ZW4sIHBhckxldmVsOworICAgIGludCBzdWJzZWN0aW9uID0gMDsKKyAgICBjaGFyICpkb3QsICpj
bG9zZVBhciwgKm9wZW5QYXIsICplbmQ7CisgICAgY2hhciAqIHRtcFNlY3QgPSB4c3RyZHVwKHNl
Y3Rpb24pOworICAgIGNoYXIgKiB0bXBTdHJ1Y3QgPSB4c3RyZHVwKGJvZHkpOworICAgIAorICAg
IGRveworICAgIAlkb3QgPSBzdHJjaHIodG1wU2VjdCwgJy4nKTsKKwlzY3RuTm8gPSBhdG9pKHRt
cFNlY3QpOworCWlmIChkb3QgIT0gTlVMTCkgdG1wU2VjdCA9IGRvdCsxOworCXRtcFN0cnVjdCsr
OworCWlmIChzdWJzZWN0aW9uKXsKKwkgICAgLypza2lwIHRoZSBmaXJzdCA4IGVsZW1lbnRzIG9m
IHRoZSBhdHRhY2htZW50IGhlYWRlciAoICIiLCAgKCksIE5JTCBvciBpbnQpCisJCXdoaWNoIGFy
ZSBiZWZvcmUgdGhlICJzdWItYXR0YWNobWVudCIgcGFydCAqLworCSAgICBmb3IgKGkgPSAwOyBp
IDwgODsgaSsrKXsKKwkgICAgCWlmICgqdG1wU3RydWN0ID09ICciJykgdG1wU3RydWN0ID0gc3Ry
Y2hyKCh0bXBTdHJ1Y3QgKyAxKSwgJyInKSArIDI7CisJCWVsc2UgaWYgKCp0bXBTdHJ1Y3QgPT0g
J04nKSB0bXBTdHJ1Y3QgKz0gNDsKKwkJZWxzZSBpZiAoKnRtcFN0cnVjdCA8PSAnOScgJiYgKnRt
cFN0cnVjdCA+PSAnMCcpIHRtcFN0cnVjdCA9IHN0cmNocih0bXBTdHJ1Y3QsICcgJykgKyAxOwor
CQllbHNlIGlmICgqdG1wU3RydWN0ID09ICcoJyl7CisJCSAgICBwYXJMZXZlbCA9IDE7CisJCSAg
ICB3aGlsZSAocGFyTGV2ZWwpeworCQkJb3BlblBhciA9IHN0cmNocigodG1wU3RydWN0ICsgMSks
ICcoJyk7CisJCQljbG9zZVBhciA9IHN0cmNocigodG1wU3RydWN0ICsgMSksICcpJyk7CisJCQlp
ZihvcGVuUGFyKXsKKwkJCSAgICBpZiAob3BlblBhciA8IGNsb3NlUGFyKXsKKwkJCQl0bXBTdHJ1
Y3QgPSBvcGVuUGFyOworCQkJCXBhckxldmVsKys7CisJCQkgICAgfWVsc2V7CisJCQkJdG1wU3Ry
dWN0ID0gY2xvc2VQYXI7CisJCQkJcGFyTGV2ZWwtLTsKKwkJCSAgICB9CisJCQl9ZWxzZXsKKwkJ
CSAgICB0bXBTdHJ1Y3QgPSBjbG9zZVBhcjsKKwkJCSAgICBwYXJMZXZlbC0tOworCQkJfQorCQkg
ICAgfQorCQkgICAgdG1wU3RydWN0ICs9IDI7CisJCX0KKwkgICAgfQorCSAgICB0bXBTdHJ1Y3Qr
KzsKKwl9IAorCWlmIChkb3QgIT0gTlVMTCkgc3Vic2VjdGlvbiA9IDE7CisJLyogU2tpcCB0aGUg
c2N0bk5vLTEgbmV4dCBwYXJ0cyBvZiB0aGUgbWVzc2FnZSAqLworCWZvciAoaSA9IDA7IGk8IChz
Y3RuTm8gLSAxKTsgaSsrKXsKKwkgICAgd2hpbGUgKChjbG9zZVBhciA9IHN0cmNocih0bXBTdHJ1
Y3QgKyAxLCAnKScpKSA+IChvcGVuUGFyID0gc3RyY2hyKHRtcFN0cnVjdCArIDEsICcoJykpKXsK
KwkJd2hpbGUgKCBzdHJjaHIob3BlblBhciArIDEsICcoJykgPCBjbG9zZVBhcil7CisJCSAgICBv
cGVuUGFyID0gc3RyY2hyKG9wZW5QYXIgKyAxLCAnKCcpOworCQkgICAgY2xvc2VQYXIgPSBzdHJj
aHIoY2xvc2VQYXIgKyAxLCAnKScpOworCQl9CisJCXRtcFN0cnVjdCA9IGNsb3NlUGFyOworCSAg
ICB9CisJICAgIHRtcFN0cnVjdCA9IHN0cmNocihjbG9zZVBhciwgJygnKTsKKwl9CisJLyogU2Vh
cmNoIHRoZSBlbmQgb2YgdGhpcyBwYXJ0ICovCisJZW5kID0gdG1wU3RydWN0ICsgMTsKKwlwYXJM
ZXZlbCA9IDE7CisJd2hpbGUgKHBhckxldmVsKXsKKwkgICAgb3BlblBhciA9IHN0cmNocihlbmQs
ICcoJyk7CisJICAgIGNsb3NlUGFyID0gc3RyY2hyKGVuZCwgJyknKTsKKwkgICAgaWYob3BlblBh
cil7CisJCWlmIChvcGVuUGFyIDwgY2xvc2VQYXIpeworCQkgICAgZW5kID0gb3BlblBhciArIDE7
CisJCSAgICBwYXJMZXZlbCsrOworCQl9ZWxzZXsKKwkJICAgIGVuZCA9IGNsb3NlUGFyICsgMTsK
KwkJICAgIHBhckxldmVsLS07CisJCX0KKwkgICAgfWVsc2V7CisJCWVuZCA9IGNsb3NlUGFyICsg
MTsKKwkJcGFyTGV2ZWwtLTsKKwkgICAgfQorCX0KKwl0bXBTdHJ1Y3RbZW5kLXRtcFN0cnVjdF0g
PSAnXDAnOworICAgIH13aGlsZSAoZG90ICE9IE5VTEwpOworICAgIGxlbiA9IHN0cmxlbih0bXBT
dHJ1Y3QpOworICAgICpib2R5cGFydHN0cnVjdCA9IHhzdHJkdXAodG1wU3RydWN0KTsKKyAgICBy
ZXR1cm4gbGVuOworfQorCiAvKgogICogSGVscGVyIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYSBnZW5l
cmFsaXplZCBTVE9SRSBjb21tYW5kCiAgKi8KZGlmZiAtLWdpdCBhL2ltYXAvaW5kZXguaCBiL2lt
YXAvaW5kZXguaAppbmRleCA2MGRjZjhiLi5lZmJlOTVjIDEwMDY0NAotLS0gYS9pbWFwL2luZGV4
LmgKKysrIGIvaW1hcC9pbmRleC5oCkBAIC0yMjMsNiArMjIzLDggQEAgZXh0ZXJuIGludCBpbmRl
eF91cmxmZXRjaChzdHJ1Y3QgaW5kZXhfc3RhdGUgKnN0YXRlLCB1aW50MzJfdCBtc2dubywKIAkJ
CSAgdW5zaWduZWQgcGFyYW1zLCBjb25zdCBjaGFyICpzZWN0aW9uLAogCQkJICB1bnNpZ25lZCBs
b25nIHN0YXJ0X29jdGV0LCB1bnNpZ25lZCBsb25nIG9jdGV0X2NvdW50LAogCQkJICBzdHJ1Y3Qg
cHJvdHN0cmVhbSAqcG91dCwgdW5zaWduZWQgbG9uZyAqc2l6ZSk7CitleHRlcm4gaW50IGluZGV4
X2JvZHlwYXJ0c3RydWN0dXJlKGNvbnN0IGNoYXIgKiBib2R5c3RydWN0LAorCQkJIGNvbnN0IGNo
YXIgKiBzZWN0aW9uLCBjaGFyICoqIGJvZHlwYXJ0c3RydWN0KTsKIGV4dGVybiBjaGFyICppbmRl
eF9nZXRfbXNnaWQoc3RydWN0IGluZGV4X3N0YXRlICpzdGF0ZSwgdWludDMyX3QgbXNnbm8pOwog
ZXh0ZXJuIHN0cnVjdCBubnRwX292ZXJ2aWV3ICppbmRleF9vdmVydmlldyhzdHJ1Y3QgaW5kZXhf
c3RhdGUgKnN0YXRlLAogCQkJCQkgICAgdWludDMyX3QgbXNnbm8pOwo=
</data>        

          </attachment>
      

    </bug>

</bugzilla>