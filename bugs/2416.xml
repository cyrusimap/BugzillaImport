<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>2416</bug_id>
          
          <creation_ts>2004-04-14 05:55 EDT</creation_ts>
          <short_desc>Patch to be able to make autoreplies in the future</short_desc>
          <delta_ts>2005-10-25 11:50:39 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus IMAP</product>
          <component>Sieve</component>
          <version>2.3.x</version>
          <rep_platform>Other</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          <priority>P2</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Carsten Hoeger">choeger@choeger.de</reporter>
          <assigned_to name="Ken Murchison">murch@andrew.cmu.edu</assigned_to>
          
          <qa_contact name="The Cyrus Bugzilla List">cyrus-bugzilla@lists.andrew.cmu.edu</qa_contact>

      

      

      
          <long_desc isprivate="0">
            <who name="Carsten Hoeger">choeger@choeger.de</who>
            <bug_when>2004-04-14 05:55:46 EDT</bug_when>
            <thetext>The attached patch extends the SIEVE script language to set autoresponder to a
date in the future.

Syntax:

require &quot;vacation-period&quot;;
vacation :days 7 :start &quot;YYYY-MM-DD HH:MM&quot; :end &quot;YYYY-MM-DD HH:MM&quot; :addresses ...</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Carsten Hoeger">choeger@choeger.de</who>
            <bug_when>2004-04-14 05:56:30 EDT</bug_when>
            <thetext>Created an attachment (id=281)
sieve-vacation-time-period.patch
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Rob Siemborski">rjs3@andrew.cmu.edu</who>
            <bug_when>2004-04-21 11:12:51 EDT</bug_when>
            <thetext>This really should be addressed on the ietf-mtafilters list first.</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>281</attachid>
            <date>2004-04-14 05:56 EDT</date>
            <desc>sieve-vacation-time-period.patch</desc>
            <filename>sieve-vacation-time-period.patch</filename>
            <type>text/plain</type>
            <size>7047</size>
            <attacher>choeger@choeger.de</attacher>
            
              <data encoding="base64">LS0tIHNpZXZlL21lc3NhZ2UuaAorKysgc2lldmUvbWVzc2FnZS5oCTIwMDQvMDEvMTYgMTQ6MDU6
NDUKQEAgLTcwLDYgKzcwLDggQEAKIAkgICAgLyogYWRkciwgZnJvbWFkZHIsIHN1YmogLSBmcmVl
ZCEgKi8KIAkgICAgc2lldmVfc2VuZF9yZXNwb25zZV9jb250ZXh0X3Qgc2VuZDsKIAkgICAgc2ll
dmVfYXV0b3Jlc3BvbmRfY29udGV4dF90IGF1dG9yZXNwOworCSAgICB0aW1lX3Qgc3RhcnQ7CisJ
ICAgIHRpbWVfdCBlbmQ7CiAJfSB2YWM7CiAJc3RydWN0IHsKIAkgICAgY29uc3QgY2hhciAqZmxh
ZzsKLS0tIHNpZXZlL3NjcmlwdC5jCisrKyBzaWV2ZS9zY3JpcHQuYwkyMDA0LzAxLzE2IDE0OjAx
OjQzCkBAIC0zOSw2ICszOSw3IEBACiAjaW5jbHVkZSA8c3lzL3R5cGVzLmg+CiAjaW5jbHVkZSA8
dW5pc3RkLmg+CiAjaW5jbHVkZSA8YXNzZXJ0Lmg+CisjaW5jbHVkZSA8dGltZS5oPgogCiAjaW5j
bHVkZSAieG1hbGxvYy5oIgogCkBAIC04MSw2ICs4MiwxMyBAQAogCX0gZWxzZSB7CiAJICAgIHJl
dHVybiAwOwogCX0KKyAgICB9IGVsc2UgaWYgKCFzdHJjbXAoInZhY2F0aW9uLXBlcmlvZCIsIHJl
cSkpIHsKKyAgICAgICBpZiAocy0+aW50ZXJwLnZhY2F0aW9uKSB7CisgICAgICAgICAgIHMtPnN1
cHBvcnQudmFjYXRpb25fcGVyaW9kID0gMTsKKyAgICAgICAgICAgcmV0dXJuIDE7CisgICAgICAg
fSBlbHNlIHsKKyAgICAgICAgICAgcmV0dXJuIDA7CisgICAgICAgfQogICAgIH0gZWxzZSBpZiAo
IXN0cmNtcCgiaW1hcGZsYWdzIiwgcmVxKSkgewogCWlmIChzLT5pbnRlcnAubWFya2ZsYWdzLT5m
bGFnKSB7CiAJICAgIHMtPnN1cHBvcnQuaW1hcGZsYWdzID0gMTsKQEAgLTY2OCw2ICs2NzYsMzYg
QEAKIAkJcmV0ID0gbWFrZWhhc2goaGFzaCwgYS0+dS52YWMuc2VuZC5hZGRyLAogCQkJICAgICAg
IGEtPnUudmFjLnNlbmQubXNnKTsKIAorICAgICAgICAgICAgICAgIGlmIChyZXQgPT0gU0lFVkVf
T0sgJiYgKChhLT51LnZhYy5zdGFydCAhPSAodGltZV90KSAtMSkgfHwKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAoYS0+dS52YWMuZW5kICE9ICh0aW1lX3QpIC0xKSkgKXsKKyAgICAgICAg
ICAgICAgICAgICAgLyogQ2hlY2sgdGhlIHRpbWUgaW50ZXJ2YWxsICovCisgICAgICAgICAgICAg
ICAgICAgIHRpbWVfdCBub3csIGdtdF9ub3c7CisgICAgICAgICAgICAgICAgICAgIG5vdyA9IHRp
bWUoTlVMTCk7CisgICAgICAgICAgICAgICAgICAgIGdtdF9ub3cgPSBta3RpbWUoZ210aW1lKCZu
b3cpKTsKKyAgICAgICAgICAgICAgICAgICAgaWYoZ210X25vdyAhPSAodGltZV90KSAtMSl7Cisg
ICAgICAgICAgICAgICAgICAgICAgICBpZihhLT51LnZhYy5zdGFydCA9PSAodGltZV90KSAtMSl7
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ210X25vdyA8IGEtPnUudmFjLmVuZCl7
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IFNJRVZFX09LOworICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIH1lbHNleworICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICByZXQgPSBTSUVWRV9ET05FOworICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gCisg
ICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihhLT51LnZhYy5lbmQgPT0gKHRpbWVfdCkg
LTEpeworICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdtdF9ub3cgPiBhLT51LnZhYy5z
dGFydCl7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IFNJRVZFX09LOwor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNleworICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICByZXQgPSBTSUVWRV9ET05FOworICAgICAgICAgICAgICAgICAgICAgICAgICAg
IH0gCisgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZigoZ210X25vdyA+IGEtPnUudmFj
LnN0YXJ0KSAmJgorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGdtdF9ub3cgPCBh
LT51LnZhYy5lbmQpKXsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBTSUVWRV9P
SzsKKyAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNleworICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHJldCA9IFNJRVZFX0RPTkU7CisgICAgICAgICAgICAgICAgICAgICAgICB9CisgICAg
ICAgICAgICAgICAgICAgIH1lbHNleworICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gU0lF
VkVfRE9ORTsKKyAgICAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgIH0KKwogCQlp
ZiAocmV0ID09IFNJRVZFX09LKSB7CiAJCSAgICBhLT51LnZhYy5hdXRvcmVzcC5oYXNoID0gaGFz
aDsKIAkJICAgIGEtPnUudmFjLmF1dG9yZXNwLmxlbiA9IEhBU0hTSVpFOwotLS0gc2lldmUvc2Ny
aXB0LmgKKysrIHNpZXZlL3NjcmlwdC5oCTIwMDQvMDEvMTYgMTM6MzA6MzAKQEAgLTQzLDYgKzQz
LDcgQEAKIAlpbnQgcmVqZWN0ICAgICAgICAgOiAxOwogCWludCBlbnZlbG9wZSAgICAgICA6IDE7
CiAJaW50IHZhY2F0aW9uICAgICAgIDogMTsKKwlpbnQgdmFjYXRpb25fcGVyaW9kIDogMTsKIAlp
bnQgaW1hcGZsYWdzICAgICAgOiAxOwogCWludCBub3RpZnkgICAgICAgICA6IDE7CiAJaW50IHJl
Z2V4ICAgICAgICAgIDogMTsKLS0tIHNpZXZlL3NpZXZlLWxleC5sCisrKyBzaWV2ZS9zaWV2ZS1s
ZXgubAkyMDA0LzAxLzE2IDEzOjMxOjE1CkBAIC0xMTMsNiArMTEzLDkgQEAKIDxJTklUSUFMPjpo
aWdoCQlyZXR1cm4gSElHSDsKIDxJTklUSUFMPjptZXNzYWdlCXJldHVybiBNRVNTQUdFOwogPElO
SVRJQUw+dmFjYXRpb24JcmV0dXJuIFZBQ0FUSU9OOworPElOSVRJQUw+dmFjYXRpb24tcGVyaW9k
ICAgICAgIHJldHVybiBWQUNBVElPTl9QRVJJT0Q7Cis8SU5JVElBTD46c3RhcnQgICAgICAgICBy
ZXR1cm4gU1RBUlQ7Cis8SU5JVElBTD46ZW5kICAgICAgICAgICByZXR1cm4gRU5EOwogPElOSVRJ
QUw+OmRheXMJCXJldHVybiBEQVlTOwogPElOSVRJQUw+OmFkZHJlc3NlcwlyZXR1cm4gQUREUkVT
U0VTOwogPElOSVRJQUw+OnN1YmplY3QJcmV0dXJuIFNVQkpFQ1Q7Ci0tLSBzaWV2ZS9zaWV2ZS55
CisrKyBzaWV2ZS9zaWV2ZS55CTIwMDQvMDEvMTYgMTM6MzQ6MDUKQEAgLTM0LDYgKzM0LDcgQEAK
ICNpbmNsdWRlIDxhc3NlcnQuaD4KICNpbmNsdWRlIDxzdHJpbmcuaD4KICNpbmNsdWRlIDxjdHlw
ZS5oPgorI2luY2x1ZGUgPHRpbWUuaD4KICNpbmNsdWRlICJ4bWFsbG9jLmgiCiAjaW5jbHVkZSAi
Y29tcGFyYXRvci5oIgogI2luY2x1ZGUgImludGVycC5oIgpAQCAtNTIsNiArNTMsOCBAQAogICAg
IHN0cmluZ2xpc3RfdCAqYWRkcmVzc2VzOwogICAgIGNoYXIgKnN1YmplY3Q7CiAgICAgaW50IG1p
bWU7CisgICAgdGltZV90IHN0YXJ0OworICAgIHRpbWVfdCBlbmQ7CiB9OwogCiBzdHJ1Y3QgaHRh
Z3MgewpAQCAtMTU0LDYgKzE1Nyw3IEBACiAldG9rZW4gQUxMIExPQ0FMUEFSVCBET01BSU4gVVNF
UiBERVRBSUwKICV0b2tlbiBEQVlTIEFERFJFU1NFUyBTVUJKRUNUIE1JTUUKICV0b2tlbiBNRVRI
T0QgSUQgT1BUSU9OUyBMT1cgTk9STUFMIEhJR0ggQU5ZIE1FU1NBR0UKKyV0b2tlbiBWQUNBVElP
Tl9QRVJJT0QgU1RBUlQgRU5ECiAKICV0eXBlIDxjbD4gY29tbWFuZHMgY29tbWFuZCBhY3Rpb24g
ZWxzaWYgYmxvY2sKICV0eXBlIDxzbD4gc3RyaW5nbGlzdCBzdHJpbmdzCkBAIC0zNjMsNiArMzY3
LDQ3IEBACiAJCQkJCXl5ZXJyb3IoImR1cGxpY2F0ZSA6bWltZSIpOyAKIAkJCQkJWVlFUlJPUjsg
fQogCQkJCSAgIGVsc2UgeyAkJC0+bWltZSA9IE1JTUU7IH0gfQorICAgICAgICB8IHZ0YWdzIFNU
QVJUIFNUUklORyAgICAgeyBpZiAoIXBhcnNlX3NjcmlwdC0+c3VwcG9ydC52YWNhdGlvbl9wZXJp
b2QpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5eWVycm9yKCJ2YWNh
dGlvbi1wZXJpb2Qgbm90IHJlcXVpcmVkIik7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgWVlFUlJPUjsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICQkLT5zdGFydCAhPSAodGlt
ZV90KSAtMSl7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeXllcnJvcigi
ZHVwbGljYXRlIDpzdGFydCIpOworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFlZRVJST1I7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7Cisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHRtIHN0YXJ0X3RtOwor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbXNldCgmc3RhcnRfdG0sMCxz
aXplb2Yoc3RydWN0IHRtKSk7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYoISBzdHJwdGltZSgkMywgIiVZLSVtLSVkICVIOiVNIiwgCisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICZzdGFydF90bSkpeyAKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB5eWVycm9yKCJpbnZhbGlkIHN0YXJ0IGRhdGUiKTsKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZWUVSUk9SOworICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAkJC0+c3RhcnQgPSBta3RpbWUoJnN0YXJ0X3RtKTsKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
fQorICAgICAgICB8IHZ0YWdzIEVORCBTVFJJTkcgICAgICAgeyBpZiAoIXBhcnNlX3NjcmlwdC0+
c3VwcG9ydC52YWNhdGlvbl9wZXJpb2QpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB5eWVycm9yKCJ2YWNhdGlvbi1wZXJpb2Qgbm90IHJlcXVpcmVkIik7CisgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWVlFUlJPUjsKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoICQkLT5lbmQgIT0gKHRpbWVfdCkgLTEpeworICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHl5ZXJyb3IoImR1cGxpY2F0ZSA6ZW5kIik7CisgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgWVlFUlJPUjsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgfSBlbHNlIHsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgdG0gZW5kX3RtOworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVf
dCBlbmQ7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtc2V0KCZlbmRf
dG0sMCxzaXplb2Yoc3RydWN0IHRtKSk7CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaWYoISBzdHJwdGltZSgkMywgIiVZLSVtLSVkICVIOiVNIiwKKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmVuZF90bSkpeworICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHl5ZXJyb3IoImludmFsaWQgZW5kIGRhdGUiKTsKKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZWUVSUk9SOworICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlbmQgPSBta3RpbWUoJmVuZF90bSk7CisgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaWYoJCQtPnN0YXJ0ID4gZW5kKXsKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB5eWVycm9yKCJlbmQgZGF0ZSBiZWZvcmUgc3RhcnQgZGF0ZSIp
OworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFlZRVJST1I7CisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICQkLT5lbmQgPSBlbmQ7CisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIH0gfQogCTsKIAogc3RyaW5nbGlzdDogJ1snIHN0cmluZ3MgJ10nICAgICAgeyAk
JCA9ICQyOyB9CkBAIC02NDAsNiArNjg1LDggQEAKIAlyZXQtPnUudi5kYXlzID0gdi0+ZGF5czsK
IAlyZXQtPnUudi5taW1lID0gdi0+bWltZTsKIAlyZXQtPnUudi5hZGRyZXNzZXMgPSB2LT5hZGRy
ZXNzZXM7IHYtPmFkZHJlc3NlcyA9IE5VTEw7CisgICAgICAgIHJldC0+dS52LnN0YXJ0ID0gdi0+
c3RhcnQ7CisgICAgICAgIHJldC0+dS52LmVuZCA9IHYtPmVuZDsKIAlmcmVlX3Z0YWdzKHYpOwog
CXJldC0+dS52Lm1lc3NhZ2UgPSByZWFzb247CiAgICAgfQpAQCAtNzM4LDYgKzc4NSw4IEBACiAg
ICAgci0+YWRkcmVzc2VzID0gTlVMTDsKICAgICByLT5zdWJqZWN0ID0gTlVMTDsKICAgICByLT5t
aW1lID0gLTE7CisgICAgci0+c3RhcnQgPSAodGltZV90KSAtMTsKKyAgICByLT5lbmQgPSAodGlt
ZV90KSAtMTsKIAogICAgIHJldHVybiByOwogfQotLS0gc2lldmUvdHJlZS5oCisrKyBzaWV2ZS90
cmVlLmgJMjAwNC8wMS8xNiAxNDowNTozNwpAQCAtMjksNiArMjksNyBAQAogI2RlZmluZSBUUkVF
X0gKIAogI2luY2x1ZGUgImNvbXBhcmF0b3IuaCIKKyNpbmNsdWRlIDx0aW1lLmg+CiAKIC8qIGFi
c3RyYWN0IHN5bnRheCB0cmVlIGZvciBzaWV2ZSAqLwogdHlwZWRlZiBzdHJ1Y3QgU3RyaW5nbGlz
dCBzdHJpbmdsaXN0X3Q7CkBAIC0xMDUsNiArMTA2LDggQEAKIAkgICAgc3RyaW5nbGlzdF90ICph
ZGRyZXNzZXM7CiAJICAgIGNoYXIgKm1lc3NhZ2U7CiAJICAgIGludCBtaW1lOworCSAgICB0aW1l
X3Qgc3RhcnQ7CisJICAgIHRpbWVfdCBlbmQ7CiAJfSB2OwogCXN0cnVjdCB7IC8qIGl0J3MgYSBu
b3RpZnkgYWN0aW9uICovCiAJICAgIGNoYXIgKm1ldGhvZDsK
</data>        

          </attachment>
      

    </bug>

</bugzilla>