<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>2394</bug_id>
          
          <creation_ts>2004-03-05 13:38 EDT</creation_ts>
          <short_desc>Make pop3d daemon obey assigned ACLs on a mailbox</short_desc>
          <delta_ts>2010-10-18 12:43:04 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus IMAP</product>
          <component>POP</component>
          <version>2.2.x</version>
          <rep_platform>Other</rep_platform>
          <op_sys>other</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          
          
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brenden Conte">conteb@rpi.edu</reporter>
          <assigned_to name="Rob Siemborski">rjs3@andrew.cmu.edu</assigned_to>
          <cc>ken@oceana.com</cc>
          <qa_contact name="The Cyrus Bugzilla List">cyrus-bugzilla@lists.andrew.cmu.edu</qa_contact>

      

      

      
          <long_desc isprivate="0">
            <who name="Brenden Conte">conteb@rpi.edu</who>
            <bug_when>2004-03-05 13:38:52 EDT</bug_when>
            <thetext>This patch includes an option, &apos;popobeyinboxacl&apos;, which will cause the pop
daemon to obey the listed permissions for that user on the inbox.  Only the
&apos;lrd&apos; ACLs are acutally used due to the limited acitons of the protocol.  All
errors are &quot;-ERR [SYS/PERM] &lt;action&gt; Permission denied&quot;.  If the user has none
of the three permissions, they will get the error after the user/pass sequence,
otherwise the ACLs are enforced as follows:

ACLs enforced: l:stat,list,uidl r:retr,top d:dele

This patch is against the latest CVS as of 3/5/04</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Brenden Conte">conteb@rpi.edu</who>
            <bug_when>2004-03-05 13:40:01 EDT</bug_when>
            <thetext>Created an attachment (id=268)
patch for the popobeyinboxacl option.
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Brenden Conte">conteb@rpi.edu</who>
            <bug_when>2004-06-22 16:39:14 EDT</bug_when>
            <thetext>Created an attachment (id=284)
Make pop daemon obey IMAP permissions

Still looking for a decision on this patch.  Thanks.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Ken Murchison">ken@oceana.com</who>
            <bug_when>2004-06-25 22:15:52 EDT</bug_when>
            <thetext>I&apos;m considering adding this functionality to 2.3, but I don&apos;t think you&apos;re using
the &apos;l&apos; right in the same sense as its used in IMAP.  The &apos;l&apos; right allows you
to list the available mailboxes, not the contents of the mailbox.  So, I believe
that the only rights which matter for POP are &apos;r&apos; which allows the mailbox to be
opened and read, and &apos;d&apos; which allows messages to be deleted.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Ken Murchison">ken@oceana.com</who>
            <bug_when>2004-06-28 09:54:45 EDT</bug_when>
            <thetext>Created an attachment (id=287)
alternative patch against 2.3

My version of a popuseacl patch (against 2.3) which only uses the &apos;lr&apos; rights.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Ken Murchison">ken@oceana.com</who>
            <bug_when>2004-06-28 16:17:31 EDT</bug_when>
            <thetext>Correction: my patch only uses the &apos;rd&apos; rights.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Ken Murchison">ken@oceana.com</who>
            <bug_when>2004-06-29 11:54:14 EDT</bug_when>
            <thetext>Committed &apos;popuseacl&apos; patch to CVS (2.2)</thetext>
          </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>268</attachid>
            <date>2004-03-05 13:40 EDT</date>
            <desc>patch for the popobeyinboxacl option.</desc>
            <filename>popobeyinboxacl.patch</filename>
            <type>text/plain</type>
            <size>7756</size>
            <attacher>conteb@rpi.edu</attacher>
            
              <data encoding="base64">ZGlmZiAtTmF1ciBjeXJ1cy1pbWFwZC5jdnMyMDA0MDMwNS9pbWFwL3BvcDNkLmMgY3lydXMtaW1h
cGQuY3ZzMjAwNDAzMDUucG9wb2JleWluYm94YWNsLnBhdGNoL2ltYXAvcG9wM2QuYwotLS0gY3ly
dXMtaW1hcGQuY3ZzMjAwNDAzMDUvaW1hcC9wb3AzZC5jCVdlZCBNYXIgIDMgMTE6MjI6MjcgMjAw
NAorKysgY3lydXMtaW1hcGQuY3ZzMjAwNDAzMDUucG9wb2JleWluYm94YWNsLnBhdGNoL2ltYXAv
cG9wM2QuYwlGcmkgTWFyICA1IDEzOjA3OjI3IDIwMDQKQEAgLTYxNyw2ICs2MTcsNyBAQAogICAg
IGNoYXIgaW5wdXRidWZbODE5Ml07CiAgICAgY2hhciAqcCwgKmFyZzsKICAgICB1bnNpZ25lZCBt
c2cgPSAwOworICAgIHVuc2lnbmVkIHNob3J0IG9iZXlpbmJveGFjbCA9IGNvbmZpZ19nZXRzd2l0
Y2goSU1BUE9QVF9QT1BPQkVZSU5CT1hBQ0wpOwogCiAgICAgZm9yICg7OykgewogCXNpZ25hbHNf
cG9sbCgpOwpAQCAtNzM2LDIwICs3MzcsMjkgQEAKIAl9CiAJZWxzZSBpZiAoIXN0cmNtcChpbnB1
dGJ1ZiwgInN0YXQiKSkgewogCSAgICB1bnNpZ25lZCBubXNncyA9IDAsIHRvdHNpemUgPSAwOwot
CSAgICBpZiAoYXJnKSB7CisJICAgIGlmICgoIShtYm94c3RydWN0Lm15cmlnaHRzICYgQUNMX0xP
T0tVUCkpICYmIG9iZXlpbmJveGFjbCkgeworCSAgICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAi
LUVSUiBbU1lTL1BFUk1dIHN0YXQgJXNcclxuIiwgCisJCQkgIGVycm9yX21lc3NhZ2UoSU1BUF9Q
RVJNSVNTSU9OX0RFTklFRCkpOworCSAgICB9IGVsc2UgeworCSAgICAgIGlmIChhcmcpIHsKIAkJ
cHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIFVuZXhwZWN0ZWQgZXh0cmEgYXJndW1lbnRcclxu
Iik7Ci0JICAgIH0KLQkgICAgZWxzZSB7CisJICAgICAgfQorCSAgICAgIGVsc2UgewogCQlmb3Ig
KG1zZyA9IDE7IG1zZyA8PSBwb3BkX2V4aXN0czsgbXNnKyspIHsKLQkJICAgIGlmICghcG9wZF9t
c2dbbXNnXS5kZWxldGVkKSB7Ci0JCQlubXNncysrOwotCQkJdG90c2l6ZSArPSBwb3BkX21zZ1tt
c2ddLnNpemU7Ci0JCSAgICB9CisJCSAgaWYgKCFwb3BkX21zZ1ttc2ddLmRlbGV0ZWQpIHsKKwkJ
ICAgIG5tc2dzKys7CisJCSAgICB0b3RzaXplICs9IHBvcGRfbXNnW21zZ10uc2l6ZTsKKwkJICB9
CiAJCX0KIAkJcHJvdF9wcmludGYocG9wZF9vdXQsICIrT0sgJXUgJXVcclxuIiwgbm1zZ3MsIHRv
dHNpemUpOworCSAgICAgIH0KIAkgICAgfQogCX0KIAllbHNlIGlmICghc3RyY21wKGlucHV0YnVm
LCAibGlzdCIpKSB7CisJICBpZiAoKCEobWJveHN0cnVjdC5teXJpZ2h0cyAmIEFDTF9MT09LVVAp
KSAmJiBvYmV5aW5ib3hhY2wpIHsKKwkgICAgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIFtT
WVMvUEVSTV0gbGlzdCAlc1xyXG4iLCAKKwkJCWVycm9yX21lc3NhZ2UoSU1BUF9QRVJNSVNTSU9O
X0RFTklFRCkpOworCSAgfSBlbHNlIHsKIAkgICAgaWYgKGFyZykgewogCQltc2cgPSBwYXJzZW51
bSgmYXJnKTsKIAkJaWYgKGFyZykgewpAQCAtNzcyLDM5ICs3ODIsNTAgQEAKIAkJfQogCQlwcm90
X3ByaW50Zihwb3BkX291dCwgIi5cclxuIik7CiAJICAgIH0KKwkgIH0KIAl9CiAJZWxzZSBpZiAo
IXN0cmNtcChpbnB1dGJ1ZiwgInJldHIiKSkgewotCSAgICBpZiAoIWFyZykgcHJvdF9wcmludGYo
cG9wZF9vdXQsICItRVJSIE1pc3NpbmcgYXJndW1lbnRcclxuIik7Ci0JICAgIGVsc2UgewotCQlt
c2cgPSBwYXJzZW51bSgmYXJnKTsKLQkJaWYgKGFyZykgewotCQkgICAgcHJvdF9wcmludGYocG9w
ZF9vdXQsICItRVJSIFVuZXhwZWN0ZWQgZXh0cmEgYXJndW1lbnRcclxuIik7Ci0JCX0KLQkJZWxz
ZSBpZiAobXNnIDwgMSB8fCBtc2cgPiBwb3BkX2V4aXN0cyB8fAotCQkJIHBvcGRfbXNnW21zZ10u
ZGVsZXRlZCkgewotCQkgICAgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIE5vIHN1Y2ggbWVz
c2FnZVxyXG4iKTsKLQkJfQotCQllbHNlIHsKLQkJICAgIGJsYXQobXNnLCAtMSk7Ci0JCX0KLQkg
ICAgfQorCSAgIGlmICgoIShtYm94c3RydWN0Lm15cmlnaHRzICYgQUNMX1JFQUQpKSAmJiBvYmV5
aW5ib3hhY2wpIHsKKwkgICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBbU1lTL1BFUk1d
IHJldHIgJXNcclxuIiwgCisJCQkgZXJyb3JfbWVzc2FnZShJTUFQX1BFUk1JU1NJT05fREVOSUVE
KSk7CisJICAgfSBlbHNlIHsKKwkgICAgIGlmICghYXJnKSBwcm90X3ByaW50Zihwb3BkX291dCwg
Ii1FUlIgTWlzc2luZyBhcmd1bWVudFxyXG4iKTsKKwkgICAgIGVsc2UgeworCSAgICAgICBtc2cg
PSBwYXJzZW51bSgmYXJnKTsKKwkgICAgICAgaWYgKGFyZykgeworCQkgcHJvdF9wcmludGYocG9w
ZF9vdXQsICItRVJSIFVuZXhwZWN0ZWQgZXh0cmEgYXJndW1lbnRcclxuIik7CisJICAgICAgIH0K
KwkgICAgICAgZWxzZSBpZiAobXNnIDwgMSB8fCBtc2cgPiBwb3BkX2V4aXN0cyB8fAorCQkJcG9w
ZF9tc2dbbXNnXS5kZWxldGVkKSB7CisJCSBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgTm8g
c3VjaCBtZXNzYWdlXHJcbiIpOworCSAgICAgICB9CisJICAgICAgIGVsc2UgeworCQkgYmxhdCht
c2csIC0xKTsKKwkgICAgICAgfQorCSAgICAgfQorCSAgIH0KIAl9CiAJZWxzZSBpZiAoIXN0cmNt
cChpbnB1dGJ1ZiwgImRlbGUiKSkgeworCSAgaWYgKCghKG1ib3hzdHJ1Y3QubXlyaWdodHMgJiBB
Q0xfREVMRVRFKSkgJiYgb2JleWluYm94YWNsKSB7CisJICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0
LCAiLUVSUiBbU1lTL1BFUk1dIGRlbGUgJXNcclxuIiwgCisJCQllcnJvcl9tZXNzYWdlKElNQVBf
UEVSTUlTU0lPTl9ERU5JRUQpKTsKKwkgIH0gZWxzZSB7CiAJICAgIGlmICghYXJnKSBwcm90X3By
aW50Zihwb3BkX291dCwgIi1FUlIgTWlzc2luZyBhcmd1bWVudFxyXG4iKTsKIAkgICAgZWxzZSB7
Ci0JCW1zZyA9IHBhcnNlbnVtKCZhcmcpOwotCQlpZiAoYXJnKSB7Ci0JCSAgICBwcm90X3ByaW50
Zihwb3BkX291dCwgIi1FUlIgVW5leHBlY3RlZCBleHRyYSBhcmd1bWVudFxyXG4iKTsKLQkJfQot
CQllbHNlIGlmIChtc2cgPCAxIHx8IG1zZyA+IHBvcGRfZXhpc3RzIHx8Ci0JCQkgcG9wZF9tc2db
bXNnXS5kZWxldGVkKSB7Ci0JCSAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgTm8gc3Vj
aCBtZXNzYWdlXHJcbiIpOwotCQl9CisJICAgICAgbXNnID0gcGFyc2VudW0oJmFyZyk7CisJICAg
ICAgaWYgKGFyZykgeworCQlwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgVW5leHBlY3RlZCBl
eHRyYSBhcmd1bWVudFxyXG4iKTsKKwkgICAgICB9CisJICAgICAgZWxzZSBpZiAobXNnIDwgMSB8
fCBtc2cgPiBwb3BkX2V4aXN0cyB8fAorCQkgICAgICAgcG9wZF9tc2dbbXNnXS5kZWxldGVkKSB7
CisJCXByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBObyBzdWNoIG1lc3NhZ2VcclxuIik7CisJ
ICAgICAgfQogCQllbHNlIHsKLQkJICAgIHBvcGRfbXNnW21zZ10uZGVsZXRlZCA9IDE7Ci0JCSAg
ICBwcm90X3ByaW50Zihwb3BkX291dCwgIitPSyBtZXNzYWdlIGRlbGV0ZWRcclxuIik7CisJCSAg
cG9wZF9tc2dbbXNnXS5kZWxldGVkID0gMTsKKwkJICBwcm90X3ByaW50Zihwb3BkX291dCwgIitP
SyBtZXNzYWdlIGRlbGV0ZWRcclxuIik7CiAJCX0KIAkgICAgfQorCSAgfQogCX0KIAllbHNlIGlm
ICghc3RyY21wKGlucHV0YnVmLCAibm9vcCIpKSB7CiAJICAgIGlmIChhcmcpIHsKQEAgLTgyNywy
NyArODQ4LDM2IEBACiAJfQogCWVsc2UgaWYgKCFzdHJjbXAoaW5wdXRidWYsICJ0b3AiKSkgewog
CSAgICBpbnQgbGluZXM7Ci0KLQkgICAgaWYgKGFyZykgbXNnID0gcGFyc2VudW0oJmFyZyk7Ci0J
ICAgIGlmICghYXJnKSBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgTWlzc2luZyBhcmd1bWVu
dFxyXG4iKTsKLQkgICAgZWxzZSB7CisJICAgIAorCSAgICBpZiAoKCEobWJveHN0cnVjdC5teXJp
Z2h0cyAmIEFDTF9SRUFEKSkgJiYgb2JleWluYm94YWNsKSB7CisJICAgICAgcHJvdF9wcmludGYo
cG9wZF9vdXQsICItRVJSIFtTWVMvUEVSTV0gdG9wICVzXHJcbiIsIAorCQkJICBlcnJvcl9tZXNz
YWdlKElNQVBfUEVSTUlTU0lPTl9ERU5JRUQpKTsKKwkgICAgfSBlbHNlIHsKKwkgICAgICBpZiAo
YXJnKSBtc2cgPSBwYXJzZW51bSgmYXJnKTsKKwkgICAgICBpZiAoIWFyZykgcHJvdF9wcmludGYo
cG9wZF9vdXQsICItRVJSIE1pc3NpbmcgYXJndW1lbnRcclxuIik7CisJICAgICAgZWxzZSB7CiAJ
CWxpbmVzID0gcGFyc2VudW0oJmFyZyk7CiAJCWlmIChhcmcpIHsKLQkJICAgIHByb3RfcHJpbnRm
KHBvcGRfb3V0LCAiLUVSUiBVbmV4cGVjdGVkIGV4dHJhIGFyZ3VtZW50XHJcbiIpOworCQkgIHBy
b3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBVbmV4cGVjdGVkIGV4dHJhIGFyZ3VtZW50XHJcbiIp
OwogCQl9CiAJCWVsc2UgaWYgKG1zZyA8IDEgfHwgbXNnID4gcG9wZF9leGlzdHMgfHwKIAkJCSBw
b3BkX21zZ1ttc2ddLmRlbGV0ZWQpIHsKLQkJICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVS
UiBObyBzdWNoIG1lc3NhZ2VcclxuIik7CisJCSAgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJS
IE5vIHN1Y2ggbWVzc2FnZVxyXG4iKTsKIAkJfQogCQllbHNlIGlmIChsaW5lcyA8IDApIHsKLQkJ
ICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBJbnZhbGlkIG51bWJlciBvZiBsaW5lc1xy
XG4iKTsKKwkJICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgSW52YWxpZCBudW1iZXIgb2Yg
bGluZXNcclxuIik7CiAJCX0KIAkJZWxzZSB7Ci0JCSAgICBibGF0KG1zZywgbGluZXMpOworCQkg
IGJsYXQobXNnLCBsaW5lcyk7CiAJCX0KKwkgICAgICB9CiAJICAgIH0KIAl9CiAJZWxzZSBpZiAo
IXN0cmNtcChpbnB1dGJ1ZiwgInVpZGwiKSkgeworCSAgaWYgKCghKG1ib3hzdHJ1Y3QubXlyaWdo
dHMgJiBBQ0xfTE9PS1VQKSkgJiYgb2JleWluYm94YWNsKSB7CisJICAgIHByb3RfcHJpbnRmKHBv
cGRfb3V0LCAiLUVSUiBbU1lTL1BFUk1dIHVpZGwgJXNcclxuIiwgCisJCQllcnJvcl9tZXNzYWdl
KElNQVBfUEVSTUlTU0lPTl9ERU5JRUQpKTsKKwkgIH0gZWxzZSB7CiAJICAgIGlmIChhcmcpIHsK
IAkJbXNnID0gcGFyc2VudW0oJmFyZyk7CiAJCWlmIChhcmcpIHsKQEAgLTg4NCw2ICs5MTQsNyBA
QAogCQl9CiAJCXByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLlxyXG4iKTsKIAkgICAgfQorCSAgfQog
CX0KIAllbHNlIHsKIAkgICAgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIFVucmVjb2duaXpl
ZCBjb21tYW5kXHJcbiIpOwpAQCAtMTM3MCw3ICsxNDAxLDEwIEBACiAKIAlwb3BkX2xvZ2luX3Rp
bWUgPSB0aW1lKDApOwogCi0JciA9IG1haWxib3hfb3Blbl9oZWFkZXIoaW5ib3huYW1lLCAwLCAm
bWJveHN0cnVjdCk7CisgCXIgPSAoY29uZmlnX2dldHN3aXRjaChJTUFQT1BUX1BPUE9CRVlJTkJP
WEFDTCkpID8KKyAJICBtYWlsYm94X29wZW5faGVhZGVyKGluYm94bmFtZSwgYXV0aF9uZXdzdGF0
ZSh1c2VyaWQpLCAmbWJveHN0cnVjdCkgOgorIAkgIG1haWxib3hfb3Blbl9oZWFkZXIoaW5ib3hu
YW1lLCAwLCAmbWJveHN0cnVjdCk7CisKIAlpZiAocikgewogCSAgICBzbGVlcCgzKTsKIAkgICAg
c3lzbG9nKExPR19FUlIsICJVbmFibGUgdG8gb3BlbiBtYWlsZHJvcCBmb3IgJXMiLCBwb3BkX3Vz
ZXJpZCk7CkBAIC0xMzc5LDYgKzE0MTMsMTcgQEAKIAl9CiAKIAlyID0gbWFpbGJveF9vcGVuX2lu
ZGV4KCZtYm94c3RydWN0KTsKKworCS8qIG1ha2Ugc3VyZSB3ZSBoYXZlIHBlcm1pc3Npb24gdG8g
ZG8gYW55dGhpbmcgKi8KKwlpZiAoY29uZmlnX2dldHN3aXRjaChJTUFQT1BUX1BPUE9CRVlJTkJP
WEFDTCkpIHsKKwkgIGlmICghciAmJiAhKG1ib3hzdHJ1Y3QubXlyaWdodHMgJiAKKwkJICAgICAg
KEFDTF9SRUFEIHwgQUNMX0xPT0tVUCB8IEFDTF9ERUxFVEUpKSkgeworCSAgICBtYWlsYm94X2Ns
b3NlKCZtYm94c3RydWN0KTsKKwkgICAgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIFtTWVMv
UEVSTV0gTG9naW4gJXNcclxuIiwgZXJyb3JfbWVzc2FnZShJTUFQX1BFUk1JU1NJT05fREVOSUVE
KSk7CisJICAgIGdvdG8gZmFpbDsKKwkgIH0KKwl9IC8qIGVuZCBlZGl0ICovCisKIAlpZiAoIXIp
IHIgPSBtYWlsYm94X2xvY2tfcG9wKCZtYm94c3RydWN0KTsKIAlpZiAocikgewogCSAgICBtYWls
Ym94X2Nsb3NlKCZtYm94c3RydWN0KTsKZGlmZiAtTmF1ciBjeXJ1cy1pbWFwZC5jdnMyMDA0MDMw
NS9saWIvaW1hcG9wdGlvbnMgY3lydXMtaW1hcGQuY3ZzMjAwNDAzMDUucG9wb2JleWluYm94YWNs
LnBhdGNoL2xpYi9pbWFwb3B0aW9ucwotLS0gY3lydXMtaW1hcGQuY3ZzMjAwNDAzMDUvbGliL2lt
YXBvcHRpb25zCVRodSBGZWIgMjYgMTc6NDE6MzIgMjAwNAorKysgY3lydXMtaW1hcGQuY3ZzMjAw
NDAzMDUucG9wb2JleWluYm94YWNsLnBhdGNoL2xpYi9pbWFwb3B0aW9ucwlGcmkgTWFyICA1IDEz
OjA2OjQ5IDIwMDQKQEAgLTU0NSw2ICs1NDUsMjMgQEAKIC8qIFNldCB0aGUgbWluaW11bSBhbW91
bnQgb2YgdGltZSB0aGUgc2VydmVyIGZvcmNlcyB1c2VycyB0byB3YWl0CiAgICBiZXR3ZWVuIHN1
Y2Nlc3NpdmUgUE9QIGxvZ2lucywgaW4gbWludXRlcy4gIFRoZSBkZWZhdWx0IGlzIDAuICovIAog
Cit7ICJwb3BvYmV5aW5ib3hhY2wiLCAwLCBTV0lUQ0ggfQorLyogRW5mb3JjZSB0aGUgSU1BUCBB
Q0xzIGluIHRoZSBwb3AzIGRhZW1vbi4gIER1ZSB0byBwcm90b2NvbCBsaW1pdGF0aW9ucywKKyAg
IHRoZSBvbmx5IEFDTHMgdGhhdCBoYXZlIGVmZmVjdCB3aXRoaW4gdGhlIGRhZW1vbiBhcmUgJ2xy
ZCcuICBJZiBhIHVzZXIKKyAgIGRvZXMgbm90IGhhdmUgYW55IG9mIHRoZXNlIHBlcm1pc3Npb25z
IGF0IGxvZ29uLCB0aGV5IHdpbGwgcmVjaWV2ZQorICAgYW4gZXJyb3IgYWZ0ZXIgdGhlICd1c2Vy
L3Bhc3MnIHNlcXVlbmNlLiAgT3RoZXJ3aXNlLCB0aGUgbG9naW4gd2lsbAorICAgc3VjY2VlZCBh
bmQgdGhlIHBlcm1pc3Npb25zIHdpbGwgYmUgZW5mb3JjZWQgZnJvbSB3aXRoaW4uICBCeSBkZWZh
dWx0CisgICB0aGlzIG9wdGlvbiBpcyBkaWFibGVkLCBhbmQgYSB1c2VyIG1heSByZXRyaWV2ZSBh
bmQgZXhwdW5nZSB0aGVpciBtYWlsCisgICB2aWEgcG9wMyBldmVuIGlmIHRoZXkgZG8gbm90IGhh
dmUgdGhlIHByb3BlciBwZXJtaXNzaW9ucyB2aWEgSU1BUC4gIAorICAgTm90ZSwgaG93ZXZlciwg
YSBzYXZ2eSBvd25lciBjYW4gZ2l2ZSB0aGVtc2VsdmVzIHBlcm1pc3Npb25zIGJhY2sgaWYKKyAg
IHRoZXkgaGF2ZSB0aGUgaW1wbGljaXQgJ2EnIEFDTCB2aWEgdGhlIFxmSWltcGxpY2l0X293bmVy
X3JpZ2h0c1xmUiAKKyAgIG9wdGlvbiAod2hpY2ggdGhleSBkbywgYnkgZGVmYXVsdCkuICBBbHNv
IG5vdGUgdGhhdCBub3QgYWxsIGNsaWVudHMKKyAgIHdpbGwgZGlzcGxheSB0aGUgZXJyb3IgbWVz
c2FnZSB0ZXh0IGZyb20gdGhlIHBvcCBzZXJ2ZXIgaWYgYW4gZXJyb3IgCisgICBpcyByZWNpZXZl
ZCBhZnRlciB0aGV5IGhhdmUgc3VjY2Vzc2Z1bHkgYXV0aGVudGljYXRlZC4KKy5icgorLnNwCisg
ICBBQ0xzIGVuZm9yY2VkOiBcZkJsXGZSOnN0YXQsbGlzdCx1aWRsIFxmQnJcZlI6cmV0cix0b3Ag
XGZCZFxmUjpkZWxlICovCisKIHsgInBvcHRpbWVvdXQiLCAxMCwgSU5UIH0KIC8qIFNldCB0aGUg
bGVuZ3RoIG9mIHRoZSBQT1Agc2VydmVyJ3MgaW5hY3Rpdml0eSBhdXRvbG9nb3V0IHRpbWVyLCAg
ICAKICAgIGluIG1pbnV0ZXMuICBUaGUgbWluaW11bSB2YWx1ZSBpcyAxMCwgdGhlIGRlZmF1bHQu
ICovCg==
</data>        

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>284</attachid>
            <date>2004-06-22 16:39 EDT</date>
            <desc>Make pop daemon obey IMAP permissions</desc>
            <filename>cyrus-imapd-popobeyinboxacl.patch</filename>
            <type>text/plain</type>
            <size>7709</size>
            <attacher>conteb@rpi.edu</attacher>
            
              <data encoding="base64">ZGlmZiAtTmF1ciBjeXJ1cy1pbWFwZC0yLjIuNS9pbWFwL3BvcDNkLmMgY3lydXMtaW1hcGQtMi4y
LjUucG9wb2JleWluYm94YWNsL2ltYXAvcG9wM2QuYwotLS0gY3lydXMtaW1hcGQtMi4yLjUvaW1h
cC9wb3AzZC5jCTIwMDQtMDUtMjEgMjM6NDU6NTIuMDAwMDAwMDAwIC0wNDAwCisrKyBjeXJ1cy1p
bWFwZC0yLjIuNS5wb3BvYmV5aW5ib3hhY2wvaW1hcC9wb3AzZC5jCTIwMDQtMDYtMDQgMTI6MDE6
MzAuMDAwMDAwMDAwIC0wNDAwCkBAIC02MjMsNiArNjIzLDcgQEAKICAgICBjaGFyIGlucHV0YnVm
WzgxOTJdOwogICAgIGNoYXIgKnAsICphcmc7CiAgICAgdW5zaWduZWQgbXNnID0gMDsKKyAgICB1
bnNpZ25lZCBzaG9ydCBvYmV5aW5ib3hhY2wgPSBjb25maWdfZ2V0c3dpdGNoKElNQVBPUFRfUE9Q
T0JFWUlOQk9YQUNMKTsKIAogICAgIGZvciAoOzspIHsKIAlzaWduYWxzX3BvbGwoKTsKQEAgLTc0
MiwyMCArNzQzLDI5IEBACiAJfQogCWVsc2UgaWYgKCFzdHJjbXAoaW5wdXRidWYsICJzdGF0Iikp
IHsKIAkgICAgdW5zaWduZWQgbm1zZ3MgPSAwLCB0b3RzaXplID0gMDsKLQkgICAgaWYgKGFyZykg
eworCSAgICBpZiAoKCEobWJveHN0cnVjdC5teXJpZ2h0cyAmIEFDTF9MT09LVVApKSAmJiBvYmV5
aW5ib3hhY2wpIHsKKwkgICAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgW1NZUy9QRVJN
XSBzdGF0ICVzXHJcbiIsIAorCQkJICBlcnJvcl9tZXNzYWdlKElNQVBfUEVSTUlTU0lPTl9ERU5J
RUQpKTsKKwkgICAgfSBlbHNlIHsKKwkgICAgICBpZiAoYXJnKSB7CiAJCXByb3RfcHJpbnRmKHBv
cGRfb3V0LCAiLUVSUiBVbmV4cGVjdGVkIGV4dHJhIGFyZ3VtZW50XHJcbiIpOwotCSAgICB9Ci0J
ICAgIGVsc2UgeworCSAgICAgIH0KKwkgICAgICBlbHNlIHsKIAkJZm9yIChtc2cgPSAxOyBtc2cg
PD0gcG9wZF9leGlzdHM7IG1zZysrKSB7Ci0JCSAgICBpZiAoIXBvcGRfbXNnW21zZ10uZGVsZXRl
ZCkgewotCQkJbm1zZ3MrKzsKLQkJCXRvdHNpemUgKz0gcG9wZF9tc2dbbXNnXS5zaXplOwotCQkg
ICAgfQorCQkgIGlmICghcG9wZF9tc2dbbXNnXS5kZWxldGVkKSB7CisJCSAgICBubXNncysrOwor
CQkgICAgdG90c2l6ZSArPSBwb3BkX21zZ1ttc2ddLnNpemU7CisJCSAgfQogCQl9CiAJCXByb3Rf
cHJpbnRmKHBvcGRfb3V0LCAiK09LICV1ICV1XHJcbiIsIG5tc2dzLCB0b3RzaXplKTsKKwkgICAg
ICB9CiAJICAgIH0KIAl9CiAJZWxzZSBpZiAoIXN0cmNtcChpbnB1dGJ1ZiwgImxpc3QiKSkgewor
CSAgaWYgKCghKG1ib3hzdHJ1Y3QubXlyaWdodHMgJiBBQ0xfTE9PS1VQKSkgJiYgb2JleWluYm94
YWNsKSB7CisJICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBbU1lTL1BFUk1dIGxpc3Qg
JXNcclxuIiwgCisJCQllcnJvcl9tZXNzYWdlKElNQVBfUEVSTUlTU0lPTl9ERU5JRUQpKTsKKwkg
IH0gZWxzZSB7CiAJICAgIGlmIChhcmcpIHsKIAkJbXNnID0gcGFyc2VudW0oJmFyZyk7CiAJCWlm
IChhcmcpIHsKQEAgLTc3OCwzOSArNzg4LDUwIEBACiAJCX0KIAkJcHJvdF9wcmludGYocG9wZF9v
dXQsICIuXHJcbiIpOwogCSAgICB9CisJICB9CiAJfQogCWVsc2UgaWYgKCFzdHJjbXAoaW5wdXRi
dWYsICJyZXRyIikpIHsKLQkgICAgaWYgKCFhcmcpIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVS
UiBNaXNzaW5nIGFyZ3VtZW50XHJcbiIpOwotCSAgICBlbHNlIHsKLQkJbXNnID0gcGFyc2VudW0o
JmFyZyk7Ci0JCWlmIChhcmcpIHsKLQkJICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBV
bmV4cGVjdGVkIGV4dHJhIGFyZ3VtZW50XHJcbiIpOwotCQl9Ci0JCWVsc2UgaWYgKG1zZyA8IDEg
fHwgbXNnID4gcG9wZF9leGlzdHMgfHwKLQkJCSBwb3BkX21zZ1ttc2ddLmRlbGV0ZWQpIHsKLQkJ
ICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBObyBzdWNoIG1lc3NhZ2VcclxuIik7Ci0J
CX0KLQkJZWxzZSB7Ci0JCSAgICBibGF0KG1zZywgLTEpOwotCQl9Ci0JICAgIH0KKwkgICBpZiAo
KCEobWJveHN0cnVjdC5teXJpZ2h0cyAmIEFDTF9SRUFEKSkgJiYgb2JleWluYm94YWNsKSB7CisJ
ICAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgW1NZUy9QRVJNXSByZXRyICVzXHJcbiIs
IAorCQkJIGVycm9yX21lc3NhZ2UoSU1BUF9QRVJNSVNTSU9OX0RFTklFRCkpOworCSAgIH0gZWxz
ZSB7CisJICAgICBpZiAoIWFyZykgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIE1pc3Npbmcg
YXJndW1lbnRcclxuIik7CisJICAgICBlbHNlIHsKKwkgICAgICAgbXNnID0gcGFyc2VudW0oJmFy
Zyk7CisJICAgICAgIGlmIChhcmcpIHsKKwkJIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBV
bmV4cGVjdGVkIGV4dHJhIGFyZ3VtZW50XHJcbiIpOworCSAgICAgICB9CisJICAgICAgIGVsc2Ug
aWYgKG1zZyA8IDEgfHwgbXNnID4gcG9wZF9leGlzdHMgfHwKKwkJCXBvcGRfbXNnW21zZ10uZGVs
ZXRlZCkgeworCQkgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIE5vIHN1Y2ggbWVzc2FnZVxy
XG4iKTsKKwkgICAgICAgfQorCSAgICAgICBlbHNlIHsKKwkJIGJsYXQobXNnLCAtMSk7CisJICAg
ICAgIH0KKwkgICAgIH0KKwkgICB9CiAJfQogCWVsc2UgaWYgKCFzdHJjbXAoaW5wdXRidWYsICJk
ZWxlIikpIHsKKwkgIGlmICgoIShtYm94c3RydWN0Lm15cmlnaHRzICYgQUNMX0RFTEVURSkpICYm
IG9iZXlpbmJveGFjbCkgeworCSAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgW1NZUy9Q
RVJNXSBkZWxlICVzXHJcbiIsIAorCQkJZXJyb3JfbWVzc2FnZShJTUFQX1BFUk1JU1NJT05fREVO
SUVEKSk7CisJICB9IGVsc2UgewogCSAgICBpZiAoIWFyZykgcHJvdF9wcmludGYocG9wZF9vdXQs
ICItRVJSIE1pc3NpbmcgYXJndW1lbnRcclxuIik7CiAJICAgIGVsc2UgewotCQltc2cgPSBwYXJz
ZW51bSgmYXJnKTsKLQkJaWYgKGFyZykgewotCQkgICAgcHJvdF9wcmludGYocG9wZF9vdXQsICIt
RVJSIFVuZXhwZWN0ZWQgZXh0cmEgYXJndW1lbnRcclxuIik7Ci0JCX0KLQkJZWxzZSBpZiAobXNn
IDwgMSB8fCBtc2cgPiBwb3BkX2V4aXN0cyB8fAotCQkJIHBvcGRfbXNnW21zZ10uZGVsZXRlZCkg
ewotCQkgICAgcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIE5vIHN1Y2ggbWVzc2FnZVxyXG4i
KTsKLQkJfQorCSAgICAgIG1zZyA9IHBhcnNlbnVtKCZhcmcpOworCSAgICAgIGlmIChhcmcpIHsK
KwkJcHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIFVuZXhwZWN0ZWQgZXh0cmEgYXJndW1lbnRc
clxuIik7CisJICAgICAgfQorCSAgICAgIGVsc2UgaWYgKG1zZyA8IDEgfHwgbXNnID4gcG9wZF9l
eGlzdHMgfHwKKwkJICAgICAgIHBvcGRfbXNnW21zZ10uZGVsZXRlZCkgeworCQlwcm90X3ByaW50
Zihwb3BkX291dCwgIi1FUlIgTm8gc3VjaCBtZXNzYWdlXHJcbiIpOworCSAgICAgIH0KIAkJZWxz
ZSB7Ci0JCSAgICBwb3BkX21zZ1ttc2ddLmRlbGV0ZWQgPSAxOwotCQkgICAgcHJvdF9wcmludGYo
cG9wZF9vdXQsICIrT0sgbWVzc2FnZSBkZWxldGVkXHJcbiIpOworCQkgIHBvcGRfbXNnW21zZ10u
ZGVsZXRlZCA9IDE7CisJCSAgcHJvdF9wcmludGYocG9wZF9vdXQsICIrT0sgbWVzc2FnZSBkZWxl
dGVkXHJcbiIpOwogCQl9CiAJICAgIH0KKwkgIH0KIAl9CiAJZWxzZSBpZiAoIXN0cmNtcChpbnB1
dGJ1ZiwgIm5vb3AiKSkgewogCSAgICBpZiAoYXJnKSB7CkBAIC04MzMsMjcgKzg1NCwzNiBAQAog
CX0KIAllbHNlIGlmICghc3RyY21wKGlucHV0YnVmLCAidG9wIikpIHsKIAkgICAgaW50IGxpbmVz
OwotCi0JICAgIGlmIChhcmcpIG1zZyA9IHBhcnNlbnVtKCZhcmcpOwotCSAgICBpZiAoIWFyZykg
cHJvdF9wcmludGYocG9wZF9vdXQsICItRVJSIE1pc3NpbmcgYXJndW1lbnRcclxuIik7Ci0JICAg
IGVsc2UgeworCSAgICAKKwkgICAgaWYgKCghKG1ib3hzdHJ1Y3QubXlyaWdodHMgJiBBQ0xfUkVB
RCkpICYmIG9iZXlpbmJveGFjbCkgeworCSAgICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVS
UiBbU1lTL1BFUk1dIHRvcCAlc1xyXG4iLCAKKwkJCSAgZXJyb3JfbWVzc2FnZShJTUFQX1BFUk1J
U1NJT05fREVOSUVEKSk7CisJICAgIH0gZWxzZSB7CisJICAgICAgaWYgKGFyZykgbXNnID0gcGFy
c2VudW0oJmFyZyk7CisJICAgICAgaWYgKCFhcmcpIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVS
UiBNaXNzaW5nIGFyZ3VtZW50XHJcbiIpOworCSAgICAgIGVsc2UgewogCQlsaW5lcyA9IHBhcnNl
bnVtKCZhcmcpOwogCQlpZiAoYXJnKSB7Ci0JCSAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1F
UlIgVW5leHBlY3RlZCBleHRyYSBhcmd1bWVudFxyXG4iKTsKKwkJICBwcm90X3ByaW50Zihwb3Bk
X291dCwgIi1FUlIgVW5leHBlY3RlZCBleHRyYSBhcmd1bWVudFxyXG4iKTsKIAkJfQogCQllbHNl
IGlmIChtc2cgPCAxIHx8IG1zZyA+IHBvcGRfZXhpc3RzIHx8CiAJCQkgcG9wZF9tc2dbbXNnXS5k
ZWxldGVkKSB7Ci0JCSAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgTm8gc3VjaCBtZXNz
YWdlXHJcbiIpOworCQkgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBObyBzdWNoIG1lc3Nh
Z2VcclxuIik7CiAJCX0KIAkJZWxzZSBpZiAobGluZXMgPCAwKSB7Ci0JCSAgICBwcm90X3ByaW50
Zihwb3BkX291dCwgIi1FUlIgSW52YWxpZCBudW1iZXIgb2YgbGluZXNcclxuIik7CisJCSAgcHJv
dF9wcmludGYocG9wZF9vdXQsICItRVJSIEludmFsaWQgbnVtYmVyIG9mIGxpbmVzXHJcbiIpOwog
CQl9CiAJCWVsc2UgewotCQkgICAgYmxhdChtc2csIGxpbmVzKTsKKwkJICBibGF0KG1zZywgbGlu
ZXMpOwogCQl9CisJICAgICAgfQogCSAgICB9CiAJfQogCWVsc2UgaWYgKCFzdHJjbXAoaW5wdXRi
dWYsICJ1aWRsIikpIHsKKwkgIGlmICgoIShtYm94c3RydWN0Lm15cmlnaHRzICYgQUNMX0xPT0tV
UCkpICYmIG9iZXlpbmJveGFjbCkgeworCSAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIg
W1NZUy9QRVJNXSB1aWRsICVzXHJcbiIsIAorCQkJZXJyb3JfbWVzc2FnZShJTUFQX1BFUk1JU1NJ
T05fREVOSUVEKSk7CisJICB9IGVsc2UgewogCSAgICBpZiAoYXJnKSB7CiAJCW1zZyA9IHBhcnNl
bnVtKCZhcmcpOwogCQlpZiAoYXJnKSB7CkBAIC04OTAsNiArOTIwLDcgQEAKIAkJfQogCQlwcm90
X3ByaW50Zihwb3BkX291dCwgIi5cclxuIik7CiAJICAgIH0KKwkgIH0KIAl9CiAJZWxzZSB7CiAJ
ICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBVbnJlY29nbml6ZWQgY29tbWFuZFxyXG4i
KTsKQEAgLTEzNzYsNyArMTQwNywxMCBAQAogCiAJcG9wZF9sb2dpbl90aW1lID0gdGltZSgwKTsK
IAotCXIgPSBtYWlsYm94X29wZW5faGVhZGVyKGluYm94bmFtZSwgMCwgJm1ib3hzdHJ1Y3QpOwor
IAlyID0gKGNvbmZpZ19nZXRzd2l0Y2goSU1BUE9QVF9QT1BPQkVZSU5CT1hBQ0wpKSA/CisgCSAg
bWFpbGJveF9vcGVuX2hlYWRlcihpbmJveG5hbWUsIGF1dGhfbmV3c3RhdGUodXNlcmlkKSwgJm1i
b3hzdHJ1Y3QpIDoKKyAJICBtYWlsYm94X29wZW5faGVhZGVyKGluYm94bmFtZSwgMCwgJm1ib3hz
dHJ1Y3QpOworCiAJaWYgKHIpIHsKIAkgICAgc2xlZXAoMyk7CiAJICAgIHN5c2xvZyhMT0dfRVJS
LCAiVW5hYmxlIHRvIG9wZW4gbWFpbGRyb3AgZm9yICVzIiwgcG9wZF91c2VyaWQpOwpAQCAtMTM4
NSw2ICsxNDE5LDE3IEBACiAJfQogCiAJciA9IG1haWxib3hfb3Blbl9pbmRleCgmbWJveHN0cnVj
dCk7CisKKwkvKiBtYWtlIHN1cmUgd2UgaGF2ZSBwZXJtaXNzaW9uIHRvIGRvIGFueXRoaW5nICov
CisJaWYgKGNvbmZpZ19nZXRzd2l0Y2goSU1BUE9QVF9QT1BPQkVZSU5CT1hBQ0wpKSB7CisJICBp
ZiAoIXIgJiYgIShtYm94c3RydWN0Lm15cmlnaHRzICYgCisJCSAgICAgIChBQ0xfUkVBRCB8IEFD
TF9MT09LVVAgfCBBQ0xfREVMRVRFKSkpIHsKKwkgICAgbWFpbGJveF9jbG9zZSgmbWJveHN0cnVj
dCk7CisJICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBbU1lTL1BFUk1dIExvZ2luICVz
XHJcbiIsIGVycm9yX21lc3NhZ2UoSU1BUF9QRVJNSVNTSU9OX0RFTklFRCkpOworCSAgICBnb3Rv
IGZhaWw7CisJICB9CisJfSAvKiBlbmQgZWRpdCAqLworCiAJaWYgKCFyKSByID0gbWFpbGJveF9s
b2NrX3BvcCgmbWJveHN0cnVjdCk7CiAJaWYgKHIpIHsKIAkgICAgbWFpbGJveF9jbG9zZSgmbWJv
eHN0cnVjdCk7CmRpZmYgLU5hdXIgY3lydXMtaW1hcGQtMi4yLjUvbGliL2ltYXBvcHRpb25zIGN5
cnVzLWltYXBkLTIuMi41LnBvcG9iZXlpbmJveGFjbC9saWIvaW1hcG9wdGlvbnMKLS0tIGN5cnVz
LWltYXBkLTIuMi41L2xpYi9pbWFwb3B0aW9ucwkyMDA0LTA1LTI0IDIwOjAzOjA1LjAwMDAwMDAw
MCAtMDQwMAorKysgY3lydXMtaW1hcGQtMi4yLjUucG9wb2JleWluYm94YWNsL2xpYi9pbWFwb3B0
aW9ucwkyMDA0LTA2LTA0IDEyOjAxOjMwLjAwMDAwMDAwMCAtMDQwMApAQCAtNTgzLDYgKzU4Mywy
MyBAQAogLyogU2V0IHRoZSBtaW5pbXVtIGFtb3VudCBvZiB0aW1lIHRoZSBzZXJ2ZXIgZm9yY2Vz
IHVzZXJzIHRvIHdhaXQKICAgIGJldHdlZW4gc3VjY2Vzc2l2ZSBQT1AgbG9naW5zLCBpbiBtaW51
dGVzLiAqLyAKIAoreyAicG9wb2JleWluYm94YWNsIiwgMCwgU1dJVENIIH0KKy8qIEVuZm9yY2Ug
dGhlIElNQVAgQUNMcyBpbiB0aGUgcG9wMyBkYWVtb24uICBEdWUgdG8gcHJvdG9jb2wgbGltaXRh
dGlvbnMsCisgICB0aGUgb25seSBBQ0xzIHRoYXQgaGF2ZSBlZmZlY3Qgd2l0aGluIHRoZSBkYWVt
b24gYXJlICdscmQnLiAgSWYgYSB1c2VyCisgICBkb2VzIG5vdCBoYXZlIGFueSBvZiB0aGVzZSBw
ZXJtaXNzaW9ucyBhdCBsb2dvbiwgdGhleSB3aWxsIHJlY2lldmUKKyAgIGFuIGVycm9yIGFmdGVy
IHRoZSAndXNlci9wYXNzJyBzZXF1ZW5jZS4gIE90aGVyd2lzZSwgdGhlIGxvZ2luIHdpbGwKKyAg
IHN1Y2NlZWQgYW5kIHRoZSBwZXJtaXNzaW9ucyB3aWxsIGJlIGVuZm9yY2VkIGZyb20gd2l0aGlu
LiAgQnkgZGVmYXVsdAorICAgdGhpcyBvcHRpb24gaXMgZGlhYmxlZCwgYW5kIGEgdXNlciBtYXkg
cmV0cmlldmUgYW5kIGV4cHVuZ2UgdGhlaXIgbWFpbAorICAgdmlhIHBvcDMgZXZlbiBpZiB0aGV5
IGRvIG5vdCBoYXZlIHRoZSBwcm9wZXIgcGVybWlzc2lvbnMgdmlhIElNQVAuICAKKyAgIE5vdGUs
IGhvd2V2ZXIsIGEgc2F2dnkgb3duZXIgY2FuIGdpdmUgdGhlbXNlbHZlcyBwZXJtaXNzaW9ucyBi
YWNrIGlmCisgICB0aGV5IGhhdmUgdGhlIGltcGxpY2l0ICdhJyBBQ0wgdmlhIHRoZSBcZklpbXBs
aWNpdF9vd25lcl9yaWdodHNcZlIgCisgICBvcHRpb24gKHdoaWNoIHRoZXkgZG8sIGJ5IGRlZmF1
bHQpLiAgQWxzbyBub3RlIHRoYXQgbm90IGFsbCBjbGllbnRzCisgICB3aWxsIGRpc3BsYXkgdGhl
IGVycm9yIG1lc3NhZ2UgdGV4dCBmcm9tIHRoZSBwb3Agc2VydmVyIGlmIGFuIGVycm9yIAorICAg
aXMgcmVjaWV2ZWQgYWZ0ZXIgdGhleSBoYXZlIHN1Y2Nlc3NmdWx5IGF1dGhlbnRpY2F0ZWQuCisu
YnIKKy5zcAorICAgQUNMcyBlbmZvcmNlZDogXGZCbFxmUjpzdGF0LGxpc3QsdWlkbCBcZkJyXGZS
OnJldHIsdG9wIFxmQmRcZlI6ZGVsZSAqLworCiB7ICJwb3B0aW1lb3V0IiwgMTAsIElOVCB9CiAv
KiBTZXQgdGhlIGxlbmd0aCBvZiB0aGUgUE9QIHNlcnZlcidzIGluYWN0aXZpdHkgYXV0b2xvZ291
dCB0aW1lciwgICAgCiAgICBpbiBtaW51dGVzLiAgVGhlIG1pbmltdW0gdmFsdWUgaXMgMTAsIHRo
ZSBkZWZhdWx0LiAqLwo=
</data>        

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>287</attachid>
            <date>2004-06-28 09:54 EDT</date>
            <desc>alternative patch against 2.3</desc>
            <filename>popuseacl.patch</filename>
            <type>text/plain</type>
            <size>5338</size>
            <attacher>ken@oceana.com</attacher>
            
              <data encoding="base64">SW5kZXg6IGltYXAvcG9wM2QuYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvYWZzL2FuZHJldy9zeXN0
ZW0vY3ZzL3NyYy9jeXJ1cy9pbWFwL3BvcDNkLmMsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMTQ0
LjIuMjQKZGlmZiAtdSAtcjEuMTQ0LjIuMjQgcG9wM2QuYwotLS0gaW1hcC9wb3AzZC5jCTMxIE1h
eSAyMDA0IDE4OjIyOjU1IC0wMDAwCTEuMTQ0LjIuMjQKKysrIGltYXAvcG9wM2QuYwkyOCBKdW4g
MjAwNCAxMzo1MTo0NSAtMDAwMApAQCAtMTA5LDYgKzEwOSw3IEBACiAKIGNoYXIgKnBvcGRfdXNl
cmlkID0gMCwgKnBvcGRfc3ViZm9sZGVyID0gMDsKIHN0cnVjdCBtYWlsYm94ICpwb3BkX21haWxi
b3ggPSAwOworc3RydWN0IGF1dGhfc3RhdGUgKnBvcGRfYXV0aHN0YXRlID0gMDsKIHN0cnVjdCBz
b2NrYWRkcl9zdG9yYWdlIHBvcGRfbG9jYWxhZGRyLCBwb3BkX3JlbW90ZWFkZHI7CiBpbnQgcG9w
ZF9oYXZlYWRkciA9IDA7CiBjaGFyIHBvcGRfY2xpZW50aG9zdFtOSV9NQVhIT1NUKjIrMV0gPSAi
W2xvY2FsXSI7CkBAIC0xMzIsNyArMTMzLDcgQEAKIAogLyogdGhlIHNhc2wgcHJveHkgcG9saWN5
IGNvbnRleHQgKi8KIHN0YXRpYyBzdHJ1Y3QgcHJveHlfY29udGV4dCBwb3BkX3Byb3h5Y3R4ID0g
ewotICAgIDAsIDEsIE5VTEwsIE5VTEwsIE5VTEwKKyAgICAwLCAxLCAmcG9wZF9hdXRoc3RhdGUs
IE5VTEwsIE5VTEwKIH07CiAKIC8qIHNpZ25hbCB0byBjb25maWcuYyAqLwpAQCAtMzM2LDYgKzMz
NywxMCBAQAogCWZyZWUocG9wZF9zdWJmb2xkZXIpOwogCXBvcGRfc3ViZm9sZGVyID0gTlVMTDsK
ICAgICB9CisgICAgaWYgKHBvcGRfYXV0aHN0YXRlKSB7CisJYXV0aF9mcmVlc3RhdGUocG9wZF9h
dXRoc3RhdGUpOworCXBvcGRfYXV0aHN0YXRlID0gTlVMTDsKKyAgICB9CiAgICAgaWYgKHBvcGRf
c2FzbGNvbm4pIHsKIAlzYXNsX2Rpc3Bvc2UoJnBvcGRfc2FzbGNvbm4pOwogCXBvcGRfc2FzbGNv
bm4gPSBOVUxMOwpAQCAtODkyLDYgKzg5NywxMSBAQAogCX0KIAllbHNlIGlmICghc3RyY21wKGlu
cHV0YnVmLCAiZGVsZSIpKSB7CiAJICAgIGlmICghYXJnKSBwcm90X3ByaW50Zihwb3BkX291dCwg
Ii1FUlIgTWlzc2luZyBhcmd1bWVudFxyXG4iKTsKKwkgICAgZWxzZSBpZiAoY29uZmlnX2dldHN3
aXRjaChJTUFQT1BUX1BPUFVTRUFDTCkgJiYKKwkJICAgICAhKG1ib3hzdHJ1Y3QubXlyaWdodHMg
JiBBQ0xfREVMRVRFKSkgeworCQlwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgW1NZUy9QRVJN
XSAlc1xyXG4iLAorCQkJICAgIGVycm9yX21lc3NhZ2UoSU1BUF9QRVJNSVNTSU9OX0RFTklFRCkp
OworCSAgICB9CiAJICAgIGVsc2UgewogCQltc2cgPSBwYXJzZW51bSgmYXJnKTsKIAkJaWYgKGFy
ZykgewpAQCAtMTE0NCw2ICsxMTU0LDggQEAKIAkgICBwb3BkX3VzZXJpZCwgcG9wZF9zdWJmb2xk
ZXIgPyBwb3BkX3N1YmZvbGRlciA6ICIiLAogCSAgIHBvcGRfc3RhcnR0bHNfZG9uZSA/ICIrVExT
IiA6ICIiLCAiVXNlciBsb2dnZWQgaW4iKTsKIAorICAgIHBvcGRfYXV0aHN0YXRlID0gYXV0aF9u
ZXdzdGF0ZShwb3BkX3VzZXJpZCk7CisKICAgICBvcGVuaW5ib3goKTsKIH0KIApAQCAtMTI1Niw2
ICsxMjY4LDggQEAKIAl9CiAgICAgfQogCisgICAgcG9wZF9hdXRoc3RhdGUgPSBhdXRoX25ld3N0
YXRlKHBvcGRfdXNlcmlkKTsKKwogICAgIG9wZW5pbmJveCgpOwogfQogCkBAIC0xNDU3LDggKzE0
NzEsOCBAQAogewogICAgIGNoYXIgdXNlcmlkW01BWF9NQUlMQk9YX05BTUUrMV0sIGluYm94bmFt
ZVtNQVhfTUFJTEJPWF9QQVRIKzFdOwogICAgIGNoYXIgZXh0bmFtZVtNQVhfTUFJTEJPWF9OQU1F
KzFdID0gIklOQk9YIjsKLSAgICBpbnQgdHlwZTsKLSAgICBjaGFyICpzZXJ2ZXIgPSBOVUxMOwor
ICAgIGludCB0eXBlLCBteXJpZ2h0czsKKyAgICBjaGFyICpzZXJ2ZXIgPSBOVUxMLCAqYWNsOwog
ICAgIGludCByOwogICAgIGNvbnN0IGNoYXIgKnN0YXR1c2xpbmUgPSBOVUxMOwogCkBAIC0xNDc4
LDExICsxNDkyLDIwIEBACiAJCQkJCSAgICAgIHVzZXJpZCwgaW5ib3huYW1lKTsKIAogICAgIGlm
ICghcikgciA9IG1ib3hsaXN0X2RldGFpbChpbmJveG5hbWUsICZ0eXBlLCBOVUxMLCBOVUxMLAot
CQkJCSZzZXJ2ZXIsIE5VTEwsIE5VTEwpOworCQkJCSZzZXJ2ZXIsICZhY2wsIE5VTEwpOworICAg
IGlmICghciAmJiBjb25maWdfZ2V0c3dpdGNoKElNQVBPUFRfUE9QVVNFQUNMKSAmJgorCSghYWNs
IHx8CisJICEoKG15cmlnaHRzID0gY3lydXNfYWNsX215cmlnaHRzKHBvcGRfYXV0aHN0YXRlLCBh
Y2wpKSAmIEFDTF9SRUFEKSkpIHsKKwlyID0gKG15cmlnaHRzICYgQUNMX0xPT0tVUCkgPworCSAg
ICBJTUFQX1BFUk1JU1NJT05fREVOSUVEIDogSU1BUF9NQUlMQk9YX05PTkVYSVNURU5UOworICAg
IH0KICAgICBpZiAocikgewogCXNsZWVwKDMpOwotCXN5c2xvZyhMT0dfRVJSLCAiVW5hYmxlIHRv
IGxvY2F0ZSBtYWlsZHJvcCAlcyIsIGluYm94bmFtZSk7Ci0JcHJvdF9wcmludGYocG9wZF9vdXQs
ICItRVJSIFtTWVMvUEVSTV0gVW5hYmxlIHRvIGxvY2F0ZSBtYWlsZHJvcFxyXG4iKTsKKwlzeXNs
b2coTE9HX0VSUiwgIlVuYWJsZSB0byBsb2NhdGUgbWFpbGRyb3AgJXM6ICVzIiwKKwkgICAgICAg
aW5ib3huYW1lLCBlcnJvcl9tZXNzYWdlKHIpKTsKKwlwcm90X3ByaW50Zihwb3BkX291dCwKKwkJ
ICAgICItRVJSIFtTWVMvUEVSTV0gVW5hYmxlIHRvIGxvY2F0ZSBtYWlsZHJvcDogJXNcclxuIiwK
KwkJICAgIGVycm9yX21lc3NhZ2UocikpOwogCWdvdG8gZmFpbDsKICAgICB9CiAKQEAgLTE1MjYs
MTQgKzE1NDksMjcgQEAKIAlpbnQgbXNnOwogCXN0cnVjdCBpbmRleF9yZWNvcmQgcmVjb3JkOwog
CWludCBtaW5wb2xsOworCWludCBkb2Nsb3NlID0gMDsKIAogCXBvcGRfbG9naW5fdGltZSA9IHRp
bWUoMCk7CiAKLQlyID0gbWFpbGJveF9vcGVuX2hlYWRlcihpbmJveG5hbWUsIDAsICZtYm94c3Ry
dWN0KTsKKwlyID0gbWFpbGJveF9vcGVuX2hlYWRlcihpbmJveG5hbWUsIHBvcGRfYXV0aHN0YXRl
LCAmbWJveHN0cnVjdCk7CisJaWYgKCFyKSB7CisJICAgIGRvY2xvc2UgPSAxOworCSAgICBpZiAo
Y29uZmlnX2dldHN3aXRjaChJTUFQT1BUX1BPUFVTRUFDTCkgJiYKKwkJIShtYm94c3RydWN0Lm15
cmlnaHRzICYgQUNMX1JFQUQpKSB7CisJCXIgPSAobWJveHN0cnVjdC5teXJpZ2h0cyAmIEFDTF9M
T09LVVApID8KKwkJICAgIElNQVBfUEVSTUlTU0lPTl9ERU5JRUQgOiBJTUFQX01BSUxCT1hfTk9O
RVhJU1RFTlQ7CisJICAgIH0KKwl9CiAJaWYgKHIpIHsKIAkgICAgc2xlZXAoMyk7Ci0JICAgIHN5
c2xvZyhMT0dfRVJSLCAiVW5hYmxlIHRvIG9wZW4gbWFpbGRyb3AgJXMiLCBpbmJveG5hbWUpOwot
CSAgICBwcm90X3ByaW50Zihwb3BkX291dCwgIi1FUlIgW1NZUy9QRVJNXSBVbmFibGUgdG8gb3Bl
biBtYWlsZHJvcFxyXG4iKTsKKwkgICAgc3lzbG9nKExPR19FUlIsICJVbmFibGUgdG8gb3BlbiBt
YWlsZHJvcCAlczogJXMiLAorCQkgICBpbmJveG5hbWUsIGVycm9yX21lc3NhZ2UocikpOworCSAg
ICBwcm90X3ByaW50Zihwb3BkX291dCwKKwkJCSItRVJSIFtTWVMvUEVSTV0gVW5hYmxlIHRvIG9w
ZW4gbWFpbGRyb3A6ICVzXHJcbiIsCisJCQllcnJvcl9tZXNzYWdlKHIpKTsKKwkgICAgaWYgKGRv
Y2xvc2UpIG1haWxib3hfY2xvc2UoJm1ib3hzdHJ1Y3QpOwogCSAgICBnb3RvIGZhaWw7CiAJfQog
CkBAIC0xNTQxLDggKzE1NzcsMTEgQEAKIAlpZiAoIXIpIHIgPSBtYWlsYm94X2xvY2tfcG9wKCZt
Ym94c3RydWN0KTsKIAlpZiAocikgewogCSAgICBtYWlsYm94X2Nsb3NlKCZtYm94c3RydWN0KTsK
LQkgICAgc3lzbG9nKExPR19FUlIsICJVbmFibGUgdG8gbG9jayBtYWlsZHJvcCAlcyIsIGluYm94
bmFtZSk7Ci0JICAgIHByb3RfcHJpbnRmKHBvcGRfb3V0LCAiLUVSUiBbSU4tVVNFXSBVbmFibGUg
dG8gbG9jayBtYWlsZHJvcFxyXG4iKTsKKwkgICAgc3lzbG9nKExPR19FUlIsICJVbmFibGUgdG8g
bG9jayBtYWlsZHJvcCAlczogJXMiLAorCQkgICBpbmJveG5hbWUsIGVycm9yX21lc3NhZ2Uocikp
OworCSAgICBwcm90X3ByaW50Zihwb3BkX291dCwKKwkJCSItRVJSIFtJTi1VU0VdIFVuYWJsZSB0
byBsb2NrIG1haWxkcm9wOiAlc1xyXG4iLAorCQkJZXJyb3JfbWVzc2FnZShyKSk7CiAJICAgIGdv
dG8gZmFpbDsKIAl9CiAKQEAgLTE1OTksNiArMTYzOCw4IEBACiAJZnJlZShwb3BkX3N1YmZvbGRl
cik7CiAJcG9wZF9zdWJmb2xkZXIgPSAwOwogICAgIH0KKyAgICBhdXRoX2ZyZWVzdGF0ZShwb3Bk
X2F1dGhzdGF0ZSk7CisgICAgcG9wZF9hdXRoc3RhdGUgPSBOVUxMOwogICAgIHJldHVybiAxOwog
fQogCkluZGV4OiBsaWIvaW1hcG9wdGlvbnMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2Fmcy9hbmRy
ZXcvc3lzdGVtL2N2cy9zcmMvY3lydXMvbGliL2ltYXBvcHRpb25zLHYKcmV0cmlldmluZyByZXZp
c2lvbiAxLjIuMi4yMQpkaWZmIC11IC1yMS4yLjIuMjEgaW1hcG9wdGlvbnMKLS0tIGxpYi9pbWFw
b3B0aW9ucwkyMyBKdW4gMjAwNCAyMDoxNToxNiAtMDAwMAkxLjIuMi4yMQorKysgbGliL2ltYXBv
cHRpb25zCTI4IEp1biAyMDA0IDEzOjUxOjQ1IC0wMDAwCkBAIC02MzQsNiArNjM0LDEzIEBACiAv
KiBTZXQgdGhlIGxlbmd0aCBvZiB0aGUgUE9QIHNlcnZlcidzIGluYWN0aXZpdHkgYXV0b2xvZ291
dCB0aW1lciwgICAgCiAgICBpbiBtaW51dGVzLiAgVGhlIG1pbmltdW0gdmFsdWUgaXMgMTAsIHRo
ZSBkZWZhdWx0LiAqLwogCit7ICJwb3B1c2VhY2wiLCAwLCBTV0lUQ0ggfQorLyogRW5mb3JjZSBJ
TUFQIEFDTHMgaW4gdGhlIHBvcCBzZXJ2ZXIuICBEdWUgdG8gdGhlIG5hdHVyZSBvZiB0aGUgUE9Q
MworICAgcHJvdG9jb2wsIHRoZSBvbmx5IHJpZ2h0cyB3aGljaCBhcmUgdXNlZCBieSB0aGUgcG9w
IHNlcnZlciBhcmUgJ3InCisgICBhbmQgJ2QnIGZvciB0aGUgb3duZXIgb2YgdGhlIG1haWxib3gu
ICBUaGUgJ3InIHJpZ2h0IGFsbG93cyB0aGUKKyAgIHVzZXIgdG8gb3BlbiwgbGlzdCBhbmQgcmV0
cmlldmUgbWVzc2FnZXMuICBUaGUgJ2QnIHJpZ2h0IGFsbG93cyB0aGUKKyAgIHVzZXIgdG8gZGVs
ZXRlIG1lc3NhZ2VzLiAqLworCiB7ICJwb3N0bWFzdGVyIiwgInBvc3RtYXN0ZXIiLCBTVFJJTkcg
fQogLyogVXNlcm5hbWUgdGhhdCBpcyB1c2VkIGFzIHRoZSAnRnJvbScgYWRkcmVzcyBpbiByZWpl
Y3Rpb24gTUROcyBwcm9kdWNlZAogICAgYnkgc2lldmUuICovCg==
</data>        

          </attachment>
      

    </bug>

</bugzilla>