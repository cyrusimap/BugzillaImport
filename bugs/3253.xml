<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.cyrusimap.org/bugzilla.dtd">

<bugzilla version="3.2.5.1-2"
          urlbase="https://bugzilla.cyrusimap.org/"
          maintainer="Dave McMurtrie &lt;dave64@andrew.cmu.edu&gt;"
>

    <bug>
          <bug_id>3253</bug_id>
          
          <creation_ts>2010-09-03 14:17 EDT</creation_ts>
          <short_desc>masssievec should also work for virtual domain setups</short_desc>
          <delta_ts>2010-09-03 14:18:41 EDT</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Cyrus IMAP</product>
          <component>Sieve</component>
          <version>2.3.x</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>Future</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andre Schild">andre@schild.ws</reporter>
          <assigned_to name="Ken Murchison">murch@andrew.cmu.edu</assigned_to>
          
          

      

      

      
          <long_desc isprivate="0">
            <who name="Andre Schild">andre@schild.ws</who>
            <bug_when>2010-09-03 14:17:58 EDT</bug_when>
            <thetext>Created an attachment (id=1299)
udiff patch to support virtual domains in masssievec

The masssievec compiler to recompile all sieve scripts does not support virtual domains.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <who name="Andre Schild">andre@schild.ws</who>
            <bug_when>2010-09-03 14:18:41 EDT</bug_when>
            <thetext>Created an attachment (id=1300)
Full version of the masssievec script</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1299</attachid>
            <date>2010-09-03 14:17 EDT</date>
            <desc>udiff patch to support virtual domains in masssievec</desc>
            <filename>masssievec</filename>
            <type>application/octet-stream</type>
            <size>5367</size>
            <attacher>andre@schild.ws</attacher>
            
              <data encoding="base64">IyEvdXNyL2Jpbi9wZXJsIC13CiMKIyBTY3JpcHQgZm9yIG1hc3MgY29tcGlsYXRpb24gb2Ygc2ll
dmUgc2NyaXB0cy4KIwojIENvcHlyaWdodCAoYykgMTk5NC0yMDA4IENhcm5lZ2llIE1lbGxvbiBV
bml2ZXJzaXR5LiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KIwojIFJlZGlzdHJpYnV0aW9uIGFuZCB1
c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAojIG1vZGlmaWNh
dGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9u
cwojIGFyZSBtZXQ6CiMKIyAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCBy
ZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAojICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRp
dGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KIwojIDIuIFJlZGlzdHJpYnV0aW9u
cyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiMgICAg
bm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFp
bWVyIGluCiMgICAgdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92
aWRlZCB3aXRoIHRoZQojICAgIGRpc3RyaWJ1dGlvbi4KIwojIDMuIFRoZSBuYW1lICJDYXJuZWdp
ZSBNZWxsb24gVW5pdmVyc2l0eSIgbXVzdCBub3QgYmUgdXNlZCB0bwojICAgIGVuZG9yc2Ugb3Ig
cHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0CiMgICAg
cHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLiBGb3IgcGVybWlzc2lvbiBvciBhbnkgbGVnYWwKIyAg
ICBkZXRhaWxzLCBwbGVhc2UgY29udGFjdAojICAgICAgQ2FybmVnaWUgTWVsbG9uIFVuaXZlcnNp
dHkKIyAgICAgIENlbnRlciBmb3IgVGVjaG5vbG9neSBUcmFuc2ZlciBhbmQgRW50ZXJwcmlzZSBD
cmVhdGlvbgojICAgICAgNDYxNSBGb3JiZXMgQXZlbnVlCiMgICAgICBTdWl0ZSAzMDIKIyAgICAg
IFBpdHRzYnVyZ2gsIFBBICAxNTIxMwojICAgICAgKDQxMikgMjY4LTczOTMsIGZheDogKDQxMikg
MjY4LTczOTUKIyAgICAgIGlubm92YXRpb25AYW5kcmV3LmNtdS5lZHUKIwojIDQuIFJlZGlzdHJp
YnV0aW9ucyBvZiBhbnkgZm9ybSB3aGF0c29ldmVyIG11c3QgcmV0YWluIHRoZSBmb2xsb3dpbmcK
IyAgICBhY2tub3dsZWRnbWVudDoKIyAgICAiVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJl
IGRldmVsb3BlZCBieSBDb21wdXRpbmcgU2VydmljZXMKIyAgICAgYXQgQ2FybmVnaWUgTWVsbG9u
IFVuaXZlcnNpdHkgKGh0dHA6Ly93d3cuY211LmVkdS9jb21wdXRpbmcvKS4iCiMKIyBDQVJORUdJ
RSBNRUxMT04gVU5JVkVSU0lUWSBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQg
VE8KIyBUSElTIFNPRlRXQVJFLCBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBN
RVJDSEFOVEFCSUxJVFkKIyBBTkQgRklUTkVTUywgSU4gTk8gRVZFTlQgU0hBTEwgQ0FSTkVHSUUg
TUVMTE9OIFVOSVZFUlNJVFkgQkUgTElBQkxFCiMgRk9SIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBP
UiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMKIyBXSEFUU09FVkVSIFJFU1VM
VElORyBGUk9NIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4KIyBBTiBB
Q1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1IgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBB
UklTSU5HCiMgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1B
TkNFIE9GIFRISVMgU09GVFdBUkUuCiMKIyAkSWQ6IG1hc3NzaWV2ZWMsdiAxLjcgMjAwOC8wMy8y
NCAyMDoyNToyMiBtdXJjaCBFeHAgJAoKcmVxdWlyZSA1OwoKJHwgPSAxOwoKZGllICJtdXN0IG5v
dCBydW4gYXMgcm9vdCIgaWYgKCQ8ID09IDApOwoKaWYoQEFSR1YgPCAxKSB7CiAgICBwcmludCAi
dXNhZ2U6IG1hc3NzaWV2ZWMgPHBhdGggdG8gc2lldmVjPiBbaW1hcGQuY29uZl1cbiI7CiAgICBl
eGl0Owp9CgokU0lFVkVDID0gc2hpZnQgQEFSR1Y7CiRpbWFwZGNvbmYgPSBzaGlmdCBAQVJHVjsK
aWYoIWRlZmluZWQoJGltYXBkY29uZikpIHsKICAgICRpbWFwZGNvbmYgPSAiL2V0Yy9pbWFwZC5j
b25mIjsKfQoKJHNpZXZlZGlyID0gIi91c3Ivc2lldmUiOwokaGFzZG9tYWlucyA9IDA7CgppZigh
IC14ICRTSUVWRUMpIHsKICAgIHByaW50ICIkU0lFVkVDIGlzIG5vdCBleGVjdXRhYmxlXG4iOwog
ICAgZXhpdDsKfQoKaWYoJFNJRVZFQyAhfiAvXlwvLykgewogICAgcHJpbnQgIiRTSUVWRUMgaXMg
bm90IGFuIGFic29sdXRlIHBhdGhcbiI7CiAgICBleGl0Owp9CgpzdWIgcmVhZF9jb25mIHsKICAg
IG15ICRmaWxlID0gc2hpZnQ7CgogICAgb3BlbiBDT05GLCAkZmlsZSBvciBkaWUgImNhbid0IG9w
ZW4gJGZpbGUiOwogICAgd2hpbGUgKDxDT05GPikgewoJaWYgKC9eIy8pIHsgCgkgICAgbmV4dDsg
Cgl9CglpZiAoL1xAaW5jbHVkZTpccysoLiopJC8pIHsKCSAgICBwdXNoIEBjb25maWdzLCAkMTsK
CX0KCWlmICgvXnNpZXZldXNlaG9tZWRpcjpccysoMXx0fHllc3xvbikvKSB7CgkgICAgcHJpbnQg
InlvdSBhcmUgc3RvcmluZyBzaWV2ZSBzY3JpcHRzIGluIHVzZXIncyBob21lIGRpcmVjdG9yaWVz
LCB0aGlzIHNjcmlwdCBjYW5ub3QgZGVhbCB3aXRoIHRoYXRcbiI7CgkgICAgZXhpdDsKCX0KCWlm
ICgvXnNpZXZlZGlyOlxzKyguKikkLykgewoJICAgICRzaWV2ZWRpciA9ICQxOwoJfQoJaWYgKC9e
dmlydGRvbWFpbnM6XHMrKHVzZXJpZHxvbikvKSB7CgkgICAgJGhhc2RvbWFpbnM9IDE7Cgl9CiAg
ICB9CiAgICBjbG9zZSBDT05GOwp9CgpwdXNoIEBjb25maWdzLCAkaW1hcGRjb25mOwoKd2hpbGUg
KCRjb25mID0gc2hpZnQgQGNvbmZpZ3MpIHsKICAgIHJlYWRfY29uZigkY29uZik7Cn0KCnByaW50
ICJ5b3UgYXJlIHVzaW5nICRzaWV2ZWRpciBhcyB5b3VyIHNpZXZlIGRpcmVjdG9yeS5cbiI7Cmlm
ICgkaGFzZG9tYWlucyBlcSAxKQp7CgkgICAgcHJpbnQgInlvdSBhcmUgdXNpbmcgdmlydHVhbCBk
b21haW5zXG4iOwoJICAgIG9wZW5kaXIgRE9NQUlOLCAkc2lldmVkaXIgLiAiL2RvbWFpbiI7Cgkg
ICAgCgkgICAgd2hpbGUgKGRlZmluZWQoJHMgPSByZWFkZGlyIERPTUFJTikpIHsKCQluZXh0IGlm
ICgkcyBlcSAiLiIgfHwgJHMgZXEgIi4uIik7CiAgICAgICAgICAgIGNoZGlyICRzaWV2ZWRpciAu
ICIvZG9tYWluIiAuICIvJHMiOwogICAgICAgICAgICAkbGV0dGVyZGlyPSAkc2lldmVkaXIgLiAi
L2RvbWFpbiIgLiAiLyRzIjsKICAgICAgICAgICAgb3BlbmRpciBET01BSU5MRVRURVJTLCAiLiI7
CgoKCSAgICAgICAgICAgIHdoaWxlKGRlZmluZWQoJHQgPSByZWFkZGlyIERPTUFJTkxFVFRFUlMp
KSB7CiAgICAJCQluZXh0IGlmICgkdCBlcSAiLiIgfHwgJHQgZXEgIi4uIik7CgkJCSAgICBwcmlu
dCAicHJvY2Vzc2luZyBkb21haW4gJHRcbiI7CgkJCSAgICAjIHByaW50ICJjYWxsaW5nIHNpZXZl
YyBmb3I6ICIgLiAkbGV0dGVyZGlyIC4gIi8iIC4gJHQgLiAiXG4iOwoJCQkgICAgcHJvY2Vzc1Vz
ZXJzKCRsZXR0ZXJkaXIgLiAiLyIgLiAkdCk7CgkJICAgICB9CgkJICAgIGNsb3NlZGlyIERPTUFJ
TkxFVFRFUlMKCSAgICB9CiAgICAgICAgICAgIAkgICAgCgkgICAgY2xvc2VkaXIgRE9NQUlOOwp9
CmVsc2UKewogICAgcHJvY2Vzc1VzZXJzKCRzaWV2ZWRpcik7Cn0KCnN1YiBwcm9jZXNzVXNlcnMK
ewoJb3BlbmRpciBUT1AsICRfWzBdOwoJd2hpbGUgKGRlZmluZWQoJHMgPSByZWFkZGlyIFRPUCkp
IHsKCSAgICBuZXh0IGlmICgkcyBlcSAiLiIgfHwgJHMgZXEgIi4uIik7CgkgICAgY2hkaXIgJF9b
MF0gLiAiLyRzIjsKCSAgICBvcGVuZGlyIFRISVNPTkUsICIuIjsKCQoJICAgIHdoaWxlKGRlZmlu
ZWQoJHQgPSByZWFkZGlyIFRISVNPTkUpKSB7CgkJbmV4dCBpZiAoJHQgZXEgIi4iIHx8ICR0IGVx
ICIuLiIpOwoJCXByaW50ICJwcm9jZXNzaW5nIHVzZXIgJHRcbiI7CgkJY2hkaXIgJHQ7CgkKCQlv
cGVuZGlyIFVTRVIsICIuIjsKCQl3aGlsZShkZWZpbmVkKCR1ID0gcmVhZGRpciBVU0VSKSkgewoJ
CSAgICBuZXh0IGlmICgkdSBlcSAiLiIgfHwgJHUgZXEgIi4uIik7CgkJICAgIGlmKCR1IGVxICJk
ZWZhdWx0IiAmJiAtbCAkdSkgewoJCQkjIHNwZWNpYWwgY2FzZQoJCQkkZGVzdCA9IHJlYWRsaW5r
ICR1OwoJCQluZXh0IHVubGVzcygkZGVzdCA9fiBtL1wuc2NyaXB0JC8pOwoJCQkkZGVzdCA9fiBz
L1wuc2NyaXB0JC8vOwoJCQlzeW1saW5rICIkZGVzdC5iYyIsICJkZWZhdWx0YmMiIHx8IHdhcm4g
ImNhbid0IHN5bWxpbmsgJGRlc3QuYmMgdG8gZGVmYXVsdGJjOiAkISI7CgkJCXVubGluayAoImRl
ZmF1bHQiKTsKCQkgICAgfSBlbHNpZiAoJHUgZXEgImRlZmF1bHQuYmMiICYmIC1sICR1KSB7CgkJ
CSMgc2xpZ2h0bHkgZGlmZmVyZW50IHVwZ3JhZGUgZm9yYW10CgkJCSRkZXN0ID0gcmVhZGxpbmsg
JHU7CgkJCW5leHQgdW5sZXNzKCRkZXN0ID1+IG0vXC5iYyQvICYmICRkZXN0IG5lICJkZWZhdWx0
LmJjIik7CgkJCXN5bWxpbmsgIiRkZXN0IiwgImRlZmF1bHRiYyIgfHwgd2FybiAiY2FuJ3Qgc3lt
bGluayAkZGVzdCB0byBkZWZhdWx0YmM6ICQhIjsKCQkJdW5saW5rICgiZGVmYXVsdC5iYyIpOwoJ
CSAgICB9IGVsc2lmICgkdSBlcSAiZGVmYXVsdCIgfHwgJHUgZXEgImRlZmF1bHQuYmMiKSB7CgkJ
CXdhcm4gIiR1IGlzIG5vdCBhIHN5bWxpbmsiOwoJCSAgICB9IGVsc2UgewoJCQluZXh0IHVubGVz
cygkdSA9fiBtL1wuc2NyaXB0JC8pOwoJCQkkb3V0ID0gJHU7CgkJCSRvdXQgPX4gcy9cLnNjcmlw
dCQvLzsKCQoJCUZPUks6IHsKCQkJaWYoJHBpZCA9IGZvcmsoKSkgewoJCQkgICAgI3BhcmVudCwg
ZG8gbm90aGluZwoJCQkgICAgd2FpdHBpZCAkcGlkLCAwOwoJCQl9IGVsc2lmIChkZWZpbmVkICRw
aWQpIHsKCQkJICAgICMgY2hpbGQKCQkJICAgIGV4ZWMgJFNJRVZFQywgJHUsICIkb3V0LmJjIjsK
CQkJICAgIGRpZSAic291bGRuJ3QgYmUgaGVyZSI7CgkJCX0gZWxzaWYgKCQhID1+IC9ObyBtb3Jl
IHByb2Nlc3MvKSB7CgkJCSAgICAjIEVBR0FJTgoJCQkgICAgc2xlZXAgNTsgcmVkbyBGT1JLOwoJ
CQl9IGVsc2UgewoJCQkgICAgZGllICJjYW50IGZvcms6ICQhIjsKCQkJfQoJCSAgICAgIH0KCQoJ
CQkkcmMgPSAkPyAmIDB4ZmYwMDsKCQkJJHJjID4+PSA4OwoJCQlpZigkcmMpIHsKCQkJICAgIHBy
aW50ICJnb3QgZXJyb3IgY29tcGlsaW5nICR1LlxuIjsKCQkJfQoJCSAgICB9CgkJfQoJCWNoZGly
ICRfWzBdIC4gIi8kcyI7CgkgICAgfQoJICAgIGNsb3NlZGlyIFRISVNPTkU7Cgl9CgljbG9zZWRp
ciBUT1AKfQoK
</data>        

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1300</attachid>
            <date>2010-09-03 14:18 EDT</date>
            <desc>Full version of the masssievec script</desc>
            <filename>masssievec</filename>
            <type>application/octet-stream</type>
            <size>5367</size>
            <attacher>andre@schild.ws</attacher>
            
              <data encoding="base64">IyEvdXNyL2Jpbi9wZXJsIC13CiMKIyBTY3JpcHQgZm9yIG1hc3MgY29tcGlsYXRpb24gb2Ygc2ll
dmUgc2NyaXB0cy4KIwojIENvcHlyaWdodCAoYykgMTk5NC0yMDA4IENhcm5lZ2llIE1lbGxvbiBV
bml2ZXJzaXR5LiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KIwojIFJlZGlzdHJpYnV0aW9uIGFuZCB1
c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAojIG1vZGlmaWNh
dGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9u
cwojIGFyZSBtZXQ6CiMKIyAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCBy
ZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAojICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRp
dGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KIwojIDIuIFJlZGlzdHJpYnV0aW9u
cyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiMgICAg
bm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFp
bWVyIGluCiMgICAgdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92
aWRlZCB3aXRoIHRoZQojICAgIGRpc3RyaWJ1dGlvbi4KIwojIDMuIFRoZSBuYW1lICJDYXJuZWdp
ZSBNZWxsb24gVW5pdmVyc2l0eSIgbXVzdCBub3QgYmUgdXNlZCB0bwojICAgIGVuZG9yc2Ugb3Ig
cHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0CiMgICAg
cHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLiBGb3IgcGVybWlzc2lvbiBvciBhbnkgbGVnYWwKIyAg
ICBkZXRhaWxzLCBwbGVhc2UgY29udGFjdAojICAgICAgQ2FybmVnaWUgTWVsbG9uIFVuaXZlcnNp
dHkKIyAgICAgIENlbnRlciBmb3IgVGVjaG5vbG9neSBUcmFuc2ZlciBhbmQgRW50ZXJwcmlzZSBD
cmVhdGlvbgojICAgICAgNDYxNSBGb3JiZXMgQXZlbnVlCiMgICAgICBTdWl0ZSAzMDIKIyAgICAg
IFBpdHRzYnVyZ2gsIFBBICAxNTIxMwojICAgICAgKDQxMikgMjY4LTczOTMsIGZheDogKDQxMikg
MjY4LTczOTUKIyAgICAgIGlubm92YXRpb25AYW5kcmV3LmNtdS5lZHUKIwojIDQuIFJlZGlzdHJp
YnV0aW9ucyBvZiBhbnkgZm9ybSB3aGF0c29ldmVyIG11c3QgcmV0YWluIHRoZSBmb2xsb3dpbmcK
IyAgICBhY2tub3dsZWRnbWVudDoKIyAgICAiVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJl
IGRldmVsb3BlZCBieSBDb21wdXRpbmcgU2VydmljZXMKIyAgICAgYXQgQ2FybmVnaWUgTWVsbG9u
IFVuaXZlcnNpdHkgKGh0dHA6Ly93d3cuY211LmVkdS9jb21wdXRpbmcvKS4iCiMKIyBDQVJORUdJ
RSBNRUxMT04gVU5JVkVSU0lUWSBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQg
VE8KIyBUSElTIFNPRlRXQVJFLCBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBN
RVJDSEFOVEFCSUxJVFkKIyBBTkQgRklUTkVTUywgSU4gTk8gRVZFTlQgU0hBTEwgQ0FSTkVHSUUg
TUVMTE9OIFVOSVZFUlNJVFkgQkUgTElBQkxFCiMgRk9SIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBP
UiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMKIyBXSEFUU09FVkVSIFJFU1VM
VElORyBGUk9NIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4KIyBBTiBB
Q1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1IgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBB
UklTSU5HCiMgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1B
TkNFIE9GIFRISVMgU09GVFdBUkUuCiMKIyAkSWQ6IG1hc3NzaWV2ZWMsdiAxLjcgMjAwOC8wMy8y
NCAyMDoyNToyMiBtdXJjaCBFeHAgJAoKcmVxdWlyZSA1OwoKJHwgPSAxOwoKZGllICJtdXN0IG5v
dCBydW4gYXMgcm9vdCIgaWYgKCQ8ID09IDApOwoKaWYoQEFSR1YgPCAxKSB7CiAgICBwcmludCAi
dXNhZ2U6IG1hc3NzaWV2ZWMgPHBhdGggdG8gc2lldmVjPiBbaW1hcGQuY29uZl1cbiI7CiAgICBl
eGl0Owp9CgokU0lFVkVDID0gc2hpZnQgQEFSR1Y7CiRpbWFwZGNvbmYgPSBzaGlmdCBAQVJHVjsK
aWYoIWRlZmluZWQoJGltYXBkY29uZikpIHsKICAgICRpbWFwZGNvbmYgPSAiL2V0Yy9pbWFwZC5j
b25mIjsKfQoKJHNpZXZlZGlyID0gIi91c3Ivc2lldmUiOwokaGFzZG9tYWlucyA9IDA7CgppZigh
IC14ICRTSUVWRUMpIHsKICAgIHByaW50ICIkU0lFVkVDIGlzIG5vdCBleGVjdXRhYmxlXG4iOwog
ICAgZXhpdDsKfQoKaWYoJFNJRVZFQyAhfiAvXlwvLykgewogICAgcHJpbnQgIiRTSUVWRUMgaXMg
bm90IGFuIGFic29sdXRlIHBhdGhcbiI7CiAgICBleGl0Owp9CgpzdWIgcmVhZF9jb25mIHsKICAg
IG15ICRmaWxlID0gc2hpZnQ7CgogICAgb3BlbiBDT05GLCAkZmlsZSBvciBkaWUgImNhbid0IG9w
ZW4gJGZpbGUiOwogICAgd2hpbGUgKDxDT05GPikgewoJaWYgKC9eIy8pIHsgCgkgICAgbmV4dDsg
Cgl9CglpZiAoL1xAaW5jbHVkZTpccysoLiopJC8pIHsKCSAgICBwdXNoIEBjb25maWdzLCAkMTsK
CX0KCWlmICgvXnNpZXZldXNlaG9tZWRpcjpccysoMXx0fHllc3xvbikvKSB7CgkgICAgcHJpbnQg
InlvdSBhcmUgc3RvcmluZyBzaWV2ZSBzY3JpcHRzIGluIHVzZXIncyBob21lIGRpcmVjdG9yaWVz
LCB0aGlzIHNjcmlwdCBjYW5ub3QgZGVhbCB3aXRoIHRoYXRcbiI7CgkgICAgZXhpdDsKCX0KCWlm
ICgvXnNpZXZlZGlyOlxzKyguKikkLykgewoJICAgICRzaWV2ZWRpciA9ICQxOwoJfQoJaWYgKC9e
dmlydGRvbWFpbnM6XHMrKHVzZXJpZHxvbikvKSB7CgkgICAgJGhhc2RvbWFpbnM9IDE7Cgl9CiAg
ICB9CiAgICBjbG9zZSBDT05GOwp9CgpwdXNoIEBjb25maWdzLCAkaW1hcGRjb25mOwoKd2hpbGUg
KCRjb25mID0gc2hpZnQgQGNvbmZpZ3MpIHsKICAgIHJlYWRfY29uZigkY29uZik7Cn0KCnByaW50
ICJ5b3UgYXJlIHVzaW5nICRzaWV2ZWRpciBhcyB5b3VyIHNpZXZlIGRpcmVjdG9yeS5cbiI7Cmlm
ICgkaGFzZG9tYWlucyBlcSAxKQp7CgkgICAgcHJpbnQgInlvdSBhcmUgdXNpbmcgdmlydHVhbCBk
b21haW5zXG4iOwoJICAgIG9wZW5kaXIgRE9NQUlOLCAkc2lldmVkaXIgLiAiL2RvbWFpbiI7Cgkg
ICAgCgkgICAgd2hpbGUgKGRlZmluZWQoJHMgPSByZWFkZGlyIERPTUFJTikpIHsKCQluZXh0IGlm
ICgkcyBlcSAiLiIgfHwgJHMgZXEgIi4uIik7CiAgICAgICAgICAgIGNoZGlyICRzaWV2ZWRpciAu
ICIvZG9tYWluIiAuICIvJHMiOwogICAgICAgICAgICAkbGV0dGVyZGlyPSAkc2lldmVkaXIgLiAi
L2RvbWFpbiIgLiAiLyRzIjsKICAgICAgICAgICAgb3BlbmRpciBET01BSU5MRVRURVJTLCAiLiI7
CgoKCSAgICAgICAgICAgIHdoaWxlKGRlZmluZWQoJHQgPSByZWFkZGlyIERPTUFJTkxFVFRFUlMp
KSB7CiAgICAJCQluZXh0IGlmICgkdCBlcSAiLiIgfHwgJHQgZXEgIi4uIik7CgkJCSAgICBwcmlu
dCAicHJvY2Vzc2luZyBkb21haW4gJHRcbiI7CgkJCSAgICAjIHByaW50ICJjYWxsaW5nIHNpZXZl
YyBmb3I6ICIgLiAkbGV0dGVyZGlyIC4gIi8iIC4gJHQgLiAiXG4iOwoJCQkgICAgcHJvY2Vzc1Vz
ZXJzKCRsZXR0ZXJkaXIgLiAiLyIgLiAkdCk7CgkJICAgICB9CgkJICAgIGNsb3NlZGlyIERPTUFJ
TkxFVFRFUlMKCSAgICB9CiAgICAgICAgICAgIAkgICAgCgkgICAgY2xvc2VkaXIgRE9NQUlOOwp9
CmVsc2UKewogICAgcHJvY2Vzc1VzZXJzKCRzaWV2ZWRpcik7Cn0KCnN1YiBwcm9jZXNzVXNlcnMK
ewoJb3BlbmRpciBUT1AsICRfWzBdOwoJd2hpbGUgKGRlZmluZWQoJHMgPSByZWFkZGlyIFRPUCkp
IHsKCSAgICBuZXh0IGlmICgkcyBlcSAiLiIgfHwgJHMgZXEgIi4uIik7CgkgICAgY2hkaXIgJF9b
MF0gLiAiLyRzIjsKCSAgICBvcGVuZGlyIFRISVNPTkUsICIuIjsKCQoJICAgIHdoaWxlKGRlZmlu
ZWQoJHQgPSByZWFkZGlyIFRISVNPTkUpKSB7CgkJbmV4dCBpZiAoJHQgZXEgIi4iIHx8ICR0IGVx
ICIuLiIpOwoJCXByaW50ICJwcm9jZXNzaW5nIHVzZXIgJHRcbiI7CgkJY2hkaXIgJHQ7CgkKCQlv
cGVuZGlyIFVTRVIsICIuIjsKCQl3aGlsZShkZWZpbmVkKCR1ID0gcmVhZGRpciBVU0VSKSkgewoJ
CSAgICBuZXh0IGlmICgkdSBlcSAiLiIgfHwgJHUgZXEgIi4uIik7CgkJICAgIGlmKCR1IGVxICJk
ZWZhdWx0IiAmJiAtbCAkdSkgewoJCQkjIHNwZWNpYWwgY2FzZQoJCQkkZGVzdCA9IHJlYWRsaW5r
ICR1OwoJCQluZXh0IHVubGVzcygkZGVzdCA9fiBtL1wuc2NyaXB0JC8pOwoJCQkkZGVzdCA9fiBz
L1wuc2NyaXB0JC8vOwoJCQlzeW1saW5rICIkZGVzdC5iYyIsICJkZWZhdWx0YmMiIHx8IHdhcm4g
ImNhbid0IHN5bWxpbmsgJGRlc3QuYmMgdG8gZGVmYXVsdGJjOiAkISI7CgkJCXVubGluayAoImRl
ZmF1bHQiKTsKCQkgICAgfSBlbHNpZiAoJHUgZXEgImRlZmF1bHQuYmMiICYmIC1sICR1KSB7CgkJ
CSMgc2xpZ2h0bHkgZGlmZmVyZW50IHVwZ3JhZGUgZm9yYW10CgkJCSRkZXN0ID0gcmVhZGxpbmsg
JHU7CgkJCW5leHQgdW5sZXNzKCRkZXN0ID1+IG0vXC5iYyQvICYmICRkZXN0IG5lICJkZWZhdWx0
LmJjIik7CgkJCXN5bWxpbmsgIiRkZXN0IiwgImRlZmF1bHRiYyIgfHwgd2FybiAiY2FuJ3Qgc3lt
bGluayAkZGVzdCB0byBkZWZhdWx0YmM6ICQhIjsKCQkJdW5saW5rICgiZGVmYXVsdC5iYyIpOwoJ
CSAgICB9IGVsc2lmICgkdSBlcSAiZGVmYXVsdCIgfHwgJHUgZXEgImRlZmF1bHQuYmMiKSB7CgkJ
CXdhcm4gIiR1IGlzIG5vdCBhIHN5bWxpbmsiOwoJCSAgICB9IGVsc2UgewoJCQluZXh0IHVubGVz
cygkdSA9fiBtL1wuc2NyaXB0JC8pOwoJCQkkb3V0ID0gJHU7CgkJCSRvdXQgPX4gcy9cLnNjcmlw
dCQvLzsKCQoJCUZPUks6IHsKCQkJaWYoJHBpZCA9IGZvcmsoKSkgewoJCQkgICAgI3BhcmVudCwg
ZG8gbm90aGluZwoJCQkgICAgd2FpdHBpZCAkcGlkLCAwOwoJCQl9IGVsc2lmIChkZWZpbmVkICRw
aWQpIHsKCQkJICAgICMgY2hpbGQKCQkJICAgIGV4ZWMgJFNJRVZFQywgJHUsICIkb3V0LmJjIjsK
CQkJICAgIGRpZSAic291bGRuJ3QgYmUgaGVyZSI7CgkJCX0gZWxzaWYgKCQhID1+IC9ObyBtb3Jl
IHByb2Nlc3MvKSB7CgkJCSAgICAjIEVBR0FJTgoJCQkgICAgc2xlZXAgNTsgcmVkbyBGT1JLOwoJ
CQl9IGVsc2UgewoJCQkgICAgZGllICJjYW50IGZvcms6ICQhIjsKCQkJfQoJCSAgICAgIH0KCQoJ
CQkkcmMgPSAkPyAmIDB4ZmYwMDsKCQkJJHJjID4+PSA4OwoJCQlpZigkcmMpIHsKCQkJICAgIHBy
aW50ICJnb3QgZXJyb3IgY29tcGlsaW5nICR1LlxuIjsKCQkJfQoJCSAgICB9CgkJfQoJCWNoZGly
ICRfWzBdIC4gIi8kcyI7CgkgICAgfQoJICAgIGNsb3NlZGlyIFRISVNPTkU7Cgl9CgljbG9zZWRp
ciBUT1AKfQoK
</data>        

          </attachment>
      

    </bug>

</bugzilla>